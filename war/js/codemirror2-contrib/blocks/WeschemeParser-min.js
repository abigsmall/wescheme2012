var CodeMirrorBlocks=CodeMirrorBlocks||{};CodeMirrorBlocks.parsers=CodeMirrorBlocks.parsers||{},CodeMirrorBlocks.parsers.WeschemeParser=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n=t+" expression, "+e+" argument";return 1!=e&&(n+="s"),n}function i(t){var e={line:t.location.startRow-1,ch:t.location.startCol},n={line:t.location.endRow-1,ch:t.location.endCol};if(t instanceof f.callExpr){var r=void 0;return r=t.func?i(t.func):new u.Blank({line:e.line,ch:e.ch+1},{line:e.line,ch:e.ch+1},"...","blank",{"aria-label":"blank"}),new u.Expression(e,n,r,t.args.map(i).filter(function(t){return null!==t}),{"aria-label":o(t.func?t.func.stx:"empty",t.args.length)})}if(t instanceof f.andExpr)return new u.Expression(e,n,new u.Literal({line:e.line,ch:e.ch+1},{line:e.line,ch:e.ch+4},"and","symbol",{"aria-label":"and"}),t.exprs.map(i).filter(function(t){return null!==t}),{"aria-label":o("and",t.exprs.length)});if(t instanceof f.orExpr)return new u.Expression(e,n,new u.Literal({line:e.line,ch:e.ch+1},{line:e.line,ch:e.ch+3},"or","symbol",{"aria-label":"or"}),t.exprs.map(i).filter(function(t){return null!==t}),{"aria-label":o("or",t.exprs.length)});if(t instanceof f.defVar)return new u.VariableDefinition(e,n,t.name.stx,i(t.expr));if(t instanceof f.defStruct)return new u.Struct(e,n,t.name.stx,t.fields.map(i).filter(function(t){return null!=t}));if(t instanceof f.defFunc)return new u.FunctionDefinition(e,n,t.name.stx,t.args.map(function(t){return t.stx}),i(t.body));if(t instanceof f.symbolExpr)return new u.Literal(e,n,t.stx,"symbol",{"aria-label":t.stx});if(t instanceof f.literal){var a=s(t.val),c=t.toString();return l.isString(t.val)?(a="string",c="string "+t.val):l.isChar(t.val)?(a="char",c="char "+t.val):(t.val===l.FALSE||t.val===l.TRUE)&&(a="boolean",c=""+t.val),new u.Literal(e,n,t,a,{"aria-label":c})}return t instanceof f.comment?new u.Comment(e,n,";"+t.txt):t instanceof f.unsupportedExpr?new u.Unknown(e,n,t.val.map(i).filter(function(t){return null!==t}),{msg:t.errorMsg}):(console.log("!! No translator for",t),null)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},u=n(1);try{var c=n(2).lex,l=n(4),f=n(3)}catch(h){console.error("wescheme-js, which is required to use the wescheme blocks parser, does not appear to be installed.",h)}var p=function(){function t(){r(this,t)}return a(t,[{key:"lex",value:function(t){return c(t)}},{key:"parse",value:function e(t){function n(t){var e=t instanceof Array?v(t):[A(t)],n=new f.unsupportedExpr(e,"Parse error");return n.location=t.location,n}function r(t){return l.isVector(t.val)}function o(t){return l.isString(t.val)}function a(t){return t instanceof f.symbolExpr}function s(t){return t instanceof f.literal}function h(t){return t instanceof f.unsupportedExpr}function p(t){return t instanceof f.comment}function d(t){return t instanceof Array&&t.length>=1}function m(t){return t.slice(1)}function g(t,e){return t=a(t)?t.val:t,e=a(e)?e.val:e,t===e}function y(t){throw t}function v(t){function e(t){return p(t)?t:E(t)?k(t):S(t)?M(t):F(t)?V(t):L(t)?U(t):y("ASSERTION: Something was lexed that is not in the language:\n "+t.toString)}return t.map(e)}function e(t){return 0===t.length?[]:d(t)?v(t):n(t)}function w(t){return d(t)&&a(t[0])&&g("define-struct",t[0])}function b(t){return d(t)&&a(t[0])&&g("define",t[0])}function x(t){return d(t)&&a(t[0])&&g("define-values",t[0])}function E(t){return w(t)||b(t)||x(t)}function k(t){function e(t){return 3===t.length&&a(t[1])&&t[2]instanceof Array&&t[2].every(a)?new f.defStruct(j(t[1]),t[2].map(j),t):n(t)}function r(t){return 3===t.length&&t[1]instanceof Array?new f.defVars(t[1].map(j),M(t[2]),t):n(t)}function o(t){if(t.length<2)return n(t);if(t[1]instanceof Array){if(0===t[1].length||!a(t[1][0])||!t[1].every(a)||3!==t.length)return n(t);var e=m(t[1]).map(j);return e.location=t[1].location,new f.defFunc(j(t[1][0]),e,M(t[2]),t)}return a(t[1])?3!==t.length?n(t):new f.defVar(j(t[1]),M(t[2]),t):n(t)}var i=w(t)?e(t):b(t)?o(t):x?r(t):n(t);return i.location=t.location,i}function S(t){return!E(t)&&!F(t)&&!L(t)}function M(t){return d(t)?C(t):A(t)}function C(t){function e(t){return g(t[0],"unquote")||g(t[0],"unquote-splicing")||g(t[0],"else")?n(t):d(t)?new f.callExpr(M(t[0]),m(t).map(M),t[0]):n(t)}function r(t){if(!(3===t.length&&t[1]instanceof Array&&t[1].every(a)))return n(t);var e=t[1].map(j);return e.location=t[1].location,new f.lambdaExpr(e,M(t[2]),t[0])}function o(t){return 3===t.length&&t[1]instanceof Array&&t[1].every(E)?new f.localExpr(t[1].map(k),M(t[2]),t[0]):n(t)}function i(t){return 3===t.length&&t[1]instanceof Array&&t[1].every(D)?new f.letrecExpr(t[1].map(q),M(t[2]),t[0]):n(t)}function s(t){return 3===t.length&&t[1]instanceof Array&&t[1].every(D)?new f.letExpr(t[1].map(q),M(t[2]),t):n(t)}function u(t){if(!(3===t.length&&t[1]instanceof Array&&t[1].every(D)))return n(t);var e=t[1].map(q);return e.location=t[1].location,new f.letStarExpr(e,M(t[2]),t[0])}function c(t){return 4!==t.length?n(t):new f.ifExpr(M(t[1]),M(t[2]),M(t[3]),t[0])}function l(t){return t.length<2?n(t):new f.beginExpr(m(t).map(M),t[0])}function h(t){return t.length<3?n(t):new f.andExpr(m(t).map(M),t[0])}function p(t){return t.length<3?n(t):new f.orExpr(m(t).map(M),t[0])}function y(t){function e(t){return d(t)?t.map(e):t instanceof Array&&0===t.length?t:A(t)}return 2!==t.length?n(t):new f.quotedExpr(e(t[1]))}return function(){var n=t[0],f=a(n)?g("λ",n)?r(t):g("lambda",n)?r(t):g("local",n)?o(t):g("letrec",n)?i(t):g("let",n)?s(t):g("let*",n)?u(t):g("cond",n)?T(t):g("case",n)?I(t):g("if",n)?c(t):g("begin",n)?l(t):g("and",n)?h(t):g("or",n)?p(t):g("when",n)?P(t):g("unless",n)?P(t):g("quote",n)?y(t):g("quasiquote",n)?B(t):g("unquote",n)?_(t):g("unquote-splicing",n)?O(t):e(t):e(t);return f.location=t.location,f}()}function P(t){if(t.length<3)return n(t);var r=t.slice(2),o=new f.whenUnlessExpr(M(t[1]),e(r),t[0]);return r.location=r[0].location,o.location=t.location,o}function T(t){function e(t){return a(t[0])&&g(t[0],"else")}function r(t){if(!(t instanceof Array)||2!==t.length)throw"ParseError"}function o(t){var e=M(t[0]),n=M(t[1]),r=new f.couple(e,n);if(f.keywords.indexOf(e.val)>-1&&"else"!==e.val)throw"ParseError";return e.isClause=!0,r.location=t.location,r}if(1===t.length)return n(t);try{m(t).forEach(r);var i=m(t).length,s=m(t).map(o);m(t).forEach(function(t,n){if(e(t)&&i-1>n)throw"ParseError"})}catch(u){return n(t)}return new f.condExpr(s,t[0])}function I(t){function e(t){if(!(t instanceof Array&&2===t.length&&(t[0]instanceof Array||a(t[0])&&g(t[0],"else"))))throw"ParseError"}function r(t){return a(t[0])&&"else"===t[0].val}function o(t){var e=r(t)?t[0]:new f.quotedExpr(t[0]),n=M(t[1]),o=new f.couple(e,n);return e.isClause=!0,o.location=t.location,o}if(3!==t.length)return n(t);try{var i=t.slice(2);i.forEach(e);var s=i.length,u=i.map(o);i.forEach(function(t,e){if(r(t)&&s-1>e)throw"ParseError"})}catch(c){return n(t)}return new f.caseExpr(M(t[1]),u,t[0])}function q(t){if(D(t)){var e=new f.couple(j(t[0]),M(t[1]));return e.location=t.location,e.stx=t,e}return n(t)}function _(t,e){var r;if("undefined"==typeof e||2!==t.length)return n(t);if(1===e)return r=new f.unquotedExpr(M(t[1])),r.location=t[1].location,r;if(e>1)return r=new f.unquotedExpr(N(t[1],e-1)),r.location=t[1].location,r;throw"ASSERTION FAILURE: depth should have been undefined, or a natural number"}function O(t,e){var r;if("undefined"==typeof e||2!==t.length)return n(t);if(1===e)return r=new f.unquoteSplice(M(t[1])),r.location=t[1].location,r;if(e>1)return r=new f.unquoteSplice(N(t[1],e-1)),r.location=t[1].location,r;throw"ASSERTION FAILURE: depth should have been undefined, or a natural number"}function N(t,e){if(d(t)&&"unquote"===t[0].val)return _(t,e);if(d(t)&&"unquote-splicing"===t[0].val)return O(t,e);if(d(t)&&"quasiquote"===t[0].val)return B(t,e);if(d(t)){var n=t.map(function(t){return N(t,e)});return n.location=t.location,n}return 0===e?M(t):function(){var e=new f.quotedExpr(t);return e.location=t.location,e}()}function B(t,e){if(e="undefined"==typeof e?0:e,2!==t.length||d(t[1])&&g(t[1][0],"unquote-splicing"))return n(t);var r=N(t[1],e+1);r.location=t[1].location;var o=new f.quasiquotedExpr(r);return o.location=t.location,o}function R(t){function e(){var e=new f.literal(0);return e.location=t.location,e}var n=t.val,r=v(n.elts.filter(function(t){return void 0!==t})),o=0===r.length?e():r[r.length-1],i=n.elts.map(function(t){return void 0===t?o:M(t)}),a=new f.symbolExpr("vector"),s=new f.callExpr(a,i);return a.location=s.location=t.location,s}function A(t){var e=p(t)?t:h(t)?t:r(t)?R(t):a(t)?t:s(t)?t:g("quote",t)?new f.quotedExpr(t):g("empty",t)?new f.callExpr(new f.symbolExpr("list"),[]):new f.callExpr(null,[]);return e.location=t.location,e}function j(t){return a(t)?t:n(t)}function D(t){return d(t)&&2===t.length}function F(t){return d(t)&&a(t[0])&&g(t[0],"require")}function V(t){if(t.length<2)return n(t);if(t[1]instanceof Array&&g(t[1][0],"lib")){if(t[1].length<3||!m(t[1]).every(o))return n(t)}else if(t[1]instanceof Array&&g(t[1][0],"planet")||!a(t[1])&&!o(t[1]))return n(t);var e=new f.requireExpr(t[1],t[0]);return e.location=t.location,e}function L(t){return d(t)&&a(t[0])&&g(t[0],"provide")}function U(t){var e=m(t).map(function(e){return a(e)?e:e instanceof Array&&2==e.length&&a(e[0])&&g(e[0],"struct-out")&&a(e[1])?e:n(t)}),r=new f.provideStatement(e,t[0]);return r.location=t.location,r}var z=v(c(t)),W=z.map(i).filter(function(t){return null!==t});return new u.AST(W)}},{key:"getExceptionMessage",value:function(t){var e=JSON.parse(t)["dom-message"][2].slice(2);return e.every(function(t){return"string"==typeof t})?e:e[0]instanceof Array?e[0][2].substring(e[0][2].indexOf("read: ")+6):"Check your quotation marks, or any other symbols you've used"}}]),t}();c?t.exports=p:t.exports=function(){throw new Error("wescheme-js must be installed to use the wescheme blocks parser")}},function(t,e){t.exports=CodeMirrorBlocks.ast},function(t,e,n){"use strict";var r=n(3),o=n(4),i=n(5);!function(){function t(t){return/\s/.test(t)}function e(t){return"("===t||")"===t||"["===t||"]"===t||"{"===t||"}"===t}function n(t,e){return"("===t&&")"===e||"["===t&&"]"===e||"{"===t&&"}"===e}function a(t){return"("===t?")":"["===t?"]":"{"===t?"}":")"===t?"(":"]"===t?"[":"}"===t?"{":O(new o.Message(["otherDelim: Unknown delimiter: ",t]))}function s(e,n){var r;if(n<e.length)for(r=e.charAt(n);t(r)&&n<e.length;)"\n"===r?(x++,E=0):E++,r=e.charAt(++n);return n}function u(t){return t instanceof Array?"("+t.map(u).toString()+")":t.toString()}function c(t,e){var n=0;k=E=0,S=x=1,C=!0,M=e||"<definitions>";var r,o=[];for(b=[],n=s(t,0);n<t.length;)r=l(t,n),o.push(r),n=s(t,r.location.startChar+r.location.span);return o.location=new U(k,S,0,n,M),o}function l(t,e){k=E,S=x;var n=e;e=s(t,e);var r=t.charAt(e);e>=t.length&&(P=e,O(new o.Message([M,":",S.toString(),":",(k-1).toString(),": read: (found end-of-file)"]),new U(k-1,S,e-2,2),"Error-GenericReadError"));var i=B.test(r)?O(new o.Message(["read: expected a ",a(r)," to open ",new o.ColoredPart(r,new U(E,S,n,1))]),new U(E,S,n,1)):N.test(r)?f(t,e):'"'===r?h(t,e):"#"===r?p(t,e):";"===r?y(t,e):A.test(r)?v(t,e):w(t,e);return i}function f(t,e){function r(t,e,n){var r=l(t,e);if(e=r.location.end().startChar+1,r instanceof q&&"."==r.val){if(v){var i=new o.Message(["A syntax list may have only 2 `.'s"]);O(i,n[y].location)}v=y?n.length:!1,y=y||n.length}return r instanceof Comment||(r.parent=n,n.push(r)),e}function i(t,e,n){if(0===e&&(c=new o.Message(["A `.' cannot be the first element in a syntax list"]),O(c,t[e].location)),(e===t.length-1||n===t.length-1)&&(c=new o.Message(["A `.' cannot be the last element in a syntax list"]),O(c,t[n||e].location)),n){if(n-e===2)return t.slice(e+1,e+2).concat(t.slice(0,e),t.slice(n+1));c=new o.Message(["Two `.'s may only surround one syntax item"]),O(c,t[n].location)}return t[e+1]instanceof Array||(c=new o.Message(["A `.' must be followed by a syntax list, but found ",new o.ColoredPart("something else",t[e+1].location)]),O(c,t[e+1].location)),t.length>e+2?(c=new o.Message(["A `.' followed by a syntax list must be followed by a closing delimeter, but found ",new o.ColoredPart("something else",t[e+2].location)]),void O(c,t[e+1].location)):t.slice(0,e).concat(t[e+1],t.slice(e+2))}function u(t){if(/expected a .+ to (close|open)/.exec(t)||/unexpected/.exec(t)||/syntax list/.exec(t)||/bad syntax/.exec(t)||/bad character constant/.exec(t))throw t;var n=JSON.parse(JSON.parse(t)["structured-error"]).location;return m=new U(Number(n.column),Number(n.line),Number(n.offset)-1,Number(n.span)),e=P,d=t,e}var c,f=E,h=x,p=e,d=!1,m=new U(f,h,p,1),g=t.charAt(e++),y=!1,v=!1;E++;var w=[];for(b.push(g),e=s(t,e);e<t.length&&!B.test(t.charAt(e));){"\n"===t.charAt(e)&&(x++,E=0);try{e=r(t,e,w)}catch(k){e=u(k)}e=s(t,e)}if(e>=t.length&&(c=new o.Message(["read: expected a ",a(g)," to close ",new o.ColoredPart(g.toString(),new U(f,h,p,1))]),O(c,m)),n(g,t.charAt(e))||(c=new o.Message(["read: expected a ",a(g)," to close ",new o.ColoredPart(g.toString(),new U(f,h,p,1))," but found a ",new o.ColoredPart(t.charAt(e).toString(),new U(E,x,e,1))]),O(c,new U(E,x,e,1))),E++,e++,d)throw P=e,d;return(y||v)&&(w=i(w,y,v)),w.location=new U(f,h,p,e-p),w}function h(t,e){var n,r=E,i=x,a=e,s=/^\"[^\"]*(\\\"[^\"]*)*[^\\]\"|\"\"/.test(t.slice(e)),u=/^\"[^\"]*(\\"[^\"]*)*/.exec(t.slice(a))[0];e++,E++;for(var c,l="";e<t.length&&'"'!==t.charAt(e);){if(c=t.charAt(e++),"\n"===c?(x++,E=0):E++,"\\"===c){if(E++,c=t.charAt(e++),e>=t.length)break;switch(!0){case/a/.test(c):c="";break;case/b/.test(c):c="\b";break;case/t/.test(c):c="	";break;case/n/.test(c):c="\n";break;case/v/.test(c):c="\x0B";break;case/f/.test(c):c="\f";break;case/r/.test(c):c="\r";break;case/e/.test(c):c="'";break;case/\n/.test(c):c="";break;case/[\"\'\\]/.test(c):break;case/[xuU]/.test(c):var f="x"===c?j:"u"===c?D:V;f.test(t.slice(e))||(P=a+u.length+1,O(new o.Message([M,":",i.toString(),":",r.toString(),": read: no hex digit following \\"+c+" in string"]),new U(r,i,a,e-a+1),"Error-GenericReadError")),n=f.exec(t.slice(e))[1],c=String.fromCharCode(parseInt(n,16)),e+=n.length,E+=n.length;break;case L.test(t.slice(e-1)):n=L.exec(t.slice(e-1))[1],c=String.fromCharCode(parseInt(n,8)),e+=n.length-1,E+=n.length-1;break;default:P=a+u.length+1,O(new o.Message([M,":",i.toString(),":",r.toString(),": read: unknown escape sequence \\"+c+" in string"]),new U(r,i,a,e-a),"Error-GenericReadError")}}l+=c}s||(P=a+u.length,O(new o.Message([M,":",i.toString(),":",r.toString(),": read: expected a closing '\"'"]),new U(r,i,a,1),"Error-GenericReadError"));var h=new T(new o.string(l));return e++,E++,h.location=new U(r,i,a,e-a),h}function p(t,e){function n(t,e){i=new o.Message([M,":",x.toString(),":",(E-1).toString(),t]),O(i,new U(a,s,u,e.length+1),"Error-GenericReadError")}var r,i,a=E,s=x,u=e;if(e++,E++,e<t.length){var c=t.charAt(e).toLowerCase(),p=new RegExp('^(((fl|fx|s|hash|hasheq)[[({])|((rx|px)#{0,1}"))',"g"),b=p.exec(t.slice(e)),k=/^(!(?!\/)|reader|lang[\s]{0,1})/,S=k.exec(t.slice(e)),I=new RegExp("^(c|C)(i|I|s|S)"),N=I.exec(t.slice(e)),B=new RegExp("^([0-9]*)[[({]","g"),A=B.exec(t.slice(e));if(b&&b[0].length>0){var j,D=l(t,e+b[0].length-1),F=b[0].length,V=b[0].replace(/[\(\[\{\"|#\"]/g,"");switch(V){case"fl":j="flvectors";break;case"fx":j="fxvectors";break;case"s":j="structs";break;case"hash":case"hasheq":j="hashtables";break;case"px":case"rx":j="regular expressions";break;default:throw"IMPOSSIBLE: unsupportedMatch captured something it shouldn't: "+V}return i=new o.Message([M,":",x.toString(),":","0",": read-syntax: literal "+j+" not allowed"]),r=new _(D,i,F),r.location=new U(a,s,u,b[0].length+D.location.span),r}if(S&&S[0].length>0)n(": read: #"+S[0].trim()+" not enabled in the current context",S[0]);else{if(N&&N[0].length>0)return C="cs"===N[0].toLowerCase(),e+=2,E+=2,l(t,e);if(A&&A[0].length>0){var L=A[1]?parseInt(A[1]):"",z=L.toString().length;e+=z,E+=z;var W=f(t,e),G=""===L?W.length:parseInt(A[1]);return W.length>G&&(i=new o.Message(["read: vector length "+G+" is too small, ",W.length+" value"+(W.length>1?"s":"")," provided"]),O(i,new U(a,s,u,A[0].length))),e+=W.location.span,r=new T(new o.Vector(G,W)),r.location=new U(a,s,u,e-u),r}var Y=new RegExp("^(hasheq|hash|fl|fx|\\d+|true|false|[tfeibdox]|\\<\\<|[\\\\\\\"\\%\\:\\&\\|\\;\\!\\`\\,\\']|)","i"),$=Y.exec(t.slice(e))[0],K=t.charAt(e+$.length);switch(c=$.charAt(0).toLowerCase()){case"\\":r=d(t,e-1),e+=r.location.span-1;break;case'"':n(": byte strings are not supported in WeScheme",'#"');break;case"%":r=w(t,e),r.val="#"+r.val,e+=r.location.span;break;case":":r=w(t,e-1),i=new o.Message([M,":",x.toString(),":","0",": read-syntax: Keyword internment is not supported in WeScheme"]),r=new _(r.val,i,r.location.span),e+=r.val.length-1;break;case"&":E++,D=l(t,e+1);var X=new q("box");r=[X,D],e+=D.location.span+1,X.location=new U(a,s,u,e-u);break;case"|":e--,r=m(t,e),e+=r.location.span+1;break;case";":r=g(t,e+1),e+=r.location.span+1;break;case"!":r=y(t,e-1),e+=r.location.span;break;case"`":case",":case"'":r=v(t,e),r.location.startChar--,r.location.span++,P=e+r.location.span,i=new o.Message([M,":",s.toString(),":",(E-1).toString()," read: WeScheme does not support the '#"+c+"' notation for ",","===c?"unsyntax":"'"===c?"syntax":"quasisyntax"]),O(i,r.location);break;case"<<":r=h(t,e-1),e+=r.location.span;break;case"e":case"i":case"b":case"o":case"d":case"x":E--,r=w(t,e-1),e+=r.location.span-1;break;case"true":case"false":case"t":case"f":if(!R.exec(K)){r=new T("t"===c||"true"===$),e+=$.length,E+=$.length;break}default:P=e,i=new o.Message([M,":",x.toString(),":",(E-1).toString(),": read: bad syntax `#",$+K,"'"]),O(i,new U(a,s,u,($+K).length+1),"Error-GenericReadError")}}}else P=e,O(new o.Message([M,":",x.toString(),":",(E-1).toString(),": read: bad syntax `#'"]),new U(a,s,u,e-u),"Error-GenericReadError");return r.location=new U(a,s,u,e-u),r}function d(n,r){var i,a=E,s=x,u=r;r+=2,E++;for(var c,l="",f=!0;r<n.length&&"#\\"!==n.slice(r,r+2)&&(f||!t(n.charAt(r))&&!e(n.charAt(r)));)f=!1,E++,l+=n.charAt(r++);var h=new RegExp("(backspace|tab|newline|space|vtab)[^a-zA-Z]*","i");i=h.exec(l),h.test(l)?(l="backspace"===l?"\b":"tab"===l?"	":"newline"===l?"\n":"space"===l?" ":"vtab"===l?"\x0B":"Impossible: unknown special char was matched by special char!",r=u+2+i[1].length):/^[0-9].*/.test(l)&&L.test(l)&&L.exec(l)[0]===l&&parseInt(L.exec(l)[0],8)<256&&parseInt(L.exec(l)[0],8)>31?(i=/[0-7]+/.exec(l)[0],l=String.fromCharCode(parseInt(i,8)),r=u+2+i.length):/[uU]/.test(l)&&(c="u"===l.charAt(0)?D:F)&&c.test(l.slice(1))?(i=c.exec(l.slice(1))[0],E+=i.length-l.length+1,l=String.fromCharCode(parseInt(i,16)),r=u+3+i.length):1===l.length||/[^\u00C0-\u1FFF\u2C00-\uD7FF\w]$/.test(l.charAt(1))?(l=l.charAt(0),r=u+3):O(new o.Message([M,":",s.toString(),":",(a-1).toString(),": read: bad character constant: #\\",l]),new U(a-1,s,u,r-u),"Error-GenericReadError");var p=new T(new o["char"](l));return p.location=new U(a,s,u,r-u),p}function m(t,e){var n=E,i=x,a=e;e+=2,E+=2;for(var s="";e+1<t.length&&("|"!==t.charAt(e)||"#"!==t.charAt(e+1));)"\n"===t.charAt(e)&&(x++,E=0),s+=t.charAt(e),e++,E++;e+1>=t.length&&O(new o.Message(["read: Unexpected EOF when reading a multiline comment"]),new U(n,i,a,e-a)),e++,E++;var u=new r.comment(s);return u.location=new U(n,i,a,e-a),u}function g(t,e){for(var n,i=E++,a=x,u=e;(e=s(t,e))&&e+1<t.length&&(n=l(t,e))&&n instanceof I;)e=n.location.endChar;e+1>=t.length&&(P=e,O(new o.Message([M,":",a.toString(),":",(i-1).toString(),": read: expected a commented-out element for `#;' (found end-of-file)"]),new U(i-1,a,e-2,2),"Error-GenericReadError"));var c=new r.comment("("+n.toString()+")");return e=n.location.endChar,c.location=new U(i,a,u,e-u),c}function y(t,e){var n=E,i=x,a=e;e++,E++;for(var s="";e<t.length&&"\n"!==t.charAt(e);)s+=t.charAt(e),E++,e++;e>t.length&&(P=e,O(new o.Message(["read: Unexpected EOF when reading a line comment"]),new U(n,i,a,e-a)));var u=new r.comment(s);return u.location=new U(n,i,a,e+1-a),x++,E=0,u}function v(t,e){function n(t){P=t+1;var e="'"==c?" quoting ":"`"==c?" quasiquoting ":","==c?" unquoting ":",@"==c?" unquoting ":"";O(new o.Message([M,":",a.toString(),":",i.toString(),": read: expected an element for"+e,c," (found end-of-file)"]),new U(i,a,u,c.length),"Error-GenericReadError")}var r,i=E,a=x,u=e,c=t.charAt(e),f="'"==c?new q("quote"):"`"==c?new q("quasiquote"):"";for(e+1>=t.length&&n(e),e++,E++,","==c&&("@"==t.charAt(e)?(e++,E++,c+="@",f=new q("unquote-splicing")):f=new q("unquote")),f.location=new U(E-1,a,u,e-u);!r||r instanceof Comment;){e=s(t,e);try{r=l(t,e)}catch(h){/read\: \(found end-of-file\)/.test(h)&&n(e);var p=/expected a .* to open \",\"(.)\"/.exec(h);throw p&&(P=e+1,O(new o.Message([M,":",x.toString(),":",E.toString(),": read: unexpected `"+p[1]+"'"]),new U(E,x,e,1),"Error-GenericReadError")),h}e=r.location.end().startChar+1}var d=[f,r],m=r.location.end().startChar+1-u;return d.location=new U(i,a,u,m),d}function w(t,e){var n,r=E,a=x,s=e,u=new RegExp("(\\|(.|\\n)*\\||\\\\(.|\\n)|[^\\(\\)\\{\\}\\[\\]\\,\\'\\`\\s\\\"\\;])+","mg"),c=u.exec(t.slice(e))[0],l=/\.*\\+$/.exec(c);l&&l[0].length%2>0&&(e=t.length,P=e,O(new o.Message([M,":",x.toString(),":",r.toString(),": read: EOF following `\\' in symbol"]),new U(r,a,s,e-s),"Error-GenericReadError")),e+=c.length,E+=c.length;var f="";for(n=0;n<c.length;n++)"\\"==c.charAt(n)&&n++,f+=c.charAt(n);var h=f.split("|");if(h.length%2===0){P=t.length;var p=h[h.length-1].length+1,d=c.slice(0,c.length-p),m=s+d.length;for(E=r,n=0;n<d.length;n++)"\n"===t.charAt(e)?(x++,E=0):E++;O(new o.Message([M,":",x.toString(),":",E.toString(),": read: unbalanced `|'"]),new U(E,x,m,t.length-m),"Error-GenericReadError")}var g=h.reduce(function(t,e,n){return t+=n%2||C?e:e.toLowerCase()},"");"\n"===g&&(x++,E=0);var y=new RegExp("^$|[\\(\\)\\{\\}\\[\\]\\,\\'\\`\\s\\\"\\\\]","g"),v=new RegExp("^.*\\\\[\\d]*.*|\\|[\\d]*\\|");g=v.test(c)||y.test(g)?"|"+g+"|":g;var w=new q(g);if(1===h.length&&!/^[a-zA-Z\-\?]+$/.test(g))try{var b=i.fromString(g,!0);(b||0===b)&&(b instanceof Object&&(b.stx=g,b.location=new U(r,a,s,e-s)),w=new T(b))}catch(k){P=e;var S=new o.Message([M,":",a.toString(),":",r.toString(),": read: "+k.message]);O(S,new U(r,a,s,e-s),"Error-GenericReadError")}return w.stx=g,w.location=new U(r,a,s,e-s),w}var b,x,E,k,S,M,C,P,T=r.literal,I=r.comment,q=r.symbolExpr,_=r.unsupportedExpr,O=r.throwError,N=/[(\u005B\u007B]/,B=/[)\u005D\u007D]/,R=/^[^(\u005B\u007B)\u005D\u007D\s]+/,A=/[\'`,]/,j=new RegExp("^([0-9a-f]{1,2})","i"),D=new RegExp("^([0-9a-f]{1,4})","i"),F=new RegExp("^([0-9a-f]{1,6})","i"),V=new RegExp("^([0-9a-f]{1,8})","i"),L=new RegExp("^([0-7]{1,3})","i"),U=function z(t,e,n,r,i){this.startCol=t,this.startRow=e,this.startChar=n,this.span=r,this.source=i||M,this.endCol=E,this.endRow=x,this.endChar=n+r,this.start=function(){return new z("","",this.startChar,1)},this.end=function(){return new z("","",this.startChar+this.span-1,1)},this.toString=function(){return"Loc("+this.startCol+", "+this.startRow+", "+(this.startChar+1)+","+this.span+")"},this.toVector=function(){return new o.vector(['"'+this.source+'"',this.startChar+1,this.startRow,this.startCol,this.span])},this.toString=function(){return{line:this.startRow.toString(),id:this.source,span:this.span.toString(),offset:(this.startChar+1).toString(),column:this.startCol.toString()}}};Array.prototype.toString=function(){return this.join(" ")},r.lex=function(t,e,n){var r=(new Date).getTime();try{var o=c(t,e)}catch(i){throw console.log("LEXING ERROR"),i}var a=(new Date).getTime();return n&&(console.log("Lexed in "+Math.floor(a-r)+"ms"),console.log(o),console.log(u(o))),o},r.sexpToString=u}(),t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n){function r(t){return"string"==typeof t?t:t instanceof C?'["span", [["class", "SchemeValue-Symbol"]], '+t.val+"]":void 0!==t.location?{text:t.text,type:"ColoredPart",loc:t.location.toString(),toString:function(){return t.text}}:void 0!==t.locations?{text:t.text,type:"MultiPart",solid:t.solid,locs:t.locations.map(function(t){return t.toString()}),toString:function(){return t.text}}:void 0}e.source=e.source||"<unknown>",t.args=t.args.map(r);var o={type:"moby-failure","dom-message":["span",[["class","Error"]],["span",[["class",n||"Message"]]].concat(n?[["span",[["class","Error.reason"]],t.toString()],["span",[["class",(n||"message")+("Error-GenericReadError"===n?".locations":".otherLocations")]]]]:t.args.map(function(t){return t.toString()})),["br",[],""],["span",[["class","Error.location"]],["span",[["class","location-reference"],["style","display:none"]],["span",[["class","location-offset"]],(e.startChar+1).toString()],["span",[["class","location-line"]],e.startRow.toString()],["span",[["class","location-column"]],e.startCol.toString()],["span",[["class","location-span"]],e.span.toString()],["span",[["class","location-id"]],e.source.toString()]]]],"structured-error":JSON.stringify({message:n?!1:t.args,location:e.toString()})};throw JSON.stringify(o)}function s(t,e){this.first=t,this.second=e,this.toString=function(){return"("+this.first.toString()+" "+this.second.toString()+")"}}function u(t){return!(t instanceof k||t instanceof S||t instanceof M||t instanceof E||t instanceof T||t instanceof I||t instanceof P)}function c(t){return t instanceof k||t instanceof S||t instanceof M||t instanceof E}function l(t,e,n){this.name=t,this.source=e,this.bindings=n}function f(t,e,n,r){return this.name=t,this.moduleSource=e,this.permissions=n,this.loc=r,this.toString=function(){return this.name},this}function h(t,e,n,r,o,i,a){return this.name=t,this.moduleSource=e,this.minArity=n,this.isVarArity=r,this.permissions=o,this.isCps=i,this.loc=a,this.toString=function(){return this.name},this}function p(t,e,n,r,o,i,a,s,u){return this.name=t,this.moduleSource=e,this.fields=n,this.constructor=r,this.predicate=o,this.accessors=i,this.mutators=a,this.permissions=s,this.loc=u,this.toString=function(){return this.name},this}function d(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var n=[],r=0;r<=e.length;r++)n[r]=[r];for(var o=0;o<=t.length;o++)n[0][o]=o;for(r=1;r<=e.length;r++)for(o=1;o<=t.length;o++)e.charAt(r-1)==t.charAt(o-1)?n[r][o]=n[r-1][o-1]:n[r][o]=Math.min(n[r-1][o-1]+1,Math.min(n[r][o-1]+1,n[r-1][o]+1));return n[e.length][t.length]}function m(t){var e=n(7);return e.knownModules.reduce(function(e,n){var r=d(n.name,t);return r<e.distance?{name:n.name,distance:r}:e},{name:t,distance:5})}function g(t){var e=t.toString().split("/"),r=e[0],o=n(7);return o.knownCollections.includes(r)&&D(t.toString())||/^wescheme\/\w+$/.exec(t)}function y(t){var e=["null","empty","true","false","eof","pi","e","js-undefined","js-null"].reduce(function(t,e){return t.extendConstant(e.toString(),'"moby/toplevel"',!1)},new A),r=new F,o=n(7),i=o=o.topLevelModules.reduceRight(function(t,e){return t.extendEnv_moduleBinding(e)},e);return"moby"===t?r.env=i.extendEnv_moduleBinding(o.mobyModuleBinding):"base"===t&&(r.env=i),r}var v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=a,e.couple=s,e.isExpression=u,e.isDefinition=c,e.moduleBinding=l,e.constantBinding=f,e.functionBinding=h,e.structBinding=p,e.moduleGuess=m,e.defaultModulePathResolver=g,e.getBasePinfo=y;var w=n(4),b=w.Vector,x=e.Program=function(){function t(){i(this,t),this.location=null}return v(t,[{key:"toString",value:function(){return this.val.toString()}}]),t}(),E=(e.comment=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n.txt=t,n}return o(e,t),v(e,[{key:"toString",value:function(){return";"+this.txt}}]),e}(x),e.defFunc=function(t){function e(t,n,o,a){i(this,e);var s=r(this,Object.getPrototypeOf(e).call(this));return s.name=t,s.args=n,s.body=o,s.stx=a,s}return o(e,t),v(e,[{key:"toString",value:function(){return"(define ("+this.name.toString()+" "+this.args.join(" ")+")\n    "+this.body.toString()+")"}}]),e}(x)),k=e.defVar=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.name=t,a.expr=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(define "+this.name.toString()+" "+this.expr.toString()+")"}}]),e}(x),S=e.defVars=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.names=t,a.expr=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(define-values ("+this.names.join(" ")+") "+this.expr.toString()+")"}}]),e}(x),M=e.defStruct=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.name=t,a.fields=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(define-struct "+this.name.toString()+" ("+this.fields.toString()+"))"}}]),e}(x),C=(e.beginExpr=function(t){function e(t,n){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o.exprs=t,o.stx=n,o}return o(e,t),v(e,[{key:"toString",value:function(){return"(begin "+this.exprs.join(" ")+")"}}]),e}(x),e.lambdaExpr=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.args=t,a.body=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(lambda ("+this.args.join(" ")+") "+this.body.toString()+")"}}]),e}(x),e.localExpr=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.defs=t,a.body=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(local ("+this.defs.toString()+") "+this.body.toString()+")"}}]),e}(x),e.letrecExpr=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.bindings=t,a.body=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(letrec ("+this.bindings.toString()+") ("+this.body.toString()+"))"}}]),e}(x),e.letExpr=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.bindings=t,a.body=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(let ("+this.bindings.toString()+") ("+this.body.toString()+"))"}}]),e}(x),e.letStarExpr=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.bindings=t,a.body=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(let* ("+this.bindings.toString()+") ("+this.body.toString()+"))"}}]),e}(x),e.condExpr=function(t){function e(t,n){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o.clauses=t,o.stx=n,o}return o(e,t),v(e,[{key:"toString",value:function(){return"(cond\n    "+this.clauses.join("\n    ")+")"}}]),e}(x),e.caseExpr=function(t){function e(t,n,o){
i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.expr=t,a.clauses=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"(case "+this.expr.toString()+"\n    "+this.clauses.join("\n    ")+")"}}]),e}(x),e.andExpr=function(t){function e(t,n){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o.exprs=t,o.stx=n,o}return o(e,t),v(e,[{key:"toString",value:function(){return"(and "+this.exprs.join(" ")+")"}}]),e}(x),e.orExpr=function(t){function e(t,n){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o.exprs=t,o.stx=n,o}return o(e,t),v(e,[{key:"toString",value:function(){return"(or "+this.exprs.toString()+")"}}]),e}(x),e.callExpr=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.func=t,a.args=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"("+[this.func].concat(this.args).join(" ")+")"}}]),e}(x),e.ifExpr=function(t){function e(t,n,o,a){i(this,e);var s=r(this,Object.getPrototypeOf(e).call(this));return s.predicate=t,s.consequence=n,s.alternative=o,s.stx=a,s}return o(e,t),v(e,[{key:"toString",value:function(){return"(if "+this.predicate.toString()+" "+this.consequence.toString()+" "+this.alternative.toString()+")"}}]),e}(x),e.whenUnlessExpr=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.predicate=t,a.exprs=n,a.stx=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return"("+this.stx[0]+" "+this.predicate.toString()+" "+this.exprs.toString()+")"}}]),e}(x),e.symbolExpr=function(t){function e(t,n){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o.val=t,o.stx=n,o}return o(e,t),e}(x));e.literal=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n.val=t,n}return o(e,t),v(e,[{key:"toString",value:function(){if(this.val===!0)return"#t";if(this.val===!1)return"#f";if(this.val instanceof w.Char){var t=this.val.val;return"\b"===t?"#\\backspace":"	"===t?"#\\tab":"\n"===t?"#\\newline":" "===t?"#\\space":"\x0B"===t?"#\\vtab":this.val.toWrittenString()}return w.toWrittenString(this.val)}}]),e}(x);b.prototype.toString=b.prototype.toWrittenString=function(){var t=this.elts.filter(function(t){return void 0!==t}),e=t[t.length-1];return"#("+this.elts.map(function(t){return void 0===t?e:t})+")"};var P=(e.quotedExpr=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n.val=t,n}return o(e,t),v(e,[{key:"toString",value:function(){function t(t){return t instanceof Array&&2===t.length&&t[0]instanceof C&&("quasiquote"===t[0].val||"quote"===t[0].val||"unquote"===t[0].val||"unquote-splicing"===t[0].val)}function e(t){var e=t.val;return"quasiquote"===e?"`":"quote"===e?"'":"unquote"===e?",":"unquote-splicing"===e?",@":function(){throw"impossible quote-like string"}()}function n(r){return t(r)?e(r[0]).concat(n(r[1])):r instanceof Array?r.reduce(function(t,e){return t.concat(n(e))},"(").concat(")"):r.toString()}return"'"+n(this.val)}}]),e}(x),e.unquotedExpr=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n.val=t,n}return o(e,t),v(e,[{key:"toString",value:function(){return","+this.val.toString()}}]),e}(x),e.quasiquotedExpr=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n.val=t,n}return o(e,t),v(e,[{key:"toString",value:function(){return this.val instanceof Array?"`("+this.val.toString()+")":"`"+this.val.toString()}}]),e}(x),e.unquoteSplice=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n.val=t,n}return o(e,t),v(e,[{key:"toString",value:function(){return",@"+this.val.toString()}}]),e}(x),e.requireExpr=function(t){function e(t,n){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o.spec=t,o.stx=n,o}return o(e,t),v(e,[{key:"toString",value:function(){return"(require "+this.spec.toString()+")"}}]),e}(x)),T=e.provideStatement=function(t){function e(t,n){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o.clauses=t,o.stx=n,o}return o(e,t),v(e,[{key:"toString",value:function(){return"(provide "+this.clauses.toString()+")"}}]),e}(x),I=e.unsupportedExpr=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.val=t,a.errorMsg=n,a.errorSpan=o,a}return o(e,t),v(e,[{key:"toString",value:function(){return this.val.toString()}}]),e}(x),q=e.keywords=["cond","else","let","case","let*","letrec","quote","quasiquote","unquote","unquote-splicing","local","begin","if","or","and","when","unless","lambda","λ","define","define-struct","define-values"],_=e.baseStackReference=function V(){i(this,V),this.type="base"},O=e.localStackReference=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.name=t,a.isBoxed=n,a.depth=o,a}return o(e,t),e}(_),N=e.globalStackReference=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.name=t,a.pos=o,a.depth=n,a}return o(e,t),e}(_),B=e.unboundStackReference=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n.name=t,n}return o(e,t),e}(_),R=e.env=function(){function t(e){i(this,t),this.bindings=e||new Map,this.keys=this.bindings.keys}return v(t,[{key:"lookup",value:function(t){return this.bindings.has(t)?this.bindings.get(t):!1}},{key:"peek",value:function(t){return 0==t?this:this instanceof A?"IMPOSSIBLE - peeked at an emptyEnv!":this.parent.peek(t-1)}},{key:"contains",value:function(t){return this.lookup(t)!==!1}},{key:"extend",value:function(e){return this.bindings.set(e.name,e),new t(this.bindings)}},{key:"extendFunction",value:function(t,e,n,r,o){return this.extend(new h(t,e,n,r,[],!1,o))}},{key:"extendConstant",value:function(t,e,n){return this.extend(new f(t,e,[],n))}},{key:"lookup_context",value:function(e){return e.context instanceof t?e.context.contains(e)?e.context.lookup(e):!1:this.contains(e)?this.lookup(e):!1}},{key:"extendEnv_moduleBinding",value:function(t){return t.bindings.reduceRight(function(t,e){return t.extend(e)},this)}},{key:"toString",value:function(){return this.bindings.values().reduce(function(t,e){return t+"\n  |---"+e.name},"")}}]),t}(),A=e.emptyEnv=function(t){function e(){return i(this,e),r(this,Object.getPrototypeOf(e).call(this))}return o(e,t),v(e,[{key:"lookup",value:function(t){return new B(t)}}]),e}(R),j=(e.unnamedEnv=function(t){function e(t){i(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n.parent=t,n}return o(e,t),v(e,[{key:"lookup",value:function(t,e){return this.parent.lookup(t,e+1)}}]),e}(R),e.localEnv=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.name=t,a.boxed=n,a.parent=o,a}return o(e,t),v(e,[{key:"lookup",value:function(t,e){return t===this.name?new O(t,this.boxed,e):this.parent.lookup(t,e+1)}}]),e}(R),e.globalEnv=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.names=t,a.boxed=n,a.parent=o,a}return o(e,t),v(e,[{key:"lookup",value:function(t,e){var n=this.names.indexOf(t);return n>-1?new N(t,e,n):this.parent.lookup(t,e+1)}}]),e}(R),""),D=e.defaultModuleResolver=function(t){for(var e=n(7),r=0;r<e.knownModules.length;r++)if(e.knownModules[r].name===t)return e.knownModules[r];return!1},F=e.pinfo=function(){function t(e,n,r,o,a,s,u,c,l,f,h,p,d,m){i(this,t),this.env=e||new A,this.modules=n||[],this.usedBindingsHash=r||new Map,this.freeVariables=o||[],this.gensymCounter=a||0,this.providedNames=s||new Map,this.definedNames=u||new Map,this.sharedExpressions=c||new Map,this.withLocationEmits=l||!0,this.allowRedefinition=f||!1,this.moduleResolver=h||D,this.modulePathResolver=p||g,this.currentModulePath=d||j,this.declaredPermissions=m||[],this.usedBindings=function(){return Array.from(this.usedBindingsHash.values())}}return v(t,[{key:"isRedefinition",value:function(t){return this.env.lookup(t)}},{key:"accumulateDeclaredPermission",value:function(t,e){return this.declaredPermissions=[[t,e]].concat(this.declaredPermissions),this}},{key:"accumulateDefinedBinding",value:function(t,e){if(q.indexOf(t.name)>-1)a(new w.Message([new w.ColoredPart(t.name,e),": this is a reserved keyword and cannot be used as a variable or function name"]),e);else{if(this.allowRedefinition||!this.isRedefinition(t.name))return this.env.extend(t),this.definedNames.set(t.name,t),this;var n=this.env.lookup(t.name);n.loc?a(new w.Message([new w.ColoredPart(t.name,e),": this name has a ",new w.ColoredPart("previous definition",n.loc)," and cannot be re-defined"]),e):a(new w.Message([new w.ColoredPart(t.name,e),": this name has a ","previous definition"," and cannot be re-defined"]),e)}}},{key:"accumulateDefinedBindings",value:function(t,e){var n=this;return t.forEach(function(t){n.accumulateDefinedBinding(t,e)}),this}},{key:"accumulateModuleBindings",value:function(t){var e=this;return t.forEach(function(t){e.env.extend(t)}),this}},{key:"accumulateModule",value:function(t){return this.modules=[t].concat(this.modules),this}},{key:"accumulateBindingUse",value:function(t){var e=this.usedBindingsHash.get(t.name);return e&&e.moduleSource||this.usedBindingsHash.set(t.name,t),this}},{key:"accumulateFreeVariableUse",value:function(t){return this.freeVariables=this.freeVariables.indexOf(t)>-1?this.freeVariables:[t].concat(this.freeVariables),this}},{key:"gensym",value:function(t){return[this,new C(t+this.gensymCounter++)]}},{key:"permissions",value:function(){function t(t,e,n){return n.indexOf(t)===e}function e(t,e){return(e instanceof h||e instanceof f)&&e.permissions.length>0?t.concat(e.permissions):t}return Array.from(this.usedBindings()).reduce(e,[]).filter(t)}},{key:"getExposedBindings",value:function(){function t(t){function e(t){return o.definedNames.get(t)}o.definedNames.has(t.symbl)||a(new w.Message(["provided-name-not-defined: ",t.symbl]));var i=r(i,o.definedNames.get(t.symbl)),s=n(9);return t instanceof s.provideBindingStructId?[e(i.constructor),e(i.predicate)].concat(i.accessors.map(e),i.mutators.map(e)):[i]}function e(t){var e=function(e){return e[0]===t.name},n=o.declaredPermissions.filter(e);return t.permissions=n.map(function(t){return t[1]}),t}function r(t,e){var r=n(9);return!(t instanceof r.provideBindingStructId)||e instanceof p?e:void a(new w.Message(["provided-structure-not-structure: ",e.symbl]))}var o=this,i=o.providedNames.reduce(function(e,n){return e.concat(t(n))},[]);return i.map(e)}},{key:"toString",value:function(){var t="pinfo-------------";return t+="\n**env****: "+this.env.toString(),t+="\n**modules**: "+this.modules.join(","),t+="\n**used bindings**: "+this.usedBindings(),t+="\n**free variables**: "+this.freeVariables.join(","),t+="\n**gensym counter**: "+this.gensymCounter,t+="\n**provided names**: "+this.providedNames.values(),t+="\n**defined names**: "+this.definedNames.values(),t+="\n**permissions**: "+this.permissions()}}]),t}()},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=n(5),i=n(6),a={};!function(){function t(){var t=document.createElement("span");return t.appendChild(document.createTextNode("(")),t.className="lParen",t}function e(){var t=document.createElement("span");return t.appendChild(document.createTextNode(")")),t.className="rParen",t}var n=function(t,e){t.appendChild(e)},s={}.hasOwnProperty,u=0,c=function(){return u++,u},l=function(t){return"string"==typeof t?t:(t&&!t._eqHashCode&&(t._eqHashCode=c()),t&&t._eqHashCode?t._eqHashCode:0)},f=function(){this.parentMap=R()};f.prototype.find=function(t){var e=this.parentMap.containsKey(t)?this.parentMap.get(t):t;if(e===t)return e;var n=this.find(e);return this.parentMap.put(t,n),n},f.prototype.merge=function(t,e){this.parentMap.put(this.find(t),this.find(e))};var h=function(t,e,n,r,o,i,a,s,u){this.name=t,this.type=e,this.numberOfArgs=n,this.numberOfFields=r,this.firstField=o,this.constructor=i,this.predicate=a,this.accessor=s,this.mutator=u};h.prototype.toString=function(){return"#<struct-type:"+this.name+">"},h.prototype.isEqual=function(t,e){return this===t};var p=function(t,e,n,r,o,i){e||(e={type:d,numberOfArgs:0,numberOfFields:0,firstField:0});var a=e.numberOfArgs,s=function(t,e){this.init(t,e)};return Object.assign(s.prototype,e.type.prototype),s.prototype.init=function(t,s){i||(i=function(t){if(3==arguments.length)t(arguments[1]);else{var e,n=[];for(e=1;e<arguments.length-1;e++)n.push(arguments[e]);t(new et(n))}});var u=this,c=function(i){var s;s=i instanceof et?i.elts:[i];var c=s.slice(0,a);e.type.init.bind(u)(t,c);for(var l=0;n>l;l++)u._fields.push(s[l+a]);for(var l=0;r>l;l++)u._fields.push(o)};s.unshift(c),s.push(k.makeInstance(t)),i.apply(null,s)},s.prototype.type=s,new h(t,s,n+a,n+r,e.firstField+e.numberOfFields,function(){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n]);return new s(t,e)},function(t){return t instanceof s},function(t,e){return t._fields[e+this.firstField]},function(t,e,n){t._fields[e+this.firstField]=n})},d=function(t,e){this.init(t,e)};Object.assign(d.prototype,{init:function(t,e){this._constructorName=t,this._fields=[]},toWrittenString:function(t){var e,n=[];for(n.push("("),n.push(this._constructorName),e=0;e<this._fields.length;e++)n.push(" "),n.push(W(this._fields[e],t));return n.push(")"),n.join("")},toDisplayedString:function(t){return this.toWrittenString(t)},toDomNode:function(r){var o=document.createElement("div"),i=document.createElement("span");i.appendChild(document.createTextNode(this._constructorName));var a;for(o.appendChild(t()),o.appendChild(i),a=0;a<this._fields.length;a++)n(o,Y(this._fields[a],r));return o.appendChild(e()),o},isEqual:function(t,e){if(void 0==t.type||this.type!==t.type||!(t instanceof this.type))return!1;for(var n=0;n<this._fields.length;n++)if(!J(this._fields[n],t._fields[n],e))return!1;return!0}}),d.prototype.type=d;var m=function(t){this.pattern=t},g=function(t){this.pattern=t},y=function(t){this.path=t},v=function(t,e){this.bytes=t,this.mutable=void 0===e?!1:e};v.prototype.get=function(t){return this.bytes[t]},v.prototype.set=function(t,e){this.mutable&&(this.bytes[t]=e)},v.prototype.length=function(){return this.bytes.length},v.prototype.copy=function(t){return new v(this.bytes.slice(0),t)},v.prototype.subbytes=function(t,e){return(null==e||void 0==e)&&(e=this.bytes.length),new v(this.bytes.slice(t,e),!0)},v.prototype.toString=function(){for(var t="",e=0;e<this.bytes.length;e++)t+=String.fromCharCode(this.bytes[e]);return t},v.prototype.toDisplayedString=v.prototype.toString,v.prototype.toWrittenString=function(){for(var t=['#"'],e=0;e<this.bytes.length;e++)t.push(w(this.bytes[e]));return t.push('"'),t.join("")};var w=function(t){var e,n=[];switch(t){case 7:e="\\a";break;case 8:e="\\b";break;case 9:e="\\t";break;case 10:e="\\n";break;case 11:e="\\v";break;case 12:e="\\f";break;case 13:e="\\r";break;case 34:e='\\"';break;case 92:e="\\\\";break;default:val>=32&&val<=126?e=String.fromCharCode(val):n.push("\\"+val.toString(8))}return e},b=function(t,e){this.val=t,this.mutable=e};b.prototype.unbox=function(){return this.val},b.prototype.set=function(t){this.mutable&&(this.val=t)},b.prototype.toString=function(){return"#&"+this.val.toString()},b.prototype.toWrittenString=function(t){return"#&"+W(this.val,t)},b.prototype.toDisplayedString=function(t){return"#&"+G(this.val,t)},b.prototype.toDomNode=function(t){var e=document.createElement("span"),n=document.createElement("span");return n.appendChild(document.createTextNode("#&")),e.className="wescheme-box",e.appendChild(n),e.appendChild(Y(this.val,t)),e};var x={TRUE:!0,FALSE:!1};Boolean.prototype.toWrittenString=function(t){return this.valueOf()?"true":"false"},Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString,Boolean.prototype.toString=function(){return this.valueOf()?"true":"false"},Boolean.prototype.isEqual=function(t,e){return this==t};var E=function(t){this.val=t};E.makeInstance=function(t){return new E(t)},E.prototype.toString=function(){var t,e=this.val.charCodeAt(0);switch(e){case 0:t="#\\nul";break;case 8:t="#\\backspace";break;case 9:t="#\\tab";break;case 10:t="#\\newline";break;case 11:t="#\\vtab";break;case 12:t="#\\page";break;case 13:t="#\\return";break;case 20:t="#\\space";break;case 127:t="#\\rubout";break;default:if(e>=32&&126>=e)t="#\\"+this.val;else{for(var n=e.toString(16).toUpperCase();n.length<4;)n="0"+n;t="#\\u"+n}}return t},E.prototype.toWrittenString=E.prototype.toString,E.prototype.toDisplayedString=function(t){return this.val},E.prototype.getValue=function(){return this.val},E.prototype.isEqual=function(t,e){return t instanceof E&&this.val==t.val};var k=function(t){this.val=t},S={};k.makeInstance=function(t){return s.call(S,t)||(S[t]=new k(t)),S[t]},k.prototype.isEqual=function(t,e){return t instanceof k&&this.val==t.val},k.prototype.toString=function(){return this.val},k.prototype.toWrittenString=function(t){return this.val},k.prototype.toDisplayedString=function(t){return this.val},k.prototype.toDomNode=function(t){var e=document.createElement("span");return e.className="wescheme-symbol",e.style.fontFamily="monospace",e.style.whiteSpace="pre",e.appendChild(document.createTextNode("'"+this.val)),e};var M=function(t){this.val=t},C={};M.makeInstance=function(t){return s.call(C,t)||(C[t]=new M(t)),C[t]},M.prototype.isEqual=function(t,e){return t instanceof M&&this.val==t.val},M.prototype.toString=function(){return this.val},M.prototype.toWrittenString=function(t){return this.val},M.prototype.toDisplayedString=function(t){return this.val};var P=function(){};P.EMPTY=new P,P.prototype.isEqual=function(t,e){return t instanceof P},P.prototype.reverse=function(){return this},P.prototype.first=function(){throw new Error("first can't be applied on empty.")},P.prototype.rest=function(){throw new Error("rest can't be applied on empty.")},P.prototype.isEmpty=function(){return!0},P.prototype.toWrittenString=function(t){return"empty"},P.prototype.toDisplayedString=function(t){return"empty"},P.prototype.toString=function(t){return"()"},P.prototype.append=function(t){return t};var T=function(t,e){this.f=t,this.r=e};T.prototype.reverse=function(){for(var t=this,e=P.EMPTY;!t.isEmpty();)e=T.makeInstance(t.first(),e),t=t.rest();return e},T.makeInstance=function(t,e){return new T(t,e)},T.prototype.isEqual=function(t,e){return t instanceof T?J(this.first(),t.first(),e)&&J(this.rest(),t.rest(),e):x.FALSE},T.prototype.first=function(){return this.f},T.prototype.rest=function(){return this.r},T.prototype.isEmpty=function(){return!1},T.prototype.append=function(t){if(t===P.EMPTY)return this;for(var e=t,n=this.reverse();!n.isEmpty();)e=T.makeInstance(n.first(),e),n=n.rest();return e},T.prototype.toWrittenString=function(t){for(var e=["list"],n=this;n instanceof T;)e.push(W(n.first(),t)),n=n.rest();return n!==P.EMPTY?I(this,t,W):"("+e.join(" ")+")"};var I=function(t,e,n){for(var r=[],o=[];t instanceof T;)r.push("(cons "),r.push(n(t.first(),e)),r.push(" "),o.push(")"),t=t.rest();return r.push(n(t,e)),r.join("")+o.join("")};T.prototype.toString=T.prototype.toWrittenString,T.prototype.toDisplayedString=function(t){for(var e=["list"],n=this;n instanceof T;)e.push(G(n.first(),t)),n=n.rest();return n!==P.EMPTY?I(this,t,G):"("+e.join(" ")+")"},T.prototype.toDomNode=function(r){var o=document.createElement("span"),i=document.createElement("span");o.className="wescheme-cons",i.appendChild(document.createTextNode("list")),o.appendChild(t()),o.appendChild(i);for(var a=this;a instanceof T;)n(o,Y(a.first(),r)),a=a.rest();return a!==P.EMPTY?q(this,r):(o.appendChild(e()),o)};var q=function(r,o){var i=document.createElement("span"),a=i,s=document.createElement("span");for(s.appendChild(document.createTextNode("cons")),a.className="wescheme-cons";r instanceof T;){a.appendChild(t()),a.appendChild(s),n(a,Y(r.first(),o));var u=document.createElement("span");a.appendChild(u),a.appendChild(e()),a=u,r=r.rest()}return n(a,Y(r,o)),i},_=function(t,e){if(this.elts=new Array(t),e)for(var n=0;t>n;n++)this.elts[n]=e[n];else for(var n=0;t>n;n++)this.elts[n]=void 0;this.mutable=!0};_.makeInstance=function(t,e){return new _(t,e)},_.prototype.length=function(){return this.elts.length},_.prototype.ref=function(t){return this.elts[t]},_.prototype.set=function(t,e){this.elts[t]=e},_.prototype.isEqual=function(t,e){if(null!=t&&void 0!=t&&t instanceof _){if(t.length()!=this.length())return!1;for(var n=0;n<this.length();n++)if(!J(this.elts[n],t.elts[n],e))return!1;return!0}return!1},_.prototype.toList=function(){for(var t=P.EMPTY,e=this.length()-1;e>=0;e--)t=T.makeInstance(this.elts[e],t);return t},_.prototype.toWrittenString=function(t){for(var e=[],n=0;n<this.length();n++)e.push(W(this.ref(n),t));return"#("+e.join(" ")+")"},_.prototype.toDisplayedString=function(t){for(var e=[],n=0;n<this.length();n++)e.push(G(this.ref(n),t));return"#("+e.join(" ")+")"},_.prototype.toDomNode=function(t){var e=document.createElement("span"),r=document.createElement("span"),o=document.createElement("span");r.appendChild(document.createTextNode("#(")),r.className="lParen",o.appendChild(document.createTextNode(")")),o.className="rParen",e.className="wescheme-vector",e.appendChild(r);for(var i=0;i<this.length();i++)n(e,Y(this.ref(i),t));return e.appendChild(o),e};var O=function(t){this.chars=t,this.length=t.length,this.mutable=!0};O.makeInstance=function(t){return new O(t)},O.fromString=function(t){return O.makeInstance(t.split(""))},O.prototype.toString=function(){return this.chars.join("")},O.prototype.toWrittenString=function(t){return N(this.toString())},O.prototype.toDisplayedString=O.prototype.toString,O.prototype.copy=function(){return O.makeInstance(this.chars.slice(0))},O.prototype.substring=function(t,e){return(null==e||void 0==e)&&(e=this.length),O.makeInstance(this.chars.slice(t,e))},O.prototype.charAt=function(t){return this.chars[t]},O.prototype.charCodeAt=function(t){return this.chars[t].charCodeAt(0)},O.prototype.replace=function(t,e){return O.fromString(this.toString().replace(t,e))},O.prototype.isEqual=function(t,e){return t instanceof O||"string"==typeof t?this.toString()===t.toString():!1},O.prototype.set=function(t,e){this.chars[t]=e},O.prototype.toUpperCase=function(){return O.fromString(this.chars.join("").toUpperCase())},O.prototype.toLowerCase=function(){return O.fromString(this.chars.join("").toLowerCase())},O.prototype.match=function(t){return this.toString().match(t)};var N=function(t){return'"'+B(t)+'"'},B=function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);switch(r){case 7:e.push("\\a");break;case 8:e.push("\\b");break;case 9:e.push("\\t");break;case 10:e.push("\\n");break;case 11:e.push("\\v");break;case 12:e.push("\\f");break;case 13:e.push("\\r");break;case 34:e.push('\\"');break;case 92:e.push("\\\\");break;default:if(r>=32&&126>=r)e.push(t.charAt(n));else{for(var o=r.toString(16).toUpperCase();o.length<4;)o="0"+o;e.push("\\u"+o)}}}return e.join("")},R=function(){return new i(function(t){return l(t)},function(t,e){return t===e})},A=function(t){this.hash=R(),this.mutable=!0};A=A,A.prototype.toWrittenString=function(t){for(var e=this.hash.keys(),n=[],r=0;r<e.length;r++){var o=a.toWrittenString(e[r],t),i=a.toWrittenString(this.hash.get(e[r]),t);n.push("("+o+" . "+i+")")}return"#hasheq("+n.join(" ")+")"},A.prototype.toDisplayedString=function(t){for(var e=this.hash.keys(),n=[],r=0;r<e.length;r++){var o=a.toDisplayedString(e[r],t),i=a.toDisplayedString(this.hash.get(e[r]),t);n.push("("+o+" . "+i+")")}return"#hasheq("+n.join(" ")+")"},A.prototype.isEqual=function(t,e){if(!(t instanceof A))return!1;if(this.hash.keys().length!=t.hash.keys().length)return!1;for(var n=this.hash.keys(),r=0;r<n.length;r++)if(!t.hash.containsKey(n[r])||!J(this.hash.get(n[r]),t.hash.get(n[r]),e))return!1;return!0};var j=function(t){this.hash=new i(function(t){return W(t)},function(t,e){return J(t,e,new f)}),this.mutable=!0};j=j,j.prototype.toWrittenString=function(t){for(var e=this.hash.keys(),n=[],r=0;r<e.length;r++){var o=a.toWrittenString(e[r],t),i=a.toWrittenString(this.hash.get(e[r]),t);n.push("("+o+" . "+i+")")}return"#hash("+n.join(" ")+")"},j.prototype.toDisplayedString=function(t){for(var e=this.hash.keys(),n=[],r=0;r<e.length;r++){var o=a.toDisplayedString(e[r],t),i=a.toDisplayedString(this.hash.get(e[r]),t);n.push("("+o+" . "+i+")")}return"#hash("+n.join(" ")+")"},j.prototype.isEqual=function(t,e){if(!(t instanceof j))return!1;if(this.hash.keys().length!=t.hash.keys().length)return!1;for(var n=this.hash.keys(),r=0;r<n.length;r++)if(!t.hash.containsKey(n[r])||!J(this.hash.get(n[r]),t.hash.get(n[r]),e))return!1;return!0};var D=function(t,e){this.name=t,this.obj=e};D.prototype.toString=function(){return"#<js-object:"+r(this.obj)+":"+this.name+">"},D.prototype.isEqual=function(t,e){return this.obj===t.obj};var F=function(t,e,n){this.startup=t,this.shutdown=e,this.startupArgs=n,this.shutdownArg=void 0};F.prototype.toString=function(){return"#<world-config>"},F.prototype.isEqual=function(t,e){if(!J(this.startup,t.startup,e)||!J(this.shutdown,t.shutdown,e)||this.startupArgs.length!=t.startupArgs.length||!J(this.shutdownArg,t.shutdownArg,e))return!1;for(var n=0;n<args.length;n++)if(!J(this.startupArgs[n],t.startupArgs[n],e))return!1;return!0};var V=p("effect",!1,0,0,!1,!1);V.type.prototype.invokeEffect=function(t){helpers.raise(a.incompleteExn(a.exnFail,"effect type created without using make-effect-type",[]))};var L=function(t,e,n,r,o,i){e||(e=V);var a=p(t,e,n,0,!1,o),s=a.firstField+a.numberOfFields;return a.type.prototype.invokeEffect=function(t,e){var n=new wt("update-world",1,!1,!0,function(e,n){helpers.check(e,n,helpers.procArityContains(1),"update-world","procedure (arity 1)",1),t(function(t,r){interpret.call(e,n,[t],r,function(t){throw t})},function(){e.v=it})}),o=this._fields.slice(0,s);o.unshift(n),i(r,o,e)},a},U=p("render-effect",!1,0,0,!1,!1);U.type.prototype.callImplementation=function(t,e){helpers.raise(a.incompleteExn(a.exnFail,"render effect created without using make-render-effect-type",[]))};var z=function(t,e,n,r,o){e||(e=U);var i=p(t,e,n,0,!1,o),a=i.firstField+i.numberOfFields;return i.type.prototype.callImplementation=function(t,e){var n=this._fields.slice(0,a);t(r,n,e)},i},W=function(t,e){if(e||(e=R()),"object"==("undefined"==typeof t?"undefined":r(t))){if(e.containsKey(t))return"...";e.put(t,!0)}if(void 0==t||null==t)return"#<undefined>";if("string"==typeof t)return N(t.toString());if("object"!=("undefined"==typeof t?"undefined":r(t))&&"function"!=typeof t)return t.toString();var n;return n="undefined"!=typeof t.toWrittenString?t.toWrittenString(e):"undefined"!=typeof t.toDisplayedString?t.toDisplayedString(e):t.toString(),e.remove(t),n},G=function(t,e){if(e||(e=R()),"object"==("undefined"==typeof t?"undefined":r(t))){if(e.containsKey(t))return"...";e.put(t,!0)}if(void 0==t||null==t)return"#<undefined>";if("string"==typeof t)return t;if("object"!=("undefined"==typeof t?"undefined":r(t))&&"function"!=typeof t)return t.toString();var n;return n="undefined"!=typeof t.toDisplayedString?t.toDisplayedString(e):"undefined"!=typeof t.toWrittenString?t.toWrittenString(e):t.toString(),e.remove(t),n},Y=function(t,e){if(e||(e=R()),Z(t))return K(t);if("object"==("undefined"==typeof t?"undefined":r(t))){if(e.containsKey(t)){var n=document.createElement("span");return n.style["font-family"]="monospace",n.appendChild(document.createTextNode("...")),n}e.put(t,!0)}if(void 0==t||null==t){var n=document.createElement("span");return n.style["font-family"]="monospace",n.appendChild(document.createTextNode("#<undefined>")),n}if("string"==typeof t)return $(W(t));if("object"!=("undefined"==typeof t?"undefined":r(t))&&"function"!=typeof t)return $(t.toString());var o;return o=t.nodeType?t:"undefined"!=typeof t.toDomNode?t.toDomNode(e):$("undefined"!=typeof t.toWrittenString?t.toWrittenString(e):"undefined"!=typeof t.toDisplayedString?t.toDisplayedString(e):t.toString()),e.remove(t),o},$=function(t){var e,n,r=t.split("\n"),o=document.createElement("span");for(o.className="true"===t||"false"===t?"wescheme-boolean":"wescheme-string",o.style.fontFamily="monospace",o.style.whiteSpace="pre",r.length>0&&o.appendChild(document.createTextNode(r[0])),e=1;e<r.length;e++)n=document.createElement("br"),n.style.clear="left",o.appendChild(n),o.appendChild(document.createTextNode(r[e]));return o},K=function(t){var e;return o.isExact(t)?o.isInteger(t)?(e=document.createElement("span"),e.className="wescheme-number Integer",e.appendChild(document.createTextNode(t.toString())),e):o.isRational(t)?X(t):Q(t)?(e=document.createElement("span"),e.className="wescheme-number Complex",e.appendChild(document.createTextNode(t.toString())),e):(e=document.createElement("span"),e.className="wescheme-number",e.appendChild(document.createTextNode(t.toString())),e):(e=document.createElement("span"),e.className="wescheme-number",e.appendChild(document.createTextNode(t.toString())),e)},X=function(t){var e=document.createElement("span"),n=o.toRepeatingDecimal(o.numerator(t),o.denominator(t),{limit:25}),r=document.createElement("span");if(r.appendChild(document.createTextNode(n[0]+"."+n[1])),e.appendChild(r),"..."===n[2])r.appendChild(document.createTextNode(n[2]));else if("0"!==n[2]){var i=document.createElement("span");i.style.textDecoration="overline",i.appendChild(document.createTextNode(n[2])),e.appendChild(i)}var a=document.createElement("span"),s=document.createElement("sup");s.appendChild(document.createTextNode(String(o.numerator(t))));var u=document.createElement("sub");u.appendChild(document.createTextNode(String(o.denominator(t))));var c=document.createElement("span");c.appendChild(document.createTextNode("/")),a.appendChild(s),a.appendChild(c),a.appendChild(u);var l=document.createElement("span");l.appendChild(e),l.appendChild(a),a.style.display="none";var f=!0;return l.onclick=function(t){f=!f,e.style.display=f?"inline":"none",a.style.display=f?"none":"inline"},l.style.cursor="pointer",l.className="wescheme-number Rational",l},Z=o.isSchemeNumber,Q=Z,H=function(t){return"string"==typeof t||t instanceof O},J=function(t,e,n){return t===e?!0:Z(t)&&Z(e)?o.equals(t,e):H(t)&&H(e)?t.toString()===e.toString():void 0==t||null==t?void 0==e||null==e:"object"==("undefined"==typeof t?"undefined":r(t))&&"object"==("undefined"==typeof e?"undefined":r(e))&&t.isEqual&&e.isEqual?n.find(t)===n.find(e)?!0:(n.merge(t,e),t.isEqual(e,n)):!1},tt=function(t,e){this.v=t,this.isPreserved=e||!1},et=function(t){this.elts=t};et.prototype.toDomNode=function(t){var e=document.createElement("span");if(e.style.whiteSpace="pre",this.elts.length>0){e.appendChild(Y(this.elts[0],t));for(var n=1;n<this.elts.length;n++)e.appendChild(document.createTextNode("\n")),e.appendChild(Y(this.elts[n],t))}return e};var nt=function(){};nt.prototype.toString=function(){return"#<undefined>"};var rt=new nt,ot=function(){};ot.prototype.toString=function(){return"#<void>"};var it=new ot,at=function(){};at.prototype.toString=function(){return"#<eof>"};var st=new at,ut=function(t,e,n,r,o,i,a){this.name=t,this.locs=e,this.numParams=n,this.paramTypes=r,this.isRest=o,this.closureVals=i,this.body=a};ut.prototype.toString=function(){return this.name!==P.EMPTY?helpers.format("#<function:~a>",[this.name]):"#<function>"};var ct=function(t,e){this.name=t,this.closures=e};ct.prototype.toString=function(){return this.name!==P.EMPTY?helpers.format("#<case-lambda-procedure:~a>",[this.name]):"#<case-lambda-procedure>"};var lt=function(t,e){this.name=!1,this.vstack=t.slice(0),this.cstack=e.slice(0)};lt.prototype.toString=function(){return this.name!==P.EMPTY?helpers.format("#<function:~a>",[this.name]):"#<function>"};var ft=function(){this.slots=[],this.definedMask=[]};ft.prototype.addSlot=function(t){void 0===t?(this.slots.push(a.UNDEFINED),this.definedMask.push(!1)):(this.slots.push(t),t instanceof ht&&t.value===a.UNDEFINED?this.definedMask.push(!1):this.definedMask.push(!0));
},ft.prototype.ref=function(t,e){if(this.slots[t]instanceof ht){if(this.definedMask[t])return this.slots[t].value;helpers.raise(a.incompleteExn(a.exnFailContractVariable,new xt([new kt(this.slots[t].name,e),": this variable is not defined"]),[this.slots[t].name]))}else{if(this.definedMask[t])return this.slots[t];helpers.raise(a.incompleteExn(a.exnFailContractVariable,"variable has not been defined",[!1]))}},ft.prototype.set=function(t,e){this.slots[t]instanceof ht?(this.slots[t].value=e,this.definedMask[t]=!0):(this.slots[t]=e,this.definedMask[t]=!0)},ft.prototype.length=function(){return this.slots.length};var ht=function(t,e){this.name=t,this.value=e},pt=function(t,e){this.resolvedModuleName=t,this.variableName=e},dt=function(t,e){this.prefix=t,this.pos=e};dt.prototype.ref=function(){return this.prefix.ref(this.pos)},dt.prototype.set=function(t){this.prefix.set(this.pos,t)};var mt=function(t){this.dict=t||{}};mt.prototype.invoke=function(t){},mt.prototype.update=function(t,e){return this.dict[t.val]=e,this};var gt=function(t){this.dict=t};gt.prototype.toDomNode=function(t){var e=document.createElement("span");return e.appendChild(document.createTextNode("#<continuation-mark-set>")),e},gt.prototype.toWrittenString=function(t){return"#<continuation-mark-set>"},gt.prototype.toDisplayedString=function(t){return"#<continuation-mark-set>"},gt.prototype.ref=function(t){return this.dict.containsKey(t)?this.dict.get(t):[]};var yt=function(){},vt=new yt,wt=function(t,e,n,r,o){this.name=t,this.numParams=e,this.isRest=n,this.assignsToValueRegister=r,this.impl=o};wt.prototype.toString=function(){return"#<function:"+this.name+">"},wt.prototype.toWrittenString=function(t){return"#<function:"+this.name+">"},wt.prototype.toDisplayedString=function(t){return"#<function:"+this.name+">"},wt.prototype.toDomNode=function(t){var e=document.createElement("span");return e.className="wescheme-primproc",e.appendChild(document.createTextNode("#<function:"+this.name+">")),e};var bt=function(t,e){this.name=t,this.cases=e};bt.prototype.toDomNode=function(t){var e=document.createElement("span");return e.className="wescheme-caseprimitive",e.appendChild(document.createTextNode("#<function:"+this.name+">")),e},bt.prototype.toWrittenString=function(t){return"#<function:"+this.name+">"},bt.prototype.toDisplayedString=function(t){return"#<function:"+this.name+">"};var xt=function(t){this.args=t};xt.prototype.toString=function(){var t,e=[];for(t=0;t<this.args.length;t++)e.push(""+this.args[t]);return e.join("")};var Et=function(t){return t instanceof xt},kt=function(t,e){this.text=t,this.location=e},St=function(t){return t instanceof kt};kt.prototype.toString=function(){return this.text+""};var Mt=function(t){this.coloredParts=t},Ct=function(t){return t instanceof Mt};Mt.prototype.toString=function(){var t,e=[];for(t=0;t<this.coloredParts.length;t++)e.push(this.coloredParts[t].text+"");return e.join("")};var Pt=function(t,e,n){this.text=t,this.locations=e,this.solid=n},Tt=function(t){return t instanceof Pt};Pt.prototype.toString=function(){return this.text};var It=function(t){var e,n=P.EMPTY;for(e=t.length-1;e>=0;e--)n=T.makeInstance(t[e],n);return n},qt=function(t){return _.makeInstance(t.length,t)},_t=function(t){if(t instanceof O)return t;if(t instanceof Array)return O.makeInstance(t);if("string"==typeof t)return O.fromString(t);throw a.internalError("makeString expects and array of 1-character strings or a string; given "+t.toString(),!1)},Ot=function(t){for(var e=new A;!t.isEmpty();)e.hash.put(t.first().first(),t.first().rest()),t=t.rest();return e},Nt=function(t){for(var e=new j;!t.isEmpty();)e.hash.put(t.first().first(),t.first().rest()),t=t.rest();return e},Bt=qt(["<no-location>",0,0,0,0]),Rt=function(t){return t===Bt},At=p("posn",!1,2,0,!1,!1),jt=p("color",!1,4,0,!1,!1),Dt=p("arity-at-least",!1,1,0,!1,function(t,e,n){helpers.check(void 0,e,function(t){return o.isExact(t)&&o.isInteger(t)&&o.greaterThanOrEqual(t,0)},n,"exact non-negative integer",1),t(e)});a.symbol=k.makeInstance,a.rational=o.makeRational,a["float"]=o.makeFloat,a.complex=o.makeComplex,a.bignum=o.makeBignum,a.list=It,a.vector=qt,a.regexp=function(t){return new m(t)},a.byteRegexp=function(t){return new g(t)},a["char"]=E.makeInstance,a.string=_t,a.box=function(t){return new b(t,!0)},a.boxImmutable=function(t){return new b(t,!1)},a.path=function(t){return new y(t)},a.bytes=function(t,e){return new v(t,e)},a.keyword=function(t){return new M(t)},a.pair=function(t,e){return T.makeInstance(t,e)},a.hash=Nt,a.hashEq=Ot,a.jsObject=function(t,e){return new D(t,e)},a.toWrittenString=W,a.toDisplayedString=G,a.toDomNode=Y,a.posn=At.constructor,a.posnX=function(t){return At.accessor(t,0)},a.posnY=function(t){return At.accessor(t,1)},a.color=function(t,e,n,r){return void 0===r&&(r=255),jt.constructor(t,e,n,r)},a.colorRed=function(t){return jt.accessor(t,0)},a.colorGreen=function(t){return jt.accessor(t,1)},a.colorBlue=function(t){return jt.accessor(t,2)},a.colorAlpha=function(t){return jt.accessor(t,3)},a.arityAtLeast=Dt.constructor,a.arityValue=function(t){return Dt.accessor(t,0)},a.FALSE=x.FALSE,a.TRUE=x.TRUE,a.EMPTY=P.EMPTY,a.isEqual=J,a.isNumber=Z,a.isSymbol=function(t){return t instanceof k},a.isChar=function(t){return t instanceof E},a.isString=H,a.isPair=function(t){return t instanceof T},a.isVector=function(t){return t instanceof _},a.isBox=function(t){return t instanceof b},a.isHash=function(t){return t instanceof A||t instanceof j},a.isByteString=function(t){return t instanceof v},a.isStruct=function(t){return t instanceof d},a.isPosn=At.predicate,a.isArityAtLeast=Dt.predicate,a.isColor=jt.predicate,a.isFunction=function(t){return t instanceof wt||t instanceof bt||t instanceof ut||t instanceof ct||t instanceof lt},a.getProcedureType=function(t){return t instanceof wt?"PrimProc":t instanceof bt?"CasePrimitive":t instanceof ut?"ClosureValue":t instanceof ct?"CaseLambdaValue":t instanceof lt?"ContinuationClosureValue":!1},a.isJsObject=function(t){return t instanceof D},a.UnionFind=f,a.cons=T.makeInstance,a.UNDEFINED=rt,a.VOID=it,a.EOF=st,a.ValuesWrapper=et,a.ClosureValue=ut,a.ContinuationPrompt=yt,a.defaultContinuationPrompt=vt,a.ContinuationClosureValue=lt,a.CaseLambdaValue=ct,a.PrimProc=wt,a.CasePrimitive=bt,a.contMarkRecordControl=function(t){return new mt(t)},a.isContMarkRecordControl=function(t){return t instanceof mt},a.continuationMarkSet=function(t){return new gt(t)},a.isContinuationMarkSet=function(t){return t instanceof gt},a.PrefixValue=ft,a.GlobalBucket=ht,a.ModuleVariableRecord=pt,a.VariableReference=dt,a.Box=b,a.ThreadCell=tt,a.makeStructureType=p,a.isStructType=function(t){return t instanceof h},a.makeLowLevelEqHash=R;var Ft=function(t,e){this.val=t,this.contMarks=e?e:!1};a.internalError=function(t,e){return new Ft(t,e)},a.isInternalError=function(t){return t instanceof Ft};var Vt=function(t){this.val=t};a.schemeError=function(t){return new Vt(t)},a.isSchemeError=function(t){return t instanceof Vt};var Lt=function(t,e,n){this.constructor=t,this.msg=e,this.otherArgs=n};a.incompleteExn=function(t,e,n){return new Lt(t,e,n)},a.isIncompleteExn=function(t){return t instanceof Lt};var Ut=p("exn",!1,2,0,!1,function(t,e,n,r){helpers.check(void 0,n,a.isContinuationMarkSet,r,"continuation mark set",2),t(new et([e,n]))});a.exn=Ut.constructor,a.isExn=Ut.predicate,a.exnMessage=function(t){return Ut.accessor(t,0)},a.exnContMarks=function(t){return Ut.accessor(t,1)},a.exnSetContMarks=function(t,e){Ut.mutator(t,1,e)};var zt=p("exn:break",Ut,1,0,!1,function(t,e,n,r,o){t(new et([e,n,r]))});a.exnBreak=zt.constructor,a.isExnBreak=zt.predicate,a.exnBreakContinuation=function(t){return zt.accessor(t,0)};var Wt=p("exn:fail",Ut,0,0,!1,!1);a.exnFail=Wt.constructor,a.isExnFail=Wt.predicate;var Gt=p("exn:fail:contract",Wt,0,0,!1,!1);a.exnFailContract=Gt.constructor,a.isExnFailContract=Gt.predicate;var Yt=p("exn:fail:contract:arity",Gt,0,0,!1,!1);a.exnFailContractArity=Gt.constructor,a.isExnFailContractArity=Gt.predicate;var $t=p("exn:fail:contract:variable",Gt,1,0,!1,!1);a.exnFailContractVariable=Gt.constructor,a.isExnFailContractVariable=Gt.predicate,a.exnFailContractVariableId=function(t){return $t.accessor(t,0)};var Kt=p("exn:fail:contract:division-by-zero",Gt,0,0,!1,!1);a.exnFailContractDivisionByZero=Kt.constructor,a.isExnFailContractDivisionByZero=Kt.predicate;var Xt=p("exn:fail:contract:arity:position",Yt,1,0,!1,!1);a.exnFailContractArityWithPosition=Xt.constructor,a.isExnFailContractArityWithPosition=Xt.predicate,a.exnFailContractArityWithPositionLocations=function(t){return Xt.accessor(t,0)},a.worldConfig=function(t,e,n){return new F(t,e,n)},a.isWorldConfig=function(t){return t instanceof F},a.makeEffectType=L,a.isEffectType=function(t){return t instanceof h&&t.type.prototype.invokeEffect?!0:!1},a.isEffect=V.predicate,a.makeRenderEffectType=z,a.isRenderEffectType=function(t){return t instanceof h&&t.type.prototype.callImplementation?!0:!1},a.isRenderEffect=U.predicate,a.NoLocation=Bt,a.isNoLocation=Rt,a.ColoredPart=kt,a.Message=xt,a.isColoredPart=St,a.isMessage=Et,a.GradientPart=Mt,a.isGradientPart=Ct,a.MultiPart=Pt,a.isMultiPart=Tt,a.Vector=_,a.Char=E}(),t.exports=a},function(t,e,n){var o;o=e,function(){"use strict";function t(t){return new RegExp("^([+-]?["+t+"]+)/(["+t+"]+)$")}function e(t,e){var n="[+-]",r="[+-]?",o=s(t),i="["+u(t)+"]",a="["+o+"]+",c=a+"/"+a,l=r+c,f=a,h="["+o+"]*\\.["+o+"]+",p="["+o+"]+\\.["+o+"]*",d="(?:"+f+"|"+h+"|"+p+")",m="(?:inf.0|nan.0|inf.f|nan.f)",g="(?:"+d+"|"+c+")",y=g+"(?:"+i+r+a+")?",v="(?:"+y+"|"+m+")",w="(?:"+r+y+"|"+n+m+")",b=new RegExp("^("+l+")("+n+c+"?)i$"),x=new RegExp("^("+w+")?("+n+v+"?)i$"),E=new RegExp("^("+w+")@("+w+")$"),k=e.match(b),S=e.match(x),M=e.match(E);return k?k:S?S:M?M:!1}function n(t){return new RegExp("^[+-]?["+t+"]+$")}function i(t){var e="(["+t+"]*)\\.(["+t+"]+)",n="(["+t+"]+)\\.(["+t+"]*)";return new RegExp("^(?:([+-]?)("+e+"|"+n+"))$")}function a(t,e){var n="["+t+"]+",r="["+t+"]*\\.["+t+"]+",o="["+t+"]+\\.["+t+"]*";return new RegExp("^(?:([+-]?(?:"+n+"|"+r+"|"+o+"))["+e+"]([+-]?["+t+"]+))$")}function s(t){return 2===t?"01":8===t?"0-7":10===t?"0-9":16===t?"0-9a-fA-F":ve("digitsForRadix: invalid radix",this,t)}function u(t){return 2===t||8===t||10===t?"defsl":16===t?"sl":ve("expMarkForRadix: invalid radix",this,t)}function c(t){this.defaultp=function(){return 0==t},this.exactp=function(){return 1==t},this.inexactp=function(){return 2==t}}function l(t,n,r,o){var i=e(n,t);return i?rr.makeInstance(f(i[1]||"0",n,r),f("+"===i[2]?"1":"-"===i[2]?"-1":i[2],n,r)):f(t,n,r,o)}function f(e,r,o,c){var l=e.match(t(s(r)));if(l)return $n.makeInstance(f(l[1],r,o),f(l[2],r,o));if("+nan.0"===e||"-nan.0"===e)return Kn.nan;if("+inf.0"===e)return Kn.inf;if("-inf.0"===e)return Kn.neginf;if("-0.0"===e)return tr;var p=e.match(i(s(r)));if(p){var d=void 0!==p[3]?p[3]:p[5],m=void 0!==p[4]?p[4]:p[6];return h(p[1],d,m,r,o)}var g=e.match(a(s(r),u(r)));if(g){var y=f(g[1],r,o),v=f(g[2],r,o);return Ne(y,ze(r,v))}if(e.match(n(s(r)))){var w=parseInt(e,r);return Sn(w)?vr(e):o.intAsExactp()?w:Kn.makeInstance(w)}return c?(0===e.length&&ve("no digits"),void ve("bad number: "+e,this)):!1}function h(t,e,n,r,o){var t="-"==t?-1:1,i=""===e?0:o.intAsExactp()?p(e,r):parseInt(e,r),a=""===n?0:o.intAsExactp()?p(n,r):parseInt(n,r),s=o.intAsExactp()?ze(r,n.length):Math.pow(r,n.length),u=""===n?0:o.intAsExactp()?Re(a,s):a/s,c=function(t){return"number"==typeof t?Kn.makeInstance(t):t.toInexact()};return o.floatAsInexactp()?c(Ne(t,qe(i,u))):Ne(t,qe(i,u))}function p(t,e){return f(t,e,c.on,!0)}function d(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function m(){return new d(null)}function g(t,e,n,r,o,i){for(;--i>=0;){var a=e*this[t++]+n[r]+o;o=Math.floor(a/67108864),n[r++]=67108863&a}return o}function y(t,e,n,r,o,i){for(var a=32767&e,s=e>>15;--i>=0;){var u=32767&this[t],c=this[t++]>>15,l=s*u+c*a;u=a*u+((32767&l)<<15)+n[r]+(1073741823&o),o=(u>>>30)+(l>>>15)+s*c+(o>>>30),n[r++]=1073741823&u}return o}function v(t,e,n,r,o,i){for(var a=16383&e,s=e>>14;--i>=0;){var u=16383&this[t],c=this[t++]>>14,l=s*u+c*a;u=a*u+((16383&l)<<14)+n[r]+o,o=(u>>28)+(l>>14)+s*c,n[r++]=268435455&u}return o}function w(t){return dr.charAt(t)}function b(t,e){var n=mr[t.charCodeAt(e)];return null==n?-1:n}function x(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function E(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function k(t){var e=m();return e.fromInt(t),e}function S(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,o=!1,i=0;--r>=0;){var a=8==n?255&t[r]:b(t,r);0>a?"-"==t.charAt(r)&&(o=!0):(o=!1,0==i?this[this.t++]=a:i+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-i)-1)<<i,this[this.t++]=a>>this.DB-i):this[this.t-1]|=a<<i,i+=n,i>=this.DB&&(i-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),o&&d.ZERO.subTo(this,this)}function M(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function C(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,o=!1,i=[],a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(o=!0,i.push(w(n)));a>=0;)e>s?(n=(this[a]&(1<<s)-1)<<e-s,n|=this[--a]>>(s+=this.DB-e)):(n=this[a]>>(s-=e)&r,0>=s&&(s+=this.DB,--a)),n>0&&(o=!0),o&&i.push(w(n));return o?i.join(""):"0"}function P(){var t=m();return d.ZERO.subTo(this,t),t}function T(){return this.s<0?this.negate():this}function I(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=this.s<0?t.t-n:n-t.t,0!=e)return e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function q(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function _(){return this.t<=0?0:this.DB*(this.t-1)+q(this[this.t-1]^this.s&this.DM)}function O(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function N(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function B(t,e){var n,r=t%this.DB,o=this.DB-r,i=(1<<o)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+a+1]=this[n]>>o|s,s=(this[n]&i)<<r;for(n=a-1;n>=0;--n)e[n]=0;e[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function R(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var r=t%this.DB,o=this.DB-r,i=(1<<r)-1;e[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)e[a-n-1]|=(this[a]&i)<<o,e[a-n]=this[a]>>r;r>0&&(e[this.t-n-1]|=(this.s&i)<<o),e.t=this.t-n,e.clamp()}function A(t,e){for(var n=0,r=0,o=Math.min(t.t,this.t);o>n;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=0>r?-1:0,-1>r?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function j(t,e){var n=this.abs(),r=t.abs(),o=n.t;for(e.t=o+r.t;--o>=0;)e[o]=0;for(o=0;o<r.t;++o)e[o+n.t]=n.am(0,r[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&d.ZERO.subTo(e,e)}function D(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function F(t,e,n){var r=t.abs();if(!(r.t<=0)){var o=this.abs();if(o.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=m());var i=m(),a=this.s,s=t.s,u=this.DB-q(r[r.t-1]);u>0?(r.lShiftTo(u,i),o.lShiftTo(u,n)):(r.copyTo(i),o.copyTo(n));var c=i.t,l=i[c-1];if(0!=l){var f=l*(1<<this.F1)+(c>1?i[c-2]>>this.F2:0),h=this.FV/f,p=(1<<this.F1)/f,g=1<<this.F2,y=n.t,v=y-c,w=null==e?m():e;for(i.dlShiftTo(v,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),d.ONE.dlShiftTo(c,w),w.subTo(i,i);i.t<c;)i[i.t++]=0;for(;--v>=0;){var b=n[--y]==l?this.DM:Math.floor(n[y]*h+(n[y-1]+g)*p);if((n[y]+=i.am(0,b,n,v,0,c))<b)for(i.dlShiftTo(v,w),n.subTo(w,n);n[y]<--b;)n.subTo(w,n)}null!=e&&(n.drShiftTo(c,e),a!=s&&d.ZERO.subTo(e,e)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),0>a&&d.ZERO.subTo(n,n)}}}function V(t){var e=m();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(d.ZERO)>0&&t.subTo(e,e),e}function L(t){this.m=t}function U(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function z(t){return t}function W(t){t.divRemTo(this.m,null,t)}function G(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Y(t,e){t.squareTo(e),this.reduce(e)}function $(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function K(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function X(t){var e=m();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(d.ZERO)>0&&this.m.subTo(e,e),e}function Z(t){var e=m();return t.copyTo(e),this.reduce(e),e}function Q(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function H(t,e){t.squareTo(e),this.reduce(e)}function J(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function tt(){return 0==(this.t>0?1&this[0]:this.s)}function et(t,e){if(t>4294967295||1>t)return d.ONE;var n=m(),r=m(),o=e.convert(this),i=q(t)-1;for(o.copyTo(n);--i>=0;)if(e.sqrTo(n,r),(t&1<<i)>0)e.mulTo(r,o,n);else{var a=n;n=r,r=a}return e.revert(n)}function nt(t,e){var n;return n=256>t||e.isEven()?new L(e):new K(e),this.exp(t,n)}function rt(){var t=m();return this.copyTo(t),t}function ot(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function it(){return 0==this.t?this.s:this[0]<<24>>24}function at(){return 0==this.t?this.s:this[0]<<16>>16}function st(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function ut(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function ct(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=k(n),o=m(),i=m(),a="";for(this.divRemTo(r,o,i);o.signum()>0;)a=(n+i.intValue()).toString(t).substr(1)+a,o.divRemTo(r,o,i);return i.intValue().toString(t)+a}function lt(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),o=!1,i=0,a=0,s=0;s<t.length;++s){var u=b(t,s);0>u?"-"==t.charAt(s)&&0==this.signum()&&(o=!0):(a=e*a+u,++i>=n&&(this.dMultiply(r),this.dAddOffset(a,0),i=0,a=0))}i>0&&(this.dMultiply(Math.pow(e,i)),this.dAddOffset(a,0)),o&&d.ZERO.subTo(this,this)}function ft(t,e,n){if("number"==typeof e)if(2>t)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(d.ONE.shiftLeft(t-1),wt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(d.ONE.shiftLeft(t-1),this);else{var r=[],o=7&t;r.length=(t>>3)+1,e.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}}function ht(){var t=this.t,e=[];e[0]=this.s;var n,r=this.DB-t*this.DB%8,o=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[o++]=n|this.s<<this.DB-r);t>=0;)8>r?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,0>=r&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==o&&(128&this.s)!=(128&n)&&++o,(o>0||n!=this.s)&&(e[o++]=n);return e}function pt(t){return 0==this.compareTo(t)}function dt(t){return this.compareTo(t)<0?this:t}function mt(t){return this.compareTo(t)>0?this:t}function gt(t,e,n){var r,o,i=Math.min(t.t,this.t);for(r=0;i>r;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(o=t.s&this.DM,r=i;r<this.t;++r)n[r]=e(this[r],o);n.t=this.t}else{for(o=this.s&this.DM,r=i;r<t.t;++r)n[r]=e(o,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function yt(t,e){return t&e}function vt(t){var e=m();return this.bitwiseTo(t,yt,e),e}function wt(t,e){return t|e}function bt(t){var e=m();return this.bitwiseTo(t,wt,e),e}function xt(t,e){return t^e}function Et(t){var e=m();return this.bitwiseTo(t,xt,e),e}function kt(t,e){return t&~e}function St(t){var e=m();return this.bitwiseTo(t,kt,e),e}function Mt(){for(var t=m(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function Ct(t){var e=m();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Pt(t){var e=m();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Tt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function It(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+Tt(this[t]);return this.s<0?this.t*this.DB:-1}function qt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function _t(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=qt(this[n]^e);return t}function Ot(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Nt(t,e){var n=d.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function Bt(t){return this.changeBit(t,wt)}function Rt(t){return this.changeBit(t,kt)}function At(t){return this.changeBit(t,xt)}function jt(t,e){for(var n=0,r=0,o=Math.min(t.t,this.t);o>n;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=0>r?-1:0,r>0?e[n++]=r:-1>r&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function Dt(t){var e=m();return this.addTo(t,e),e}function Ft(t){var e=m();return this.subTo(t,e),e}function Vt(t){var e=m();return this.multiplyTo(t,e),e}function Lt(t){var e=m();return this.divRemTo(t,e,null),e}function Ut(t){var e=m();return this.divRemTo(t,null,e),e}function zt(t){var e=m(),n=m();return this.divRemTo(t,e,n),[e,n]}function Wt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Gt(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Yt(){}function $t(t){return t}function Kt(t,e,n){t.multiplyTo(e,n)}function Xt(t,e){t.squareTo(e)}function Zt(t){return this.bnpExp(t,new Yt)}function Qt(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;var o;for(o=n.t-this.t;o>r;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(o=Math.min(t.t,e);o>r;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()}function Ht(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Jt(t){this.r2=m(),this.q3=m(),d.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function te(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=m();return t.copyTo(e),this.reduce(e),e}function ee(t){return t}function ne(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function re(t,e){t.squareTo(e),this.reduce(e)}function oe(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function ie(t,e){var n,r,o=t.bitLength(),i=k(1);if(0>=o)return i;n=18>o?1:48>o?3:144>o?4:768>o?5:6,r=8>o?new L(e):e.isEven()?new Jt(e):new K(e);var a=[],s=3,u=n-1,c=(1<<n)-1;if(a[1]=r.convert(this),n>1){var l=m();for(r.sqrTo(a[1],l);c>=s;)a[s]=m(),r.mulTo(l,a[s-2],a[s]),s+=2}var f,h,p=t.t-1,d=!0,g=m();for(o=q(t[p])-1;p>=0;){for(o>=u?f=t[p]>>o-u&c:(f=(t[p]&(1<<o+1)-1)<<u-o,p>0&&(f|=t[p-1]>>this.DB+o-u)),s=n;0==(1&f);)f>>=1,--s;if((o-=s)<0&&(o+=this.DB,--p),d)a[f].copyTo(i),d=!1;else{for(;s>1;)r.sqrTo(i,g),r.sqrTo(g,i),s-=2;s>0?r.sqrTo(i,g):(h=i,i=g,g=h),r.mulTo(g,a[f],i)}for(;p>=0&&0==(t[p]&1<<o);)r.sqrTo(i,g),h=i,i=g,g=h,--o<0&&(o=this.DB-1,--p)}return r.revert(i)}function ae(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var o=e.getLowestSetBit(),i=n.getLowestSetBit();if(0>i)return e;for(i>o&&(i=o),i>0&&(e.rShiftTo(i,e),n.rShiftTo(i,n));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return i>0&&n.lShiftTo(i,n),n}function se(t){if(0>=t)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function ue(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return d.ZERO;for(var n=t.clone(),r=this.clone(),o=k(1),i=k(0),a=k(0),s=k(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(t,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(t,i),i.rShiftTo(1,i);for(;r.isEven();)r.rShiftTo(1,r),e?(a.isEven()&&s.isEven()||(a.addTo(this,a),s.subTo(t,s)),a.rShiftTo(1,a)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);n.compareTo(r)>=0?(n.subTo(r,n),e&&o.subTo(a,o),i.subTo(s,i)):(r.subTo(n,r),e&&a.subTo(o,a),s.subTo(i,s))}return 0!=r.compareTo(d.ONE)?d.ZERO:s.compareTo(t)>=0?s.subtract(t):s.signum()<0?(s.addTo(t,s),s.signum()<0?s.add(t):s):s}function ce(t){var e,n=this.abs();if(1==n.t&&n[0]<=gr[gr.length-1]){for(e=0;e<gr.length;++e)if(n[0]==gr[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<gr.length;){for(var r=gr[e],o=e+1;o<gr.length&&yr>r;)r*=gr[o++];for(r=n.modInt(r);o>e;)if(r%gr[e++]==0)return!1}return n.millerRabin(t)}function le(t){var e=this.subtract(d.ONE),n=e.getLowestSetBit();if(0>=n)return!1;var r=e.shiftRight(n);t=t+1>>1,t>gr.length&&(t=gr.length);for(var o=m(),i=0;t>i;++i){o.fromInt(gr[i]);var a=o.modPow(r,this);if(0!=a.compareTo(d.ONE)&&0!=a.compareTo(e)){for(var s=1;s++<n&&0!=a.compareTo(e);)if(a=a.modPowInt(2,this),0==a.compareTo(d.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0}function fe(t){return function(){var e=this.toInexact();return e[t].apply(e,arguments)}}var he=o,pe=function(t,e,n){return n=n||{},function(r,o){return n.isXSpecialCase&&n.isXSpecialCase(r)?n.onXSpecialCase(r,o):n.isYSpecialCase&&n.isYSpecialCase(o)?n.onYSpecialCase(r,o):"number"==typeof r&&"number"==typeof o?t(r,o):("number"==typeof r&&(r=ye(r,o)),"number"==typeof o&&(o=ye(o,r)),r.level<o.level&&(r=r.liftTo(o)),o.level<r.level&&(o=o.liftTo(r)),e(r,o))}},de=function(t){if(isNaN(t)||!isFinite(t))return Kn.makeInstance(t);var e=Math.floor(t);return e===t?Sn(e)?vr(me(t+"")):e:Kn.makeInstance(t)},me=function(t){var e,n,r=t.match(a(s(10),u(10)));return r?(e=r[1].match(/^([^.]*)(.*)$/),n=Number(r[2]),0===e[2].length?e[1]+ge(n):n>=e[2].length-1?e[1]+e[2].substring(1)+ge(n-(e[2].length-1)):e[1]+e[2].substring(1,1+n)):t},ge=function(t){var e=[];e.length=t;for(var n=0;t>n;n++)e[n]="0";return e.join("")},ye=function(t,e){switch(e.level){case 0:return vr(t);case 1:return new $n(t,1);case 2:return new Kn(t);case 3:return new rr(t,0);default:ve("IMPOSSIBLE: cannot lift fixnum integer to "+e.toString(),t,e)}},ve=function(t,e,n){he.onThrowRuntimeError(t,e,n)},we=function(t,e,n){throw new Error(t)},be=function(t){return"number"==typeof t||t instanceof $n||t instanceof Kn||t instanceof rr||t instanceof d},xe=function(t){return"number"==typeof t||be(t)&&t.isRational()},Ee=function(t){return"number"==typeof t||be(t)&&t.isReal()},ke=function(t){return"number"==typeof t||be(t)&&t.isExact()},Se=function(t){return"number"==typeof t?!1:be(t)&&t.isInexact()},Me=function(t){return"number"==typeof t||be(t)&&t.isInteger()},Ce=function(t){return"number"==typeof t||be(t)&&t.isInteger()&&t.isExact()},Pe=function(t){return"number"==typeof t?t:t.toFixnum()},Te=function(t){return"number"==typeof t?t:t.toExact()},Ie=function(t){return"number"==typeof t?Kn.makeInstance(t):t.toInexact()},qe=function(t,e){var n;return"number"==typeof t&&"number"==typeof e&&(n=t+e,Sn(n))?vr(t).add(vr(e)):t instanceof Kn&&e instanceof Kn?t.add(e):_e(t,e)},_e=pe(function(t,e){var n=t+e;return Sn(n)?vr(t).add(vr(e)):n},function(t,e){return t.add(e)},{isXSpecialCase:function(t){return Ce(t)&&Nn(t)},onXSpecialCase:function(t,e){return e},isYSpecialCase:function(t){return Ce(t)&&Nn(t)},onYSpecialCase:function(t,e){return t}}),Oe=pe(function(t,e){var n=t-e;return Sn(n)?vr(t).subtract(vr(e)):n},function(t,e){return t.subtract(e)},{isXSpecialCase:function(t){return Ce(t)&&Nn(t)},onXSpecialCase:function(t,e){return Mn(e)},isYSpecialCase:function(t){return Ce(t)&&Nn(t)},onYSpecialCase:function(t,e){return t}}),Ne=function(t,e){var n;return"number"==typeof t&&"number"==typeof e?(n=t*e,Sn(n)?vr(t).multiply(vr(e)):n):t instanceof Kn&&e instanceof Kn?t.multiply(e):Be(t,e)},Be=pe(function(t,e){var n=t*e;return Sn(n)?vr(t).multiply(vr(e)):n},function(t,e){return t.multiply(e)},{isXSpecialCase:function(t){return Ce(t)&&(Nn(t)||Bn(t)||Rn(t))},onXSpecialCase:function(t,e){return Nn(t)?0:Bn(t)?e:Rn(t)?Mn(e):void 0},isYSpecialCase:function(t){return Ce(t)&&(Nn(t)||Bn(t)||Rn(t))},onYSpecialCase:function(t,e){return Nn(e)?0:Bn(e)?t:Rn(e)?Mn(t):void 0}}),Re=pe(function(t,e){Nn(e)&&ve("/: division by zero",t,e);var n=t/e;return Sn(n)?vr(t).divide(vr(e)):Math.floor(n)!==n?$n.makeInstance(t,e):n},function(t,e){return t.divide(e)},{isXSpecialCase:function(t){return je(t,0)},onXSpecialCase:function(t,e){return je(e,0)&&ve("/: division by zero",t,e),0},isYSpecialCase:function(t){return je(t,0)},onYSpecialCase:function(t,e){ve("/: division by zero",t,e)}}),Ae=pe(function(t,e){return t===e},function(t,e){return t.equals(e)}),je=function(t,e){if(t===e)return!0;if("number"==typeof t&&"number"==typeof e)return t===e;if(t===tr||e===tr)return t===e;if(t instanceof rr||e instanceof rr)return je(ln(t),ln(e))&&je(cn(t),cn(e));var n=ke(t),r=ke(e);return(n&&r||!n&&!r)&&Ae(t,e)},De=function(t,e,n){return Ue(Xe(Oe(t,e)),n)},Fe=pe(function(t,e){return t>=e},function(t,e){return Ee(t)&&Ee(e)||ve(">=: couldn't be applied to complex number",t,e),t.greaterThanOrEqual(e)}),Ve=pe(function(t,e){return e>=t},function(t,e){return Ee(t)&&Ee(e)||ve("<=: couldn't be applied to complex number",t,e),t.lessThanOrEqual(e)}),Le=pe(function(t,e){return t>e},function(t,e){return Ee(t)&&Ee(e)||ve(">: couldn't be applied to complex number",t,e),t.greaterThan(e)}),Ue=pe(function(t,e){return e>t},function(t,e){return Ee(t)&&Ee(e)||ve("<: couldn't be applied to complex number",t,e),t.lessThan(e)}),ze=function(){var t=pe(function(t,e){var n=Math.pow(t,e);return Sn(n)?vr(t).expt(vr(e)):n},function(t,e){return Ae(e,0)?qe(e,1):t.expt(e)});return function(e,n){return Ae(n,0)?qe(n,1):Ee(n)&&Ue(n,0)?t(Re(1,e),Mn(n)):t(e,n)}}(),We=function(t){return je(t,0)?1:"number"==typeof t?Kn.makeInstance(Math.exp(t)):t.exp()},Ge=function(t,e){Me(t)||ve("modulo: the first argument "+t+" is not an integer.",t,e),Me(e)||ve("modulo: the second argument "+e+" is not an integer.",t,e);var n;return"number"==typeof t?(n=t%e,0>e?0>=n?n:n+e:0>n?n+e:n):(n=_n(Ze(t),Ze(e)),Ue(e,0)?Ve(n,0)?n:qe(n,e):Ue(n,0)?qe(n,e):n)},Ye=function(t){return"number"==typeof t?t:t.numerator()},$e=function(t){return"number"==typeof t?1:t.denominator()},Ke=function(t){if("number"==typeof t){if(t>=0){var e=Math.sqrt(t);return Math.floor(e)===e?e:Kn.makeInstance(e)}return rr.makeInstance(0,Ke(-t))}return t.sqrt()},Xe=function(t){return"number"==typeof t?Math.abs(t):t.abs()},Ze=function(t){return"number"==typeof t?t:t.floor()},Qe=function(t){return"number"==typeof t?t:t.ceiling()},He=function(t){return"number"==typeof t?t:t.conjugate()},Je=function(t){return"number"==typeof t?Math.abs(t):t.magnitude()},tn=function(t){return je(t,1)?0:"number"==typeof t?Kn.makeInstance(Math.log(t)):t.log();
},en=function(t){return"number"==typeof t?t>0?0:Kn.pi:t.angle()},nn=function(t){return je(t,0)?0:"number"==typeof t?Kn.makeInstance(Math.tan(t)):t.tan()},rn=function(t){return je(t,0)?0:"number"==typeof t?Kn.makeInstance(Math.atan(t)):t.atan()},on=function(t){return je(t,0)?1:"number"==typeof t?Kn.makeInstance(Math.cos(t)):t.cos()},an=function(t){return je(t,0)?0:"number"==typeof t?Kn.makeInstance(Math.sin(t)):t.sin()},sn=function(t){return je(t,1)?0:"number"==typeof t?Kn.makeInstance(Math.acos(t)):t.acos()},un=function(t){return je(t,0)?0:"number"==typeof t?Kn.makeInstance(Math.asin(t)):t.asin()},cn=function(t){return"number"==typeof t?0:t.imaginaryPart()},ln=function(t){return"number"==typeof t?t:t.realPart()},fn=function(t){return"number"==typeof t?t:t.round()},hn=function(t){return Ne(t,t)},pn=function(t){return Me(t)||ve("integer-sqrt: the argument "+t.toString()+" is not an integer.",t),"number"==typeof t?0>t?rr.makeInstance(0,Math.floor(Math.sqrt(-t))):Math.floor(Math.sqrt(t)):t.integerSqrt()},dn=function(t,e){Me(t)||ve("gcd: the argument "+t.toString()+" is not an integer.",t);for(var n,r,o=Xe(t),i=0;i<e.length;i++)for(r=Xe(e[i]),Me(r)||ve("gcd: the argument "+r.toString()+" is not an integer.",r);!Nn(r);)n=o,o=r,r=_n(n,r);return o},mn=function(t,e){Me(t)||ve("lcm: the argument "+t.toString()+" is not an integer.",t);var n=Xe(t);if(Nn(n))return 0;for(var r=0;r<e.length;r++){Me(e[r])||ve("lcm: the argument "+e[r].toString()+" is not an integer.",e[r]);var o=On(n,e[r]);if(Nn(o))return 0;n=Re(Ne(n,e[r]),o)}return n},gn=function(t,e){return Me(t)||ve("quotient: the first argument "+t.toString()+" is not an integer.",t),Me(e)||ve("quotient: the second argument "+e.toString()+" is not an integer.",e),Fn(t,e)},yn=function(t,e){return Me(t)||ve("remainder: the first argument "+t.toString()+" is not an integer.",t),Me(e)||ve("remainder: the second argument "+e.toString()+" is not an integer.",e),Vn(t,e)},vn=function(t){return je(t,0)?Kn.makeInstance(1):Re(qe(We(t),We(Mn(t))),2)},wn=function(t){return Re(Oe(We(t),We(Mn(t))),2)},bn=function(t,e){return je(e,0)?t:rr.makeInstance(Ne(t,on(e)),Ne(t,an(e)))},xn=function(t){return"number"==typeof t?isFinite(t):t.isFinite()},En=-9e15,kn=9e15,Sn=function(t){return En>t||t>kn},Mn=function(t){return"number"==typeof t?-t:t.negate()},Cn=function(t){return Re(t,2)},Pn=function(t){return Ne(t,or)},Tn=function(t,e){for(var n=1;;){if(Nn(e))return n;Ae(Ge(e,2),0)?(t=Ne(t,t),e=Re(e,2)):(n=Ne(n,t),e=Oe(e,1))}},In=function(t,e,n){return n=n||{},function(r,o){if(r instanceof $n?r=Ye(r):r instanceof rr&&(r=ln(r)),o instanceof $n?o=Ye(o):o instanceof rr&&(o=ln(o)),"number"==typeof r&&"number"==typeof o){var i=t(r,o);if(!Sn(i)||n.ignoreOverflow)return i}return r instanceof Kn||o instanceof Kn?n.doNotCoerseToFloating?t(Pe(r),Pe(o)):Kn.makeInstance(t(Pe(r),Pe(o))):("number"==typeof r&&(r=vr(r)),"number"==typeof o&&(o=vr(o)),e(r,o))}},qn=function(t,e,n){return n=n||{},function(r){if(r instanceof $n?r=Ye(r):r instanceof rr&&(r=ln(r)),"number"==typeof r){var o=t(r);if(!Sn(o)||n.ignoreOverflow)return o}return r instanceof Kn?t(Pe(r)):("number"==typeof r&&(r=vr(r)),e(r))}},_n=In(function(t,e){return t%e},function(t,e){return V.call(t,e)}),On=In(function(t,e){for(var n;0!==e;)n=t,t=e,e=n%e;return t},function(t,e){return ae.call(t,e)}),Nn=qn(function(t){return 0===t},function(t){return pt.call(t,d.ZERO)}),Bn=qn(function(t){return 1===t},function(t){return pt.call(t,d.ONE)}),Rn=qn(function(t){return-1===t},function(t){return pt.call(t,d.NEGATIVE_ONE)}),An=In(function(t,e){return t+e},function(t,e){return Dt.call(t,e)}),jn=In(function(t,e){return t-e},function(t,e){return Ft.call(t,e)}),Dn=In(function(t,e){return t*e},function(t,e){return Vt.call(t,e)}),Fn=In(function(t,e){return(t-t%e)/e},function(t,e){return Lt.call(t,e)}),Vn=In(function(t,e){return t%e},function(t,e){return Ut.call(t,e)}),Ln=In(function(t,e){return t/e},function(t,e){return Pe(t)/Pe(e)},{ignoreOverflow:!0,doNotCoerseToFloating:!0}),Un=In(function(t,e){return t===e},function(t,e){return pt.call(t,e)},{doNotCoerseToFloating:!0}),zn=In(function(t,e){return t>e},function(t,e){return I.call(t,e)>0},{doNotCoerseToFloating:!0}),Wn=In(function(t,e){return e>t},function(t,e){return I.call(t,e)<0},{doNotCoerseToFloating:!0}),Gn=In(function(t,e){return t>=e},function(t,e){return I.call(t,e)>=0},{doNotCoerseToFloating:!0}),Yn=In(function(t,e){return e>=t},function(t,e){return I.call(t,e)<=0},{doNotCoerseToFloating:!0}),$n=function(t,e){this.n=t,this.d=e};$n.prototype.toString=function(){return Bn(this.d)?this.n.toString()+"":this.n.toString()+"/"+this.d.toString()},$n.prototype.level=1,$n.prototype.liftTo=function(t){return 2===t.level?new Kn(Ln(this.n,this.d)):3===t.level?new rr(this,0):ve("invalid level of Number",this,t)},$n.prototype.isFinite=function(){return!0},$n.prototype.equals=function(t){return t instanceof $n&&Un(this.n,t.n)&&Un(this.d,t.d)},$n.prototype.isInteger=function(){return Bn(this.d)},$n.prototype.isRational=function(){return!0},$n.prototype.isReal=function(){return!0},$n.prototype.add=function(t){return $n.makeInstance(An(Dn(this.n,t.d),Dn(this.d,t.n)),Dn(this.d,t.d))},$n.prototype.subtract=function(t){return $n.makeInstance(jn(Dn(this.n,t.d),Dn(this.d,t.n)),Dn(this.d,t.d))},$n.prototype.negate=function(){return $n.makeInstance(-this.n,this.d)},$n.prototype.multiply=function(t){return $n.makeInstance(Dn(this.n,t.n),Dn(this.d,t.d))},$n.prototype.divide=function(t){return(Nn(this.d)||Nn(t.n))&&ve("/: division by zero",this,t),$n.makeInstance(Dn(this.n,t.d),Dn(this.d,t.n))},$n.prototype.toExact=function(){return this},$n.prototype.toInexact=function(){return Kn.makeInstance(this.toFixnum())},$n.prototype.isExact=function(){return!0},$n.prototype.isInexact=function(){return!1},$n.prototype.toFixnum=function(){return Ln(this.n,this.d)},$n.prototype.numerator=function(){return this.n},$n.prototype.denominator=function(){return this.d},$n.prototype.greaterThan=function(t){return zn(Dn(this.n,t.d),Dn(this.d,t.n))},$n.prototype.greaterThanOrEqual=function(t){return Gn(Dn(this.n,t.d),Dn(this.d,t.n))},$n.prototype.lessThan=function(t){return Wn(Dn(this.n,t.d),Dn(this.d,t.n))},$n.prototype.lessThanOrEqual=function(t){return Yn(Dn(this.n,t.d),Dn(this.d,t.n))},$n.prototype.integerSqrt=function(){var t=Ke(this);return xe(t)?Te(Ze(t)):Ee(t)?Te(Ze(t)):rr.makeInstance(Te(Ze(ln(t))),Te(Ze(cn(t))))},$n.prototype.sqrt=function(){if(Gn(this.n,0)){var t=Ke(this.n),e=Ke(this.d);return Ae(Ze(t),t)&&Ae(Ze(e),e)?$n.makeInstance(t,e):Kn.makeInstance(Ln(t,e))}var t=Ke(Mn(this.n)),e=Ke(this.d);return Ae(Ze(t),t)&&Ae(Ze(e),e)?rr.makeInstance(0,$n.makeInstance(t,e)):rr.makeInstance(0,Kn.makeInstance(Ln(t,e)))},$n.prototype.abs=function(){return $n.makeInstance(Xe(this.n),this.d)},$n.prototype.floor=function(){var t=Fn(this.n,this.d);return Wn(this.n,0)?Oe(t,1):t},$n.prototype.ceiling=function(){var t=Fn(this.n,this.d);return Wn(this.n,0)?t:qe(t,1)},$n.prototype.conjugate=function(){return this},$n.prototype.magnitude=$n.prototype.abs,$n.prototype.log=function(){return Kn.makeInstance(Math.log(this.n/this.d))},$n.prototype.angle=function(){return Nn(this.n)?0:zn(this.n,0)?0:Kn.pi},$n.prototype.tan=function(){return Kn.makeInstance(Math.tan(Ln(this.n,this.d)))},$n.prototype.atan=function(){return Kn.makeInstance(Math.atan(Ln(this.n,this.d)))},$n.prototype.cos=function(){return Kn.makeInstance(Math.cos(Ln(this.n,this.d)))},$n.prototype.sin=function(){return Kn.makeInstance(Math.sin(Ln(this.n,this.d)))},$n.prototype.expt=function(t){return Ce(t)&&Fe(t,0)?Tn(this,t):Kn.makeInstance(Math.pow(Ln(this.n,this.d),Ln(t.n,t.d)))},$n.prototype.exp=function(){return Kn.makeInstance(Math.exp(Ln(this.n,this.d)))},$n.prototype.acos=function(){return Kn.makeInstance(Math.acos(Ln(this.n,this.d)))},$n.prototype.asin=function(){return Kn.makeInstance(Math.asin(Ln(this.n,this.d)))},$n.prototype.imaginaryPart=function(){return 0},$n.prototype.realPart=function(){return this},$n.prototype.round=function(){var t=Ae(this.d,2),e=Wn(this.n,0),n=this.n;e&&(n=Mn(n));var r=Fn(n,this.d);if(t)r=qe(r,1);else{var o=Vn(n,this.d);Le(Ne(o,2),this.d)&&(r=qe(r,1))}return e&&(r=Mn(r)),r},$n.makeInstance=function(t,e){void 0===t&&ve("n undefined",t,e),void 0===e&&(e=1),Nn(e)&&ve("division by zero: "+t+"/"+e),Wn(e,0)&&(t=Mn(t),e=Mn(e));var n=On(Xe(t),Xe(e));return t=Fn(t,n),e=Fn(e,n),Bn(e)||Nn(t)?t:new $n(t,e)};var Kn=function(t){this.n=t};Kn=Kn;var Xn=new Kn(Number.NaN),Zn=new Kn(Number.POSITIVE_INFINITY),Qn=new Kn(Number.NEGATIVE_INFINITY),Hn=new Kn(Number.POSITIVE_INFINITY),Jn=new Kn(Number.NEGATIVE_INFINITY),tr=new Kn(-0),er=new Kn(0);Kn.pi=new Kn(Math.PI),Kn.e=new Kn(Math.E),Kn.nan=Xn,Kn.inf=Zn,Kn.neginf=Qn,Kn.makeInstance=function(t){return isNaN(t)?Kn.nan:t===Number.POSITIVE_INFINITY?Kn.inf:t===Number.NEGATIVE_INFINITY?Kn.neginf:0===t?1/t===-(1/0)?tr:er:new Kn(t)},Kn.prototype.isExact=function(){return!1},Kn.prototype.isInexact=function(){return!0},Kn.prototype.isFinite=function(){return isFinite(this.n)||this===Hn||this===Jn},Kn.prototype.toExact=function(){(!isFinite(this.n)||isNaN(this.n))&&ve("toExact: no exact representation for "+this,this);var t=this.n.toString(),e=t.match(/^(.*)\.(.*)$/);if(e){var n=(parseInt(e[1]),parseInt(e[2]),Math.pow(10,e[2].length));return $n.makeInstance(Math.round(this.n*n),n)}return this.n},Kn.prototype.toInexact=function(){return this},Kn.prototype.isInexact=function(){return!0},Kn.prototype.level=2,Kn.prototype.liftTo=function(t){return 3===t.level?new rr(this,0):ve("invalid level of Number",this,t)},Kn.prototype.toString=function(){if(isNaN(this.n))return"+nan.0";if(this.n===Number.POSITIVE_INFINITY)return"+inf.0";if(this.n===Number.NEGATIVE_INFINITY)return"-inf.0";if(this===tr)return"-0.0";var t=this.n.toString();return t.match("\\.")?t:t+".0"},Kn.prototype.equals=function(t,e){return t instanceof Kn&&this.n===t.n},Kn.prototype.isRational=function(){return this.isFinite()},Kn.prototype.isInteger=function(){return this.isFinite()&&this.n===Math.floor(this.n)},Kn.prototype.isReal=function(){return!0};var nr=function(t){return Ue(t,0)?-1:Le(t,0)?1:t===tr?-1:0};Kn.prototype.add=function(t){return this.isFinite()&&t.isFinite()?Kn.makeInstance(this.n+t.n):isNaN(this.n)||isNaN(t.n)?Xn:this.isFinite()&&!t.isFinite()?t:!this.isFinite()&&t.isFinite()?this:nr(this)*nr(t)===1?this:Xn},Kn.prototype.subtract=function(t){return this.isFinite()&&t.isFinite()?Kn.makeInstance(this.n-t.n):isNaN(this.n)||isNaN(t.n)?Xn:this.isFinite()||t.isFinite()?this.isFinite()?Ne(t,-1):this:nr(this)===nr(t)?Xn:this},Kn.prototype.negate=function(){return Kn.makeInstance(-this.n)},Kn.prototype.multiply=function(t){return Kn.makeInstance(this.n*t.n)},Kn.prototype.divide=function(t){return Kn.makeInstance(this.n/t.n)},Kn.prototype.toFixnum=function(){return this.n},Kn.prototype.numerator=function(){var t=this.n.toString(),e=t.match(/^(.*)\.(.*)$/);if(e){var n=parseInt(e[2]),r=Math.pow(10,e[2].length),o=On(r,n),i=r/o;return Kn.makeInstance(Math.round(this.n*i))}return this},Kn.prototype.denominator=function(){var t=this.n.toString(),e=t.match(/^(.*)\.(.*)$/);if(e){var n=parseInt(e[2]),r=Math.pow(10,e[2].length),o=On(r,n);return Kn.makeInstance(Math.round(r/o))}return Kn.makeInstance(1)},Kn.prototype.floor=function(){return Kn.makeInstance(Math.floor(this.n))},Kn.prototype.ceiling=function(){return Kn.makeInstance(Math.ceil(this.n))},Kn.prototype.greaterThan=function(t){return this.n>t.n},Kn.prototype.greaterThanOrEqual=function(t){return this.n>=t.n},Kn.prototype.lessThan=function(t){return this.n<t.n},Kn.prototype.lessThanOrEqual=function(t){return this.n<=t.n},Kn.prototype.integerSqrt=function(){return this===tr?this:Me(this)?this.n>=0?Kn.makeInstance(Math.floor(Math.sqrt(this.n))):rr.makeInstance(er,Kn.makeInstance(Math.floor(Math.sqrt(-this.n)))):void ve("integerSqrt: can only be applied to an integer",this)},Kn.prototype.sqrt=function(){if(this.n<0){var t=rr.makeInstance(0,Kn.makeInstance(Math.sqrt(-this.n)));return t}return Kn.makeInstance(Math.sqrt(this.n))},Kn.prototype.abs=function(){return Kn.makeInstance(Math.abs(this.n))},Kn.prototype.log=function(){return this.n<0?new rr(this,0).log():Kn.makeInstance(Math.log(this.n))},Kn.prototype.angle=function(){return 0===this.n?0:this.n>0?0:Kn.pi},Kn.prototype.tan=function(){return Kn.makeInstance(Math.tan(this.n))},Kn.prototype.atan=function(){return Kn.makeInstance(Math.atan(this.n))},Kn.prototype.cos=function(){return Kn.makeInstance(Math.cos(this.n))},Kn.prototype.sin=function(){return Kn.makeInstance(Math.sin(this.n))},Kn.prototype.expt=function(t){return 1===this.n?t.isFinite()?this:isNaN(t.n)?this:this:Kn.makeInstance(Math.pow(this.n,t.n))},Kn.prototype.exp=function(){return Kn.makeInstance(Math.exp(this.n))},Kn.prototype.acos=function(){return Kn.makeInstance(Math.acos(this.n))},Kn.prototype.asin=function(){return Kn.makeInstance(Math.asin(this.n))},Kn.prototype.imaginaryPart=function(){return 0},Kn.prototype.realPart=function(){return this},Kn.prototype.round=function(){return isFinite(this.n)?this===tr?this:.5===Math.abs(Math.floor(this.n)-this.n)?Math.floor(this.n)%2===0?Kn.makeInstance(Math.floor(this.n)):Kn.makeInstance(Math.ceil(this.n)):Kn.makeInstance(Math.round(this.n)):this},Kn.prototype.conjugate=function(){return this},Kn.prototype.magnitude=Kn.prototype.abs;var rr=function(t,e){this.r=t,this.i=e};rr.makeInstance=function(t,e){return void 0===e&&(e=0),ke(e)&&Me(e)&&Nn(e)?t:((Se(t)||Se(e))&&(t=Ie(t),e=Ie(e)),new rr(t,e))},rr.prototype.toString=function(){var t=this.r.toString(),e=this.i.toString();return"-"===e[0]||"+"===e[0]?t+e+"i":t+"+"+e+"i"},rr.prototype.isFinite=function(){return xn(this.r)&&xn(this.i)},rr.prototype.isRational=function(){return xe(this.r)&&je(this.i,0)},rr.prototype.isInteger=function(){return Me(this.r)&&je(this.i,0)},rr.prototype.toExact=function(){return rr.makeInstance(Te(this.r),Te(this.i))},rr.prototype.toInexact=function(){return rr.makeInstance(Ie(this.r),Ie(this.i))},rr.prototype.isExact=function(){return ke(this.r)&&ke(this.i)},rr.prototype.isInexact=function(){return Se(this.r)||Se(this.i)},rr.prototype.level=3,rr.prototype.liftTo=function(t){ve("Don't know how to lift Complex number",this,t)},rr.prototype.equals=function(t){var e=t instanceof rr&&Ae(this.r,t.r)&&Ae(this.i,t.i);return e},rr.prototype.greaterThan=function(t){return this.isReal()&&t.isReal()||ve(">: expects argument of type real number",this,t),Le(this.r,t.r)},rr.prototype.greaterThanOrEqual=function(t){return this.isReal()&&t.isReal()||ve(">=: expects argument of type real number",this,t),Fe(this.r,t.r)},rr.prototype.lessThan=function(t){return this.isReal()&&t.isReal()||ve("<: expects argument of type real number",this,t),Ue(this.r,t.r)},rr.prototype.lessThanOrEqual=function(t){return this.isReal()&&t.isReal()||ve("<=: expects argument of type real number",this,t),Ve(this.r,t.r)},rr.prototype.abs=function(){return Ae(this.i,0).valueOf()||ve("abs: expects argument of type real number",this),Xe(this.r)},rr.prototype.toFixnum=function(){return Ae(this.i,0).valueOf()||ve("toFixnum: expects argument of type real number",this),Pe(this.r)},rr.prototype.numerator=function(){return this.isReal()||ve("numerator: can only be applied to real number",this),Ye(this.n)},rr.prototype.denominator=function(){return this.isReal()||ve("floor: can only be applied to real number",this),$e(this.n)},rr.prototype.add=function(t){return rr.makeInstance(qe(this.r,t.r),qe(this.i,t.i))},rr.prototype.subtract=function(t){return rr.makeInstance(Oe(this.r,t.r),Oe(this.i,t.i))},rr.prototype.negate=function(){return rr.makeInstance(Mn(this.r),Mn(this.i))},rr.prototype.multiply=function(t){if(t.isReal())return rr.makeInstance(Ne(this.r,t.r),Ne(this.i,t.r));var e=Oe(Ne(this.r,t.r),Ne(this.i,t.i)),n=qe(Ne(this.r,t.i),Ne(this.i,t.r));return rr.makeInstance(e,n)},rr.prototype.divide=function(t){var e,n,r,o,i,a,s;if(t.isReal())return rr.makeInstance(Re(this.r,t.r),Re(this.i,t.r));if(this.isInexact()||t.isInexact())return e=this.r,n=this.i,r=t.r,o=t.i,Ve(Xe(o),Xe(r))?(i=Re(o,r),a=Re(qe(e,Ne(n,i)),qe(r,Ne(o,i))),s=Re(Oe(n,Ne(e,i)),qe(r,Ne(o,i)))):(i=Re(r,o),a=Re(qe(Ne(e,i),n),qe(Ne(r,i),o)),s=Re(Oe(Ne(n,i),e),qe(Ne(r,i),o))),rr.makeInstance(a,s);var u=He(t),c=Ne(this,u),l=ln(Ne(t,u)),f=rr.makeInstance(Re(ln(c),l),Re(cn(c),l));return f},rr.prototype.conjugate=function(){var t=rr.makeInstance(this.r,Oe(0,this.i));return t},rr.prototype.magnitude=function(){var t=qe(Ne(this.r,this.r),Ne(this.i,this.i));return Ke(t)},rr.prototype.isReal=function(){return je(this.i,0)},rr.prototype.integerSqrt=function(){return Me(this)?pn(this.r):void ve("integerSqrt: can only be applied to an integer",this)},rr.prototype.sqrt=function(){if(this.isReal())return Ke(this.r);var t=qe(this.magnitude(),this.r),e=Ke(Cn(t)),n=Re(this.i,Ke(Ne(t,2)));return rr.makeInstance(e,n)},rr.prototype.log=function(){var t=this.magnitude(),e=this.angle(),n=qe(tn(t),Pn(e));return n},rr.prototype.angle=function(){if(this.isReal())return en(this.r);if(Ae(0,this.r)){var t=Cn(Kn.pi);return Le(this.i,0)?t:Mn(t)}var t=rn(Re(Xe(this.i),Xe(this.r)));return Le(this.r,0)?Le(this.i,0)?t:Mn(t):Le(this.i,0)?Oe(Kn.pi,t):Oe(t,Kn.pi)};var or=rr.makeInstance(0,1),ir=rr.makeInstance(0,-1);rr.prototype.tan=function(){return Re(this.sin(),this.cos())},rr.prototype.atan=function(){return Ae(this,or)||Ae(this,ir)?Qn:Ne(or,Ne(Kn.makeInstance(.5),tn(Re(qe(or,this),qe(or,Oe(0,this))))))},rr.prototype.cos=function(){if(this.isReal())return on(this.r);var t=Pn(this),e=Mn(t);return Cn(qe(We(t),We(e)))},rr.prototype.sin=function(){if(this.isReal())return an(this.r);var t=Pn(this),e=Mn(t),n=rr.makeInstance(0,2),r=Oe(We(t),We(e)),o=Re(r,n);return o},rr.prototype.expt=function(t){if(Ce(t)&&Fe(t,0))return Tn(this,t);var e=Ne(t,this.log());return We(e)},rr.prototype.exp=function(){var t=We(this.r),e=on(this.i),n=an(this.i);return Ne(t,qe(e,Pn(n)))},rr.prototype.acos=function(){if(this.isReal())return sn(this.r);var t=Cn(Kn.pi),e=Pn(this),n=Ke(Oe(1,hn(this))),r=Pn(tn(qe(e,n)));return qe(t,r)},rr.prototype.asin=function(){if(this.isReal())return un(this.r);var t=Oe(1,hn(this)),e=Ke(t);return Ne(2,rn(Re(this,qe(1,e))))},rr.prototype.ceiling=function(){return this.isReal()||ve("ceiling: can only be applied to real number",this),Qe(this.r)},rr.prototype.floor=function(){return this.isReal()||ve("floor: can only be applied to real number",this),Ze(this.r)},rr.prototype.imaginaryPart=function(){return this.i},rr.prototype.realPart=function(){return this.r},rr.prototype.round=function(){return this.isReal()||ve("round: can only be applied to real number",this),fn(this.r)};var ar=new RegExp("^(#[ei]#[bodx]|#[bodx]#[ei]|#[bodxei])(.*)$");c.def=new c(0),c.on=new c(1),c.off=new c(2),c.prototype.intAsExactp=function(){return this.defaultp()||this.exactp()},c.prototype.floatAsInexactp=function(){return this.defaultp()||this.inexactp()};var sr,ur=function(t,e){var n=10,e="undefined"==typeof e?c.def:e===!0?c.on:e===!1?c.off:ve("exactness must be true or false",this,r),o=t.toLowerCase().match(ar);if(o){var i=o[1].toLowerCase(),a=i.match(new RegExp("(#[ei])")),s=i.match(new RegExp("(#[bodx])"));if(a){var u=a[1].charAt(1);e="e"===u?c.on:"i"===u?c.off:ve("invalid exactness flag",this,r)}if(s){var u=s[1].charAt(1);n="b"===u?2:"o"===u?8:"d"===u?10:"x"===u?16:ve("invalid radix flag",this,r)}}var f=o?o[2]:t,h=o?!0:!1;return l(f,n,e,h)},cr=0xdeadbeefcafe,lr=15715070==(16777215&cr);lr&&"undefined"!=typeof navigator&&"Microsoft Internet Explorer"==navigator.appName?(d.prototype.am=y,sr=30):lr&&"undefined"!=typeof navigator&&"Netscape"!=navigator.appName?(d.prototype.am=g,sr=26):(d.prototype.am=v,sr=28),d.prototype.DB=sr,d.prototype.DM=(1<<sr)-1,d.prototype.DV=1<<sr;var fr=52;d.prototype.FV=Math.pow(2,fr),d.prototype.F1=fr-sr,d.prototype.F2=2*sr-fr;var hr,pr,dr="0123456789abcdefghijklmnopqrstuvwxyz",mr=[];for(hr="0".charCodeAt(0),pr=0;9>=pr;++pr)mr[hr++]=pr;for(hr="a".charCodeAt(0),pr=10;36>pr;++pr)mr[hr++]=pr;for(hr="A".charCodeAt(0),pr=10;36>pr;++pr)mr[hr++]=pr;L.prototype.convert=U,L.prototype.revert=z,L.prototype.reduce=W,L.prototype.mulTo=G,L.prototype.sqrTo=Y,K.prototype.convert=X,K.prototype.revert=Z,K.prototype.reduce=Q,K.prototype.mulTo=J,K.prototype.sqrTo=H,d.prototype.copyTo=x,d.prototype.fromInt=E,d.prototype.fromString=S,d.prototype.clamp=M,d.prototype.dlShiftTo=O,d.prototype.drShiftTo=N,d.prototype.lShiftTo=B,d.prototype.rShiftTo=R,d.prototype.subTo=A,d.prototype.multiplyTo=j,d.prototype.squareTo=D,d.prototype.divRemTo=F,d.prototype.invDigit=$,d.prototype.isEven=tt,d.prototype.bnpExp=et,d.prototype.toString=C,d.prototype.negate=P,d.prototype.abs=T,d.prototype.compareTo=I,d.prototype.bitLength=_,d.prototype.mod=V,d.prototype.modPowInt=nt,d.ZERO=k(0),d.ONE=k(1),Yt.prototype.convert=$t,Yt.prototype.revert=$t,Yt.prototype.mulTo=Kt,Yt.prototype.sqrTo=Xt,Jt.prototype.convert=te,Jt.prototype.revert=ee,Jt.prototype.reduce=ne,Jt.prototype.mulTo=oe,Jt.prototype.sqrTo=re;var gr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],yr=(1<<26)/gr[gr.length-1];d.prototype.chunkSize=st,d.prototype.toRadix=ct,d.prototype.fromRadix=lt,d.prototype.fromNumber=ft,d.prototype.bitwiseTo=gt,d.prototype.changeBit=Nt,d.prototype.addTo=jt,d.prototype.dMultiply=Wt,d.prototype.dAddOffset=Gt,d.prototype.multiplyLowerTo=Qt,d.prototype.multiplyUpperTo=Ht,d.prototype.modInt=se,d.prototype.millerRabin=le,d.prototype.clone=rt,d.prototype.intValue=ot,d.prototype.byteValue=it,d.prototype.shortValue=at,d.prototype.signum=ut,d.prototype.toByteArray=ht,d.prototype.equals=pt,d.prototype.min=dt,d.prototype.max=mt,d.prototype.and=vt,d.prototype.or=bt,d.prototype.xor=Et,d.prototype.andNot=St,d.prototype.not=Mt,d.prototype.shiftLeft=Ct,d.prototype.shiftRight=Pt,d.prototype.getLowestSetBit=It,d.prototype.bitCount=_t,d.prototype.testBit=Ot,d.prototype.setBit=Bt,d.prototype.clearBit=Rt,d.prototype.flipBit=At,d.prototype.add=Dt,d.prototype.subtract=Ft,d.prototype.multiply=Vt,d.prototype.divide=Lt,d.prototype.remainder=Ut,d.prototype.divideAndRemainder=zt,d.prototype.modPow=ie,d.prototype.modInverse=ue,d.prototype.pow=Zt,d.prototype.expt=Zt,d.prototype.gcd=ae,d.prototype.isProbablePrime=ce,d.NEGATIVE_ONE=d.ONE.negate();var vr=function(t){return"number"==typeof t&&(t+=""),t=me(t),new d(t,10)};d.prototype.level=0,d.prototype.liftTo=function(t){if(1===t.level)return new $n(this,1);if(2===t.level){var e=this.toFixnum();return e===Number.POSITIVE_INFINITY?Hn:e===Number.NEGATIVE_INFINITY?Jn:new Kn(e)}return 3===t.level?new rr(this,0):ve("invalid level for BigInteger lift",this,t)},d.prototype.isFinite=function(){return!0},d.prototype.isInteger=function(){return!0},d.prototype.isRational=function(){return!0},d.prototype.isReal=function(){return!0},d.prototype.isExact=function(){return!0},d.prototype.isInexact=function(){return!1},d.prototype.toExact=function(){return this},d.prototype.toInexact=function(){return Kn.makeInstance(this.toFixnum())},d.prototype.toFixnum=function(){var t,e=0,n=this.toString();if("-"===n[0]){for(t=1;t<n.length;t++)e=10*e+Number(n[t]);return-e}for(t=0;t<n.length;t++)e=10*e+Number(n[t]);return e},d.prototype.greaterThan=function(t){return this.compareTo(t)>0},d.prototype.greaterThanOrEqual=function(t){return this.compareTo(t)>=0},d.prototype.lessThan=function(t){return this.compareTo(t)<0},d.prototype.lessThanOrEqual=function(t){return this.compareTo(t)<=0},d.prototype.divide=function(t){var e=zt.call(this,t);if(0===e[1].compareTo(d.ZERO))return e[0];var n=qe(e[0],$n.makeInstance(e[1],t));return n},d.prototype.numerator=function(){return this},d.prototype.denominator=function(){return 1},function(){var t=function(t,e){for(;!Ve(hn(e),t)||!Ue(t,hn(qe(e,1)));)e=Ze(Re(qe(e,Ze(Re(t,e))),2));return e};d.prototype.integerSqrt=function(){var e;return nr(this)>=0?t(this,this):(e=this.negate(),rr.makeInstance(0,t(e,e)))}}(),function(){d.prototype.sqrt=function(){var t,e=this.integerSqrt();return je(hn(e),this)?e:(t=Pe(this),isFinite(t)?t>=0?Kn.makeInstance(Math.sqrt(t)):rr.makeInstance(0,Kn.makeInstance(Math.sqrt(-t))):e)}}(),d.prototype.floor=function(){return this},d.prototype.ceiling=function(){return this},d.prototype.conjugate=fe("conjugate"),d.prototype.magnitude=fe("magnitude"),d.prototype.log=fe("log"),d.prototype.angle=fe("angle"),d.prototype.atan=fe("atan"),d.prototype.acos=fe("acos"),d.prototype.asin=fe("asin"),d.prototype.tan=fe("tan"),d.prototype.cos=fe("cos"),d.prototype.sin=fe("sin"),d.prototype.exp=fe("exp"),d.prototype.imaginaryPart=function(){return 0},d.prototype.realPart=function(){return this},d.prototype.round=function(){return this};var wr=function(){var t=function(t,e,n){var r=[],o={};for(o[t]=!0;;){if(n--<=0)return[r.join(""),"..."];var i=gn(Ne(t,10),e),a=yn(Ne(t,10),e);if(r.push(i.toString()),o[a]){t=a;break}o[a]=!0,t=a}for(var s=t,u=[];;){var i=gn(Ne(t,10),e),a=yn(Ne(t,10),e);if(u.push(i.toString()),Ae(a,s))break;t=a}for(var c=r.join(""),l=u.join("");c.length>=l.length&&c.substring(c.length-l.length)===l;)c=c.substring(0,c.length-l.length);return[c,l]};return function(e,n,r){var o=512;r&&"undefined"!=typeof r.limit&&(o=r.limit),Me(e)||ve("toRepeatingDecimal: n "+e.toString()+" is not an integer."),Me(n)||ve("toRepeatingDecimal: d "+n.toString()+" is not an integer."),Ae(n,0)&&ve("toRepeatingDecimal: d equals 0"),Ue(n,0)&&ve("toRepeatingDecimal: d < 0");var i=Ue(e,0)?"-":"";e=Xe(e);var a=i+gn(e,n),s=t(yn(e,n),n,o);return[a].concat(s)}}();he.fromFixnum=de,he.fromString=ur,he.makeBignum=vr,he.makeRational=$n.makeInstance,he.makeFloat=Kn.makeInstance,he.makeComplex=rr.makeInstance,he.makeComplexPolar=bn,he.pi=Kn.pi,he.e=Kn.e,he.nan=Kn.nan,he.negative_inf=Kn.neginf,he.inf=Kn.inf,he.negative_one=-1,he.zero=0,he.one=1,he.i=or,he.negative_i=ir,he.negative_zero=tr,he.onThrowRuntimeError=we,he.isSchemeNumber=be,he.isRational=xe,he.isReal=Ee,he.isExact=ke,he.isInexact=Se,he.isInteger=Me,he.toFixnum=Pe,he.toExact=Te,he.toInexact=Ie,he.add=qe,he.subtract=Oe,he.multiply=Ne,he.divide=Re,he.equals=Ae,he.eqv=je,he.approxEquals=De,he.greaterThanOrEqual=Fe,he.lessThanOrEqual=Ve,he.greaterThan=Le,he.lessThan=Ue,he.expt=ze,he.exp=We,he.modulo=Ge,he.numerator=Ye,he.denominator=$e,he.integerSqrt=pn,he.sqrt=Ke,he.abs=Xe,he.quotient=gn,he.remainder=yn,he.floor=Ze,he.ceiling=Qe,he.conjugate=He,he.magnitude=Je,he.log=tn,he.angle=en,he.tan=nn,he.atan=rn,he.cos=on,he.sin=an,he.tan=nn,he.acos=sn,he.asin=un,he.cosh=vn,he.sinh=wn,he.imaginaryPart=cn,he.realPart=ln,he.round=fn,he.sqr=hn,he.gcd=dn,he.lcm=mn,he.toRepeatingDecimal=wr,he.BigInteger=d,he.Rational=$n,he.FloatPoint=Kn,he.Complex=rr,he.MIN_FIXNUM=En,he.MAX_FIXNUM=kn}()},function(t,e){"use strict";var n=function(){function t(t){return"undefined"==typeof t}function e(t){return"function"==typeof t}function n(t){return"string"==typeof t}function r(t,n){return e(t[n])}function o(t){return r(t,"equals")}function i(t){return r(t,"hashCode")}function a(t){if(n(t))return t;if(i(t)){var e=t.hashCode();return n(e)?e:a(e)}return r(t,"toString")?t.toString():String(t)}function s(t,e){return t.equals(e)}function u(t,e){return o(e)?e.equals(t):t===e}function c(t,e){return t===e}function l(t,e,n,r,o){for(var i,a=0,s=t.length;s>a;a++)if(i=t[a],o(e,n(i)))return r?[a,i]:!0;return!1}function f(t,e){if(r(t,"splice"))t.splice(e,1);else if(e===t.length-1)t.length=e;else{var n=t.slice(e+1);t.length=e;for(var o=0,i=n.length;i>o;o++)t[e+o]=n[o]}}function h(e,n){if(null===e)throw new Error("null is not a valid "+n);if(t(e))throw new Error(n+" must not be undefined")}function p(t){h(t,k)}function d(t){h(t,S)}function m(t,e,n){this.entries=[],this.addEntry(t,e),null!==n&&(this.getEqualityFunction=function(){return n})}function g(t){return t[0]}function y(t){return t[1]}function v(){}function w(t){return t[0]}function b(t,e,n){return l(t,e,w,!0,n)}function x(t,e){var n=t[e];return n&&n instanceof v?n[1]:null}function E(t,n){var r=[],o={};t=e(t)?t:a,n=e(n)?n:null,this.put=function(e,i){p(e),d(i);var a=t(e),s=x(o,a);if(s){var u=s.getEntryForKey(e);u?u[1]=i:s.addEntry(e,i)}else{var c=new v;c[0]=a,c[1]=new m(e,i,n),r[r.length]=c,o[a]=c}},this.get=function(e){p(e);var n=t(e),r=x(o,n);if(r){var i=r.getEntryForKey(e);if(i)return i[1]}return null},this.containsKey=function(e){p(e);var n=t(e),r=x(o,n);return r?r.containsKey(e):!1},this.containsValue=function(t){d(t);for(var e=0,n=r.length;n>e;e++)if(r[e][1].containsValue(t))return!0;return!1},this.clear=function(){r.length=0,o={}},this.isEmpty=function(){return 0===r.length},this.keys=function(){for(var t=[],e=0,n=r.length;n>e;e++)r[e][1].keys(t);return t},this.values=function(){for(var t=[],e=0,n=r.length;n>e;e++)r[e][1].values(t);return t},this.remove=function(e){p(e);var n=t(e),i=x(o,n);if(i&&i.removeEntryForKey(e)&&0===i.size()){var a=b(r,n,i.getEqualityFunction(e));f(r,a[0]),delete o[n]}},this.size=function(){for(var t=0,e=0,n=r.length;n>e;e++)t+=r[e][1].size();return t}}var k="key",S="value";return m.prototype={getEqualityFunction:function(t){return o(t)?s:u},searchForEntry:function(t){return l(this.entries,t,g,!0,this.getEqualityFunction(t))},getEntryForKey:function(t){return this.searchForEntry(t)[1]},getEntryIndexForKey:function(t){return this.searchForEntry(t)[0]},removeEntryForKey:function(t){var e=this.searchForEntry(t);return e?(f(this.entries,e[0]),!0):!1},addEntry:function(t,e){this.entries[this.entries.length]=[t,e]},size:function(){return this.entries.length},keys:function(t){for(var e=t.length,n=0,r=this.entries.length;r>n;n++)t[e+n]=this.entries[n][0]},values:function(t){for(var e=t.length,n=0,r=this.entries.length;r>n;n++)t[e+n]=this.entries[n][1]},containsKey:function(t){return l(this.entries,t,g,!1,this.getEqualityFunction(t))},containsValue:function(t){return l(this.entries,t,y,!1,c)}},v.prototype=[],E}();t.exports=n},function(t,e,n){"use strict";var r=n(3),o=n(8);!function(){function t(t){return function(e){return e[3]=e[3]||[],e[4]=e[4]||!1,e[5]=e[5]||!1,new r.functionBinding(e[0],t,e[1],e[2],e[3],e[4],e[5])}}function e(t){return new r.moduleBinding("world",t,s.bindings.concat(a.bindings,["key=?","play-sound","animate","big-bang","make-color","color?","color-red","color-green","color-blue","color-alpha","empty-scene","empty-image","scene+line","put-image","place-image","place-image/align","put-pinhole","circle","star","polygon","radial-star","star-polygon","nw:rectangle","rectangle","regular-polygon","rhombus","square","triangle","triangle/sas","triangle/sss","triangle/ass","triangle/ssa","triangle/aas","triangle/asa","triangle/saa","right-triangle","isosceles-triangle","ellipse","line","add-line","overlay","overlay/xy","overlay/align","underlay","underlay/xy","underlay/align","beside","beside/align","above","above/align","rotate","scale","scale/xy","crop","frame","flip-horizontal","flip-vertical","text","text/font","video-url","video/url","bitmap/url","image-url","open-image-url","image?","image=?","image-width","image-height","mouse-event?","mouse=?","image->color-list","color-list->image","color-list->bitmap","image-baseline","mode?","image-color?","name->color","x-place?","y-place?","angle?","side-count?","step-count?"].map(function(t){var e=["video/url","bitmap/url","image-url","open-image-url"],n=e.indexOf(t)>-1?["android.permission.INTERNET"]:[];return new r.constantBinding(t,'"moby/world"',n,!1)})))}var n=new r.moduleBinding("moby/runtime/kernel/misc","moby/runtime/kernel/misc",[["verify-boolean-branch-value",2],["throw-cond-exhausted-error",1],["'check-operator-is-function",3],["print-values",0]].map(t('"moby/runtime/kernel/misc"'))),i=new r.moduleBinding("moby/foreign","moby/foreign",[["get-js-object",2,!1,["android.permission.FOREIGN-FUNCTION-INTERFACE"]]].map(t('"moby/foreign"'))),a=new r.moduleBinding("world-effects","moby/world-effects",[["make-effect:none",0,!1],["make-effect:beep",0,!1,["android.permission.VIBRATE"]],["make-effect:play-dtmf-tone",2,!1],["make-effect:send-sms",2,!1,["android.permission.SEND-SMS"]],["make-effect:play-sound",1,!1,["android.permission.INTERNET"]],["make-effect:stop-sound",1,!1],["make-effect:pause-sound",1,!1],["make-effect:set-sound-volume",1,!1],["make-effect:set-beep-volume",1,!1],["make-effect:raise-sound-volume",0,!1],["make-effect:lower-sound-volume",1,!1],["make-effect:set-wake-lock",1,!1,["android.permission.WAKE-LOCK"]],["make-effect:release-wake-lock",1,!1,["android.permission.WAKE-LOCK"]],["make-effect:pick-playlist",1,!1],["make-effect:pick-random",2,!1]].map(t('"moby/world-effects"'))),s=new r.moduleBinding("world-config","moby/world-handlers",[["on-tick",1,!0],["initial-effect",1,!1],["on-key",1,!1],["on-key!",2,!1],["on-mouse",1,!1],["on-tap",1,!1],["on-tilt",1,!1],["on-redraw",1,!1],["to-draw",1,!1],["on-draw",2,!1],["stop-when",1,!1]].map(t('"moby/world-handlers"'))),u=[["START",14,!1],["test-frame",1,!1],["sine",1,!1],["cosine",1,!1],["tangent",1,!1]],c=new r.moduleBinding("bootstrap/bootstrap-teachpack","bootstrap/bootstrap-teachpack",u.map(t('"bootstrap/bootstrap-teachpack"'))),l=new r.moduleBinding("bootstrap2011/bootstrap-teachpack","bootstrap2011/bootstrap-teachpack",u.map(t('"bootstrap2011/bootstrap-teachpack"'))),f=new r.moduleBinding("bootstrap2012/bootstrap-teachpack","bootstrap2012/bootstrap-teachpack",u.map(t('"bootstrap2012/bootstrap-teachpack"'))),h=new r.moduleBinding("bootstrap2012/bootstrap-tilt-teachpack","bootstrap2012/bootstrap-tilt-teachpack",u.map(t('"bootstrap2012/bootstrap-tilt-teachpack"'))),p=new r.moduleBinding("bootstrap2014/bootstrap-teachpack","bootstrap2014/bootstrap-teachpack",u.map(t('"bootstrap2014/bootstrap-teachpack"'))),d=new r.moduleBinding("bootstrap2014/bootstrap-tilt-teachpack","bootstrap2014/bootstrap-tilt-teachpack",u.map(t('"bootstrap2014/bootstrap-tilt-teachpack"'))),m=new r.moduleBinding("bootstrap2015/bootstrap-teachpack","bootstrap2015/bootstrap-teachpack",u.map(t('"bootstrap2015/bootstrap-teachpack"'))),g=new r.moduleBinding("bootstrap2015/bootstrap-tilt-teachpack","bootstrap2015/bootstrap-tilt-teachpack",u.map(t('"bootstrap2015/bootstrap-tilt-teachpack"'))),y=new r.moduleBinding("bootstrap/cage-teachpack","bootstrap/cage-teachpack",[["start",1,!1]].map(t('"bootstrap/cage-teachpack"'))),v=new r.moduleBinding("bootstrap2011/cage-teachpack","bootstrap2011/cage-teachpack",[["start",1,!1]].map(t('"bootstrap2011/cage-teachpack"'))),w=new r.moduleBinding("bootstrap2012/cage-teachpack","bootstrap2012/cage-teachpack",[["start",1,!1]].map(t('"bootstrap2012/cage-teachpack"'))),b=new r.moduleBinding("bootstrap2014/cage-teachpack","bootstrap2014/cage-teachpack",[["start",1,!1]].map(t('"bootstrap2014/cage-teachpack"'))),x=new r.moduleBinding("bootstrap/function-teachpack","bootstrap/function-teachpack",[["start",1,!1]].map(t('"bootstrap/function-teachpack"'))),E=new r.moduleBinding("bootstrap2011/function-teachpack","bootstrap2011/function-teachpack",[["start",1,!1]].map(t('"bootstrap2011/function-teachpack"'))),k=new r.moduleBinding("bootstrap2012/function-teachpack","bootstrap2012/function-teachpack",[["start",1,!1]].map(t('"bootstrap2012/function-teachpack"'))),S=new r.moduleBinding("bootstrap2014/function-teachpack","bootstrap2014/function-teachpack",[["start",1,!1]].map(t('"bootstrap2014/function-teachpack"'))),M=new r.moduleBinding("bootstrap2015/function-teachpack","bootstrap2015/function-teachpack",[["start",1,!1]].map(t('"bootstrap2015/function-teachpack"'))),C=new r.moduleBinding("location","moby/geolocation",[["get-latitude",0,!1,["android.permission.LOCATION"]],["get-longitude",0,!1,["android.permission.LOCATION"]],["get-altitude",0,!1,["android.permission.LOCATION"]],["get-bearing",0,!1,["android.permission.LOCATION"]],["get-speed",0,!1,["android.permission.LOCATION"]],["location-distance",0,!1,["android.permission.LOCATION"]]].map(t('"moby/geolocation"'))),P=new r.moduleBinding("tilt","moby/tilt",[["get-x-acceleration",0,!1,["android.permission.TILT"]],["get-y-acceleration",0,!1,["android.permission.TILT"]],["get-z-acceleration",0,!1,["android.permission.TILT"]],["get-azimuth",0,!1,["android.permission.TILT"]],["get-pitch",0,!1,["android.permission.TILT"]],["get-roll",0,!1,["android.permission.TILT"]]].map(t('"moby/tilt"'))),T=new r.moduleBinding("telephony","moby/telephony",[["get-signal-strength",0,!1,["android.permission.TELEPHONY"]]].map(t('"moby/telephony"'))),I=new r.moduleBinding("net","moby/net",[["get-url",1,!1,["android.permission.INTERNET"]]].map(t('"moby/net"'))),q=new r.moduleBinding("parser","moby/parser",[["xml->s-sexp",1,!1]].map(t('"moby/parser"'))),_=new r.moduleBinding("jsworld","moby/parser",[["js-big-bang",1,!1],["big-bang",1,!1],["js-div",0,!1],["js-p",0,!1],["js-button",2,!1],["js-button!",2,!1],["js-node",1,!1],["js-text",1,!1],["js-select",2,!1],["js-img",1,!1,["android.permission.INTERNET"]]].map(t('"moby/jsworld"'))),O=e("moby/world"),N=e("moby/world"),B=new r.moduleBinding("moby/topLevel","moby/topLevel",[["<",2,!0],["<=",2,!0],["=",2,!0],[">",2,!0],[">=",2,!0],["=~",3],["number->string",1],["even?",1],["odd?",1],["positive?",1],["negative?",1],["number?",1],["rational?",1],["quotient",2],["remainder",2],["numerator",1],["denominator",1],["integer?",1],["real?",1],["abs",1],["acos",1],["add1",1],["angle",1],["asin",1],["atan",1,!0],["ceiling",1],["complex?",1],["conjugate",1],["cos",1],["cosh",1],["denominator",1],["even?",1],["exact->inexact",1],["exact?",1],["exp",1],["expt",2],["floor",1],["gcd",1,!0],["imag-part",1],["inexact->exact",1],["inexact?",1],["integer->char",1],["integer-sqrt",1],["integer?",1],["lcm",1,!0],["log",1],["magnitude",1],["make-polar",2],["make-rectangular",2],["max",1,!0],["min",1,!0],["modulo",2],["negative?",1],["number?",1],["numerator",1],["odd?",1],["positive?",1],["random",1],["rational?",1],["real-part",1],["real?",1],["round",1],["sgn",1],["sin",1],["sinh",1],["sqr",1],["sqrt",1],["sub1",1],["tan",1],["zero?",1],["+",0,!0],["-",1,!0],["*",0,!0],["/",1,!0],["not",1],["false?",1],["boolean?",1],["boolean=?",2],["symbol->string",1],["symbol=?",2],["symbol?",1],["append",0,!0],["assq",2],["assv",2],["assoc",2],["caaar",1],["caadr",1],["caar",1],["cadar",1],["cadddr",1],["caddr",1],["cadr",1],["car",1],["cddar",1],["cdddr",1],["cddr",1],["cdr",1],["cdaar",1],["cdadr",1],["cdar",1],["cons?",1],["list?",1],["cons",2],["empty?",1],["length",1],["list",0,!0],["list*",1,!0],["list-ref",2],["remove",2],["member",2],["member?",2],["memq",2],["memv",2],["null?",1],["pair?",1],["rest",1],["reverse",1],["first",1],["second",1],["third",1],["fourth",1],["fifth",1],["sixth",1],["seventh",1],["eighth",1],["box",1],["unbox",1],["set-box!",2],["box?",1],["make-posn",2],["posn-x",1],["posn-y",1],["posn?",1],["char->integer",1],["char-alphabetic?",1],["char-ci<=?",2,!0],["char-ci<?",2,!0],["char-ci=?",2,!0],["char-ci>=?",2,!0],["char-ci>?",2,!0],["char-downcase",1],["char-lower-case?",1],["char-numeric?",1],["char-upcase",1],["char-upper-case?",1],["char-whitespace?",1],["char<=?",2,!0],["char<?",2,!0],["char=?",2,!0],["char>=?",2,!0],["char>?",2,!0],["char?",1],["format",1,!0],["list->string",1],["make-string",2],["replicate",2],["string",0,!0],["string->list",1],["string->number",1],["string->symbol",1],["string-alphabetic?",1],["string-append",0,!0],["string-ci<=?",2,!0],["string-ci<?",2,!0],["string-ci=?",2,!0],["string-ci>=?",2,!0],["string-ci>?",2,!0],["string-copy",1],["string-length",1],["string-lower-case?",1],["string-numeric?",1],["string-ref",2],["string-upper-case?",1],["string-whitespace?",1],["string<=?",2,!0],["string<?",2,!0],["string=?",2,!0],["string>=?",2,!0],["string>?",2,!0],["string?",1],["substring",3],["string-ith",2],["int->string",1],["string->int",1],["explode",1],["implode",1],["eof-object?",1],["=~",3],["eq?",2],["equal?",2],["equal~?",3],["eqv?",2],["error",2],["identity",1],["struct?",1],["current-seconds",0],["andmap",1,!0],["apply",2,!0],["argmax",2],["argmin",2],["build-list",2],["build-string",2],["compose",0,!0],["filter",2],["foldl",2,!0],["foldr",2,!0],["map",1,!0],["for-each",1,!0],["memf",2],["ormap",1,!0],["procedure?",1],["quicksort",2],["sort",2],["void",0,!0],["xml->s-exp",1],["build-vector",2],["make-vector",1,!0],["vector",0,!0],["vector-length",1],["vector-ref",2],["vector-set!",3],["vector->list",1],["list->vector",1],["vector?",1],["printf",1,!0],["display",1],["write",1],["newline",0],["call/cc",1],["procedure-arity",1],["check-expect",2],["EXAMPLE",2],["check-within",3],["check-error",2],["make-hasheq",0],["make-hash",0],["hash-set!",3],["hash-ref",3],["hash-remove!",2],["hash-map",2],["hash-for-each",2],["hash?",1],["raise",1],["undefined?",1],["values",0,!0],["make-struct-type",4,!0],["make-struct-field-accessor",2,!0],["make-struct-field-mutator",2,!0],["current-continuation-marks",0,!1],["continuation-mark-set->list",2,!1],["scheme->prim-js",1,!1],["prim-js->scheme",1,!1],["procedure->cps-js-fun",1,!1],["procedure->void-js-fun",1,!1],["js-===",2,!1],["js-get-named-object",1,!1],["js-get-field",2,!0],["js-set-field!",3,!1],["js-typeof",1,!1],["js-instanceof",2,!1],["js-call",2,!0],["js-new",1,!0],["js-make-hash",0,!0],["make-world-config",2,!0],["make-bb-info",2,!1],["bb-info?",1,!1],["bb-info-change-world",1,!1],["bb-info-toplevel-node",1,!1],["make-effect-type",4,!0],["effect?",1,!1],["world-with-effects",2,!1],["make-render-effect-type",4,!0],["render-effect-type?",1],["render-effect?",1],["make-render-effect-type",4,!0],["values",0,!0],["sleep",0,!0],["current-inexact-milliseconds",0,!1],["make-exn",2,!1],["exn-message",1,!1],["exn-continuation-marks",1,!1]].map(t('"moby/toplevel"'))),R=new r.moduleBinding("moby","moby/moby",_.bindings.concat(N.bindings));
o.topLevelModules=[B,n,_,O],o.knownCollections=["bootstrap","bootstrap2011","bootstrap2012","bootstrap2014","bootstrap2015"],o.mobyModuleBinding=R,o.knownModules=[n,_,i,O,N,c,l,f,p,m,h,d,g,y,v,w,b,x,E,k,S,M,C,P,T,I,R,q,B]}(),t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),u=n(8),c=n(5),l=n(4);!function(){function t(t){return l.isString(t)&&void 0!==t.chars?'"'+t.toString()+'"':t.toBytecode?t.toBytecode():t}function e(t){for(var e=t.toString().replace(/\|/g,""),n="",r=["{","}","[","]",",","'","`"," ","\\",'"'],o=0;o<e.length;o++)n+=(r.includes(e.charAt(o))?"\\":"")+e.charAt(o);return n=n.replace(/\n/g,"\\n")}function n(t,e,n){function r(t){return t.length<=1?t:n(t[0],t[1])?r(t.slice(1)):[t[0]].concat(r(t.slice(1)))}var o=function(t,n){return e(t,n)?-1:e(n,t)};return r(t.sort(o))}function f(t,e){var n=t[0],r=t[1],o=t[2],i=e.compile(o,r),a=i[0],s=i[1];return[[a].concat(n),s,o]}function h(t,e){function r(t){var e=t.modules.reduce(function(t,e){return t.concat(e.bindings)},[]),r=function(t){return t.moduleSource&&!e.includes(t)},o=Array.from(t.usedBindingsHash.values()),i=o.filter(r),a=e.concat(i),u=function(t){return new y(t)},c=function(t,e){return new O(t,e)},l=function(t){return new v(c(t.moduleSource,t.imported?!1:c(!1,!1)),new s.symbolExpr(t.name),-1,0)},f=t.freeVariables.concat(Array.from(t.definedNames.keys())),h=n(f,function(t,e){return e>t},function(t,e){return t==e}),p=[!1].concat(h.map(u),a.map(l)),d=[!1].concat(h,a.map(function(t){return t.name}));return[new w(0,p,[]),new s.globalEnv(d,!1,new s.emptyEnv)]}var o=r(e),i=o[0],a=o[1],u=t.filter(s.isDefinition),c=t.filter(function(t){return t instanceof s.requireExpr}),l=t.filter(s.isExpression),h=c.reduceRight(f,[[],e,a]),p=h[0],d=h[1],m=u.reduceRight(f,[[],d,a]),g=m[0],x=m[1],k=l.reduceRight(f,[[],x,a]),S=k[0],M=k[1],C=new E([].concat(p,g,S)),P=new b(0,i,C),T={bytecode:"/* runtime-version: local-compiler-spring2016 */\n"+P.toBytecode(),permissions:M.permissions(),provides:Array.from(M.providedNames.keys())};return T}s.literal.prototype.toBytecode=function(){var t=this.val.toBytecode?this.val.toBytecode():this.val===!0?"true":this.val===!1?"false":this.toString();return'{"$":"constant","value":'+t+"}"},s.symbolExpr.prototype.toBytecode=function(){return'types.symbol("'+e(this.val)+'")'},l.Vector.prototype.toBytecode=function(){return"types.vector(["+this.elts.join(",")+"])"},Array.prototype.toBytecode=function(){return"types."+(0===this.length?"EMPTY":"list(["+this.map(t).join(",")+"])")},c.Rational.prototype.toBytecode=function(){return"types.rational("+t(this.n)+", "+t(this.d)+")"},c.BigInteger.prototype.toBytecode=function(){return'types.bignum("'+this.toString()+'")'},c.FloatPoint.prototype.toBytecode=function(){var t=this.toString();return"+nan.0"===t&&(t="NaN"),"+inf.0"===t&&(t="Infinity"),"-inf.0"===t&&(t="-Infinity"),'types["float"]('+t+")"},c.Complex.prototype.toBytecode=function(){return"types.complex("+t(this.r)+", "+t(this.i)+")"},l.Char.prototype.toBytecode=function(){return"types['char'](String.fromCharCode("+this.val.charCodeAt(0)+"))"};var p=function(t){return t instanceof s.localStackReference},d=function(t){return t instanceof s.globalStackReference},m=function(t){return t instanceof s.unboundStackReference},g=function(){function t(){i(this,t)}return a(t,[{key:"toBytecode",value:function(){throw console.log(this),"IMPOSSIBLE - generic bytecode toBytecode method was called"}}]),t}(),y=function(t){function n(t){i(this,n);var e=r(this,Object.getPrototypeOf(n).call(this));return e.name=t,e}return o(n,t),a(n,[{key:"toBytecode",value:function(){return'{"$":"global-bucket","value":"'+e(this.name)+'"}'}}]),n}(g),v=function(t){function e(t,n,o,a){i(this,e);var s=r(this,Object.getPrototypeOf(e).call(this));return s.$="module-variable",s.modidx=t,s.sym=n,s.pos=o,s.phase=a,s}return o(e,t),a(e,[{key:"toBytecode",value:function(){return'{"$":"module-variable","sym":'+this.sym.toBytecode()+',"modidx":'+this.modidx.toBytecode()+',"pos":'+this.pos+',"phase":'+this.phase+"}"}}]),e}(g),w=function(e){function n(t,e,o){i(this,n);var a=r(this,Object.getPrototypeOf(n).call(this));return a.numLifts=t,a.topLevels=e,a.stxs=o,a}return o(n,e),a(n,[{key:"toBytecode",value:function(){return'{"$":"prefix","num-lifts":'+this.numLifts+',"toplevels":['+this.topLevels.map(function(e){return t(e)}).join(",")+'],"stxs":['+this.stxs.map(t)+"]}"}}]),n}(g),b=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.maxLetDepth=t,a.prefix=n,a.code=o,a}return o(e,t),a(e,[{key:"toBytecode",value:function(){return'{"$":"compilation-top","max-let-depth":'+this.maxLetDepth+',"prefix":'+this.prefix.toBytecode()+',"compiled-indirects":[],"code":'+this.code.toBytecode()+"}"}}]),e}(g),x=function(t){function e(t,n,o,a,s){i(this,e);var u=r(this,Object.getPrototypeOf(e).call(this));return u.depth=t,u.pos=n,u.constant=o,u.ready=a,u.loc=s,u}return o(e,t),a(e,[{key:"toBytecode",value:function(){return'{"$":"toplevel","depth":'+this.depth.toString()+',"pos":'+this.pos.toString()+',"const?":'+this.constant+',"ready?":'+this.ready+',"loc":'+(this.loc&&this.loc.toVector().toBytecode())+"}"}}]),e}(g),E=function(e){function n(t){i(this,n);var e=r(this,Object.getPrototypeOf(n).call(this));return e.forms=t,e}return o(n,e),a(n,[{key:"toBytecode",value:function(){return'{"$":"seq","forms":['+this.forms.map(t).join(",")+"]}"}}]),n}(g),k=function(e){function n(t,e){i(this,n);var o=r(this,Object.getPrototypeOf(n).call(this));return o.ids=t,o.rhs=e,o}return o(n,e),a(n,[{key:"toBytecode",value:function(){return'{"$":"def-values","ids":['+this.ids.map(t).join(",")+'],"body":'+this.rhs.toBytecode()+"}"}}]),n}(g),S=function(e){function n(t,e,o,a,s,u,c,l,f,h){i(this,n);var p=r(this,Object.getPrototypeOf(n).call(this));return p.name=t,p.flags=o,p.numParams=a,p.paramTypes=s,p.rest=u,p.body=h,p.closureMap=c,p.maxLetDepth=f,p.closureTypes=l,p.operatorAndRandLocs=e,p}return o(n,e),a(n,[{key:"toBytecode",value:function(){return'{"$":"lam","name":'+this.name.toBytecode()+',"locs":['+this.operatorAndRandLocs.map(t).join(",")+'],"flags":['+this.flags.map(t).join(",")+'],"num-params":'+this.numParams+',"param-types":['+this.paramTypes.map(t).join(",")+'],"rest?":'+this.rest+',"closure-map":['+this.closureMap.map(t).join(",")+'],"closure-types":['+this.closureTypes.map(t).join(",")+'],"max-let-depth":'+this.maxLetDepth+',"body":'+this.body.toBytecode()+"}"}}]),n}(g),M=function(e){function n(t,e,o){i(this,n);var a=r(this,Object.getPrototypeOf(n).call(this));return a.count=t,a.boxes=e,a.body=o,a}return o(n,e),a(n,[{key:"toBytecode",value:function(){return'{"$":"let-void","count":'+t(this.count)+',"boxes?":'+t(this.boxes)+',"body":'+this.body.toBytecode()+"}"}}]),n}(g),C=function(e){function n(t,e,o,a,s){i(this,n);var u=r(this,Object.getPrototypeOf(n).call(this));return u.count=t,u.pos=e,u.boxes=o,u.rhs=a,u.body=s,u}return o(n,e),a(n,[{key:"toBytecode",value:function(){return'{"$":"install-value","count":'+t(this.count)+',"pos":'+t(this.pos)+',"boxes?":'+t(this.boxes)+',"rhs":'+this.rhs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}]),n}(g),P=function(t){function e(t,n,o,a,s){i(this,e);var u=r(this,Object.getPrototypeOf(e).call(this));return u.unbox=t||!1,u.pos=n,u.clear=o,u.flonum=s,u.otherClears=a,u}return o(e,t),a(e,[{key:"toBytecode",value:function(){return'{"$":"localref","unbox?":'+this.unbox+',"pos":'+this.pos+',"clear":'+this.clear+',"other-clears?":'+this.otherClears+',"flonum?":'+this.flonum+"}"}}]),e}(g),T=function(e){function n(t,e){i(this,n);var o=r(this,Object.getPrototypeOf(n).call(this));return o.rator=t,o.rands=e,o}return o(n,e),a(n,[{key:"toBytecode",value:function(){return'{"$":"application","rator":'+this.rator.toBytecode()+',"rands":['+this.rands.map(t).join(",")+"]}"}}]),n}(g),I=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.testExpr=t,a.thenExpr=n,a.elseExpr=o,a}return o(e,t),a(e,[{key:"toBytecode",value:function(){return'{"$":"branch","test":'+this.testExpr.toBytecode()+',"then":'+this.thenExpr.toBytecode()+',"else":'+this.elseExpr.toBytecode()+"}"}}]),e}(g),q=function(t){function e(t,n,o){i(this,e);var a=r(this,Object.getPrototypeOf(e).call(this));return a.$="with-cont-mark",a.key=t,a.val=n,a.body=o,a}return o(e,t),a(e,[{key:"toBytecode",value:function(){return'{"$":"with-cont-mark","key":'+new s.literal(new s.symbolExpr(this.key)).toBytecode()+',"val":'+new s.literal(this.val).toBytecode()+',"body":'+this.body.toBytecode()+"}"}}]),e}(g),_=function(t){function e(t,n){i(this,e);var o=r(this,Object.getPrototypeOf(e).call(this));return o.$="req",o.reqs=t,o.dummy=n,o}return o(e,t),a(e,[{key:"toBytecode",value:function(){var t=this.reqs instanceof s.literal?'"'+this.reqs.val+'"':this.reqs.toBytecode();return'{"$":"req","reqs":'+t+',"dummy":'+this.dummy.toBytecode()+"}"}}]),e}(g),O=function(e){function n(t,e){i(this,n);var o=r(this,Object.getPrototypeOf(n).call(this));return o.path=t,o.base=e,o}return o(n,e),a(n,[{key:"toBytecode",value:function(){return'{"$":"module-path","path":'+t(this.path)+',"base":'+t(this.base)+"}"}}]),n}(g);s.Program.prototype.freeVariables=function(t){return t},s.ifExpr.prototype.freeVariables=function(t,e){return this.alternative.freeVariables(this.consequence.freeVariables(this.predicate.freeVariables(t,e),e),e)},s.beginExpr.prototype.freeVariables=function(t,e){return this.exprs.reduceRight(function(t,n){return n.freeVariables(t,e)},t)},s.symbolExpr.prototype.freeVariables=function(t,e){return m(e.lookup(this.val,0))&&!t.includes(this)?t.concat([this]):t},s.localExpr.prototype.freeVariables=function(t,e){var n=function(t,e){return new s.localEnv(e.val,!0,t)},r=function(t,e){return new s.localEnv(e.val,!1,t)},o=this.defs.reduce(function(t,e){return(e instanceof s.defVars?e.names:[e.name]).concat(t)},[]),i=o.reduce(n,e),a=this.body.freeVariables(t,i),u=function(t,e){if(e instanceof s.defFunc){var n=e.args.reduce(function(t,e){return r(t,e)},i);return e.body.freeVariables(t,n)}return e instanceof s.defStruct?t:e.expr.freeVariables(t,i)};return this.defs.reduce(u,a)},s.andExpr.prototype.freeVariables=function(t,e){return this.exprs.reduceRight(function(t,n){return n.freeVariables(t,e)},t)},s.orExpr.prototype.freeVariables=function(t,e){return this.exprs.reduceRight(function(t,n){return n.freeVariables(t,e)},t)},s.lambdaExpr.prototype.freeVariables=function(t,e){var n=function(t,e){return new s.localEnv(e.val,!1,t)},r=this.args.slice(0).reverse().reduce(n,e);return this.body.freeVariables(t,r)},s.quotedExpr.prototype.freeVariables=function(t){return t},s.callExpr.prototype.freeVariables=function(t,e){return this.func.freeVariables(t,e).concat(this.args).reduceRight(function(t,n){return n.freeVariables(t,e)},t)},s.Program.prototype.compile=function(t,e){return[this,e]},s.defFunc.prototype.compile=function(t,e){var n=this.name.compile(t,e),r=n[0],o=n[1],i=new s.lambdaExpr(this.args,this.body),a=i.compile(t,o,!1,this.name),u=a[0],c=a[1],l=new k([r],u);return[l,c]},s.defVar.prototype.compile=function(t,e){var n=this.name.compile(t,e),r=n[0],o=n[1],i=this.expr.compile(t,o),a=i[0],s=i[1],u=new k([r],a);return[u,s]},s.defVars.prototype.compile=function(t,e){var n=this.names.reduceRight(f,[[],e,t]),r=n[0],o=n[1],i=this.expr.compile(t,o),a=i[0],s=i[1],u=new k(r,a);return[u,s]},s.beginExpr.prototype.compile=function(t,e){var n=this.exprs.reduceRight(f,[[],e,t]),r=n[0],o=n[1],i=new E(r);return[i,o]},s.lambdaExpr.prototype.compile=function(t,e,r,o){function i(t,e){return t.map(function(t){return e.includes(t)?t:!1})}function a(t,e){return new s.localEnv(e,!1,t)}function u(t,e){return new s.localEnv(e,!0,t)}function c(t,e){return new s.globalEnv(t,!1,e)}function l(t,e,r){var o=e.map(function(t){return r.lookup(t.val,0)}),s=function E(t,e){return 0===e.length?!1:t(e[0])?e[0]:E(t,e.slice(1))},l=function(t){return t.depth},f=s(m,o);if(f)throw"Can't produce closure; I don't know where "+f.name+" is bound.";var h=n(o.filter(p),function(t,e){return t.depth<e.depth},function(t,e){return t.depth===e.depth}),g=h.map(l),y=o.filter(d),v=n(y.map(l),function(t,e){return e>t},function(t,e){return t===e}),w=t.reverse().map(function(t){return t.val}).reduce(a,r),b=h.reverse().reduce(function(t,e){return e.isBoxed?u(t,e.name):a(t,e.name)},w),x=v.reverse().reduce(function(t,e){var n=y.filter(function(t){return t.depth===e}),o=n.map(function(t){return t.name}),a=i(r.peek(e).names,o);return c(a,t)},b);return[v.concat(g),x]}void 0===r&&(r=!0);var f=this.args.map(function(t){return t.val}).reduce(a,new s.emptyEnv),h=this.body.freeVariables([],f),g=l(this.args.slice(0),h,t),y=g[0],v=g[1],w=this.body.compile(v,e),b=w[0],x=w[1],E=function(t){return t.location.toVector()},k=new S(r?[]:new s.symbolExpr(o),[r?this.stx:o].concat(this.args).map(E),[],this.args.length,this.args.map(function(){return new s.symbolExpr("val")}),!1,y,y.map(function(){return new s.symbolExpr("val/ref")}),0,b);return[k,x]},s.localExpr.prototype.compile=function(t,e){function n(t,e){return t.concat(e instanceof s.defVars?e.names:e.name)}function r(t,e,n,i){if(0===t.length)return o.body.compile(u,e);var a=t[0].compile(n,e),c=a[0].rhs,l=a[1],h=t[0]instanceof s.defVars?t[0].names.length:1,p=r(t.slice(1),l,n,i+h),d=p[0];f=p[1];var m=new C(h,i,!0,c,d);return[m,f]}if(0===this.defs.length)return this.body.compile(t,e);var o=this,i=this.defs.reduce(n,[]),a=function(t,e){return new s.localEnv(e.val,!0,t)},u=i.reverse().reduce(a,t),c=r(this.defs,e,u,0),l=c[0],f=c[1];return[new M(i.length,!0,l),f]},s.callExpr.prototype.compile=function(t,e){var n=function(t){return new s.unnamedEnv(t)},r=this.args.reduce(n,t),o=this.func.compile(r,e),i=o[0],a=this.args.reduceRight(f,[[],e,r]),u=a[0],c=o[1],l=new T(i,u),h=function(t){return t.location},p=[this.func.location].concat(this.args.map(h)),d=p.concat(this.location).map(function(t){return t.toVector()}),m=new q(new s.symbolExpr("moby-application-position-key"),d,new q(new s.symbolExpr("moby-stack-record-continuation-mark-key"),this.location.toVector(),l));return[m,c]},s.ifExpr.prototype.compile=function(t,e){var n=this.predicate.compile(t,e),r=n[0],o=this.consequence.compile(t,e),i=o[0],a=this.alternative.compile(t,e),s=a[0],u=a[1],c=new I(r,i,s);return[c,u]},s.symbolExpr.prototype.compile=function(t,e){var n,r=t.lookup(this.val,0);if(p(r))n=new P(r.isBoxed,r.depth,!1,!1,!1);else{if(!d(r))throw m(r)?"Couldn't find '"+this.val+"' in the environment":"IMPOSSIBLE: env.lookup failed for '"+this.val+"'! A reference should be added to the environment!";n=new x(r.depth,r.pos,!1,!1,this.location)}return[n,e]},s.quotedExpr.prototype.compile=function(t,e){function n(t){return t instanceof s.literal?n(t.val):t instanceof Array?t.map(n):t}var r=new s.literal(n(this.val));return[r,e]},s.requireExpr.prototype.compile=function(t,e){return[new _(this.spec,new x(0,0,!1,!1,!1)),e]},s.provideStatement.prototype.compile=function(){},u.compile=function(t,e,n){var r=(new Date).getTime();try{var o=h(t,e)}catch(i){throw console.log("COMPILATION ERROR"),i}var a=(new Date).getTime();return n&&(console.log("Compiled in "+Math.floor(a-r)+"ms"),console.log(JSON.stringify(o))),o}}(),t.exports=u},function(module,exports,__webpack_require__){"use strict";function checkDuplicateIdentifiers(t,e,n){var r={};t.forEach(function(t){t instanceof _structures.symbolExpr?r[t.val]?(0,_structures.throwError)(new types.Message([new types.ColoredPart(e.toString(),e.location),": found ",new types.ColoredPart("a variable",t.location)," that is already used ",new types.ColoredPart("here",r[t.val].location)]),t.location):r[t.val]=t:(0,_structures.throwError)("expected identifier "+t.val,t.location)})}function tagApplicationOperator_Module(t,e){var n=(0,_structures.defaultModuleResolver)(e),r=(new _structures.emptyEnv).extendEnv_moduleBinding(n);return[t.func].concat(t.args).forEach(function(t){t.context=r}),t}function forceBooleanContext(t,e,n){t=new _structures.literal(new types.string(t.toString()));var r=new _structures.symbolExpr("verify-boolean-branch-value"),o=new _structures.quotedExpr(t),i=new _structures.quotedExpr(new _structures.literal(e.toVector())),a=new _structures.quotedExpr(new _structures.literal(n.location.toVector())),s=new _structures.callExpr(r,[o,i,n,a]);return s.location=r.location=n.location,o.location=i.location=a.location=n.location,tagApplicationOperator_Module(s,"moby/runtime/kernel/misc"),s}function desugarProgram(t,e,n){var r=[[],e||new structures.pinfo],o=t.filter(function(t){return!(t instanceof _structures.comment)}).reduce(function(t,e){var r=e.desugar(t[1]);if(structures.isExpression(e)&&n){var o=new _structures.symbolExpr("print-values"),i=new _structures.callExpr(o,[r[0]]);o.location=i.location=r[0].location,r[0]=i,tagApplicationOperator_Module(i,"moby/runtime/kernel/misc")}return r[0].length?t[0]=t[0].concat(r[0]):t[0].push(r[0]),[t[0],r[1]]},r);return o[0].location=t.location,o}function desugarQuasiQuotedList(t,e,n){function r(t,e,n,r){if(0===n&&t instanceof _structures.unquoteSplice)return t.desugar(e,n);var o=t instanceof Array?desugarQuasiQuotedList(t,n,n)[0]:t.desugar(e,n)[0],i=new _structures.symbolExpr("list"),a=new _structures.callExpr(i,[o]);return i.parent=a,a.location=i.location=r,[a,e]}var o="undefined"!=typeof t.location?t.location:t instanceof Array&&"undefined"!=typeof t[0].location?t[0].location:(0,_structures.throwError)(types.Message(["ASSERTION FAILURE: couldn't find a usable location"]),new Location(0,0,0,0)),i=t.map(function(t){return r(t,e,n,o)[0]}),a=new _structures.symbolExpr("append");a.location=o;var s=new _structures.callExpr(a,i);return s.location=o,[s,e]}function bf(t,e,n,r,o){return new _structures.functionBinding(t,e,n,r,[],!1,o)}function provideBindingId(t){this.symbl=t}function provideBindingStructId(t){this.symbl=t}function analyzeClosureUses(t,e){var n=e.env,r=new Map,o=!0,i=!1,a=void 0;try{for(var s,u=n.bindings[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=_slicedToArray(s.value,2),l=c[0],f=c[1];r.set(l,f)}}catch(h){i=!0,a=h}finally{try{!o&&u["return"]&&u["return"]()}finally{if(i)throw a}}var p=new _structures.env(r);return p=t.args.reduce(function(t,e){return t.extend(new _structures.constantBinding(e.val,!1,[],e.location))},p),e.env=p,e=t.body.analyzeUses(e,p),e.env=n,e}function _analyze(t){return programAnalyzeWithPinfo(t,structures.getBasePinfo("base"))}function programAnalyzeWithPinfo(t,e){function n(t,e){return t.reduce(function(t,e){return e.collectDefinitions(t)},e)}function r(t,e){return t.reduce(function(t,e){return e.collectProvides(t)},e)}function o(t,e){return t.reduce(function(t,e){return e.analyzeUses(t,t.env)},e)}var i=n(t,e),a=r(t,i);return o(t,a)}var _slicedToArray=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.analyze=exports.desugar=void 0,exports.provideBindingId=provideBindingId,exports.provideBindingStructId=provideBindingStructId;var _structures=__webpack_require__(3);__webpack_require__(7);var structures=__webpack_require__(3),types=__webpack_require__(4);_structures.Program.prototype.desugar=function(t){return[this,t]},_structures.defFunc.prototype.desugar=function(t){checkDuplicateIdentifiers([this.name].concat(this.args),this.stx[0],this.location),this.args.forEach(function(t){t instanceof _structures.symbolExpr||(0,_structures.throwError)(new types.Message([new types.ColoredPart(this.stx.val,this.stx.location),": expected a variable but found ",new types.ColoredPart("something else",t.location)]),t.location)});var e=this.body.desugar(t),n=new _structures.defFunc(this.name,this.args,e[0],this.stx);return n.location=this.location,[n,e[1]]},_structures.defVar.prototype.desugar=function(t){if(this.expr instanceof _structures.lambdaExpr){var e=new _structures.defFunc(this.name,this.expr.args,this.expr.body,this.stx);return e.location=this.location,e.desugar(t)}var n=this.expr.desugar(t),r=new _structures.defVar(this.name,n[0],this.stx);return r.location=this.location,[r,n[1]]},_structures.defVars.prototype.desugar=function(t){var e=this.expr.desugar(t),n=new _structures.defVars(this.names,e[0],this.stx);return n.location=this.location,[n,e[1]]},_structures.defStruct.prototype.desugar=function(t){function e(t,e){var r=new _structures.symbolExpr("make-struct-field-accessor"),o=[new _structures.symbolExpr(n.name.val+"-ref"),new _structures.literal(e),new _structures.quotedExpr(new _structures.symbolExpr(t.val))],i=new _structures.callExpr(r,o),a=new _structures.symbolExpr(n.name.val+"-"+t.val),s=new _structures.defVar(a,i);[s,r,i,a].concat(o).forEach(function(e){e.location=t.location}),c.push(s)}var n=this,r=["make-"+this.name.val,this.name.val+"?",this.name.val+"-ref",this.name.val+"-set!"],o=r.map(function(t){return new _structures.symbolExpr(t)}),i=new _structures.symbolExpr("make-struct-type"),a=[new _structures.quotedExpr(new _structures.symbolExpr(this.name.val)),new _structures.literal(!1),new _structures.literal(this.fields.length),new _structures.literal(0)],s=new _structures.callExpr(i,a);[s,i].concat(o,a).forEach(function(t){t.location=n.location});var u=new _structures.defVars([this.name].concat(o),s,this.stx),c=[u];return u.location=this.location,this.fields.forEach(e),[c,t]},_structures.beginExpr.prototype.desugar=function(t){var e=desugarProgram(this.exprs,t),n=new _structures.beginExpr(e[0],this.stx);return n.location=this.location,[n,e[1]]},_structures.lambdaExpr.prototype.desugar=function(t){this.stx&&checkDuplicateIdentifiers(this.args,this.stx,this.location);var e=this.body.desugar(t),n=new _structures.lambdaExpr(this.args,e[0],this.stx);return n.location=this.location,[n,e[1]]},_structures.localExpr.prototype.desugar=function(t){var e=desugarProgram(this.defs,t),n=this.body.desugar(e[1]),r=new _structures.localExpr(e[0],n[0],this.stx);return r.location=this.location,[r,n[1]]},_structures.callExpr.prototype.desugar=function(t){this.func||(0,_structures.throwError)(new types.Message([new types.ColoredPart("( )",this.location),": expected a function, but nothing's there"]),this.location);var e=desugarProgram([this.func].concat(this.args),t),n=new _structures.callExpr(e[0][0],e[0].slice(1),this.stx);return n.location=this.location,[n,e[1]]},_structures.ifExpr.prototype.desugar=function(t){var e=desugarProgram([this.predicate,this.consequence,this.alternative],t),n=forceBooleanContext(this.stx,this.stx.location,e[0][0]),r=e[0][1],o=e[0][2],i=new _structures.ifExpr(n,r,o,this.stx);return i.location=this.location,[i,e[1]]},_structures.whenUnlessExpr.prototype.desugar=function(t){var e=new _structures.beginExpr(this.exprs,this.stx),n=new _structures.symbolExpr("void"),r=new _structures.callExpr(n,[],this.stx),o="when"===this.stx.val?e:r,i="when"===this.stx.val?r:e;e.location=this.exprs.location,n.location=r.location=this.location;var a=desugarProgram([this.predicate,o,i],t),s=new _structures.ifExpr(a[0][0],a[0][1],a[0][2],this.stx);return s.location=this.location,[s,a[1]]},_structures.letrecExpr.prototype.desugar=function(t){function e(t){var e=new _structures.defVar(t.first,t.second,t.stx);return e.location=t.location,e}var n=new _structures.localExpr(this.bindings.map(e),this.body,this.stx).desugar(t);return n[0].location=this.location,n},_structures.letExpr.prototype.desugar=function(t){function e(t){return t.first}function n(t){return t.second}var r=this.bindings.map(e),o=this.bindings.map(n),i=new _structures.lambdaExpr(r,this.body,this.stx),a=new _structures.callExpr(i,o);return i.location=a.location=this.location,a.desugar(t)},_structures.letStarExpr.prototype.desugar=function(t){function e(t,e){var n=new _structures.letExpr([e],t,e.stx);return n.location=e.location,n}return 0===this.bindings.length?this.body.desugar(t):this.bindings.reduceRight(e,this.body).desugar(t)},_structures.condExpr.prototype.desugar=function(t){var e=new _structures.symbolExpr("throw-cond-exhausted-error"),n=new _structures.quotedExpr(new _structures.literal(this.location.toVector())),r=tagApplicationOperator_Module(new _structures.callExpr(e,[n]),"moby/runtime/kernel/misc"),o=new _structures.symbolExpr("if");o.location=this.stx.location,r.location=e.location=n.location=this.location;for(var i=this.clauses.length-1;i>-1;i--)this.clauses[i].first instanceof _structures.symbolExpr&&"else"===this.clauses[i].first.val&&(this.clauses[i].first.val="true"),r=new _structures.ifExpr(this.clauses[i].first,this.clauses[i].second,r,this.stx),r.location=this.location;return r.desugar(t)},_structures.caseExpr.prototype.desugar=function(t){function e(t,e){var o=new _structures.symbolExpr("ormap"),i=new _structures.callExpr(o,[y,e.first],n.stx),a=new _structures.ifExpr(i,e.second,t,r);return h=h.concat([o,i,e.first,a]),a}var n=this,r=new _structures.symbolExpr("if");r.location=n.location;var o,i=t.gensym("val"),a=i[0],s=i[1],u=a.gensym("x"),c=u[0],l=u[1],f=new _structures.symbolExpr("void"),h=[s,l,f],p=this.clauses,d=p[this.clauses.length-1];d.first instanceof _structures.symbolExpr&&"else"===d.first.val?(o=d.second,p.pop()):(o=new _structures.callExpr(f,[],n.stx),o.location=n.location);var m=new _structures.symbolExpr("equal?"),g=new _structures.callExpr(m,[l,s],r),y=new _structures.lambdaExpr([l],g,r);h=h.concat([m,g,y]);var v=new _structures.couple(s,this.expr),w=p.reduceRight(e,o),b=new _structures.letExpr([v],w,r);return h=h.concat([v,b]),h.forEach(function(t){t.location=n.location}),b.desugar(c)},_structures.andExpr.prototype.desugar=function(t){function e(t){var o=forceBooleanContext(n.stx,n.stx.location,t[0]),i=t.length>2?e(t.slice(1)):forceBooleanContext(n.stx,n.stx.location,t[1]),a=new _structures.literal(!1),s=new _structures.ifExpr(o,i,a,r),u=[a,r,s];return u.forEach(function(t){return t.location=n.location}),s}var n=this,r=new _structures.symbolExpr("if"),o=desugarProgram(this.exprs,t),i=o[0];t=o[1];var a=e(i);return a.location=n.location,[a,t]},_structures.orExpr.prototype.desugar=function(t){function e(t,o){var i=t[0],a=o.gensym("tmp"),s=a[1],u=new _structures.symbolExpr("if");s.notOriginalSource=!0,i.stx&&"if"!==i.stx.val&&(u.location=i.location,i.stx=u),o=a[0];var c,l=new _structures.couple(s,forceBooleanContext(n.stx,n.stx.location,i));if(2==t.length)c=forceBooleanContext(r,n.stx.location,t[1]);else{var f=e(t.slice(1),o);c=f[0],o=f[1]}var h=new _structures.ifExpr(s,s,c,new _structures.symbolExpr("if")),p=new _structures.letExpr([l],h,r),d=[r,s,l,h,h.stx,p];return d.forEach(function(t){return t.location=n.location}),p.desugar(o)}var n=this,r=new _structures.symbolExpr("or"),o=desugarProgram(this.exprs,t),i=o[0];return t=o[1],e(i,t)},_structures.quotedExpr.prototype.desugar=function(t){function e(t,e){return function(n){if(n instanceof _structures.callExpr||n instanceof _structures.quotedExpr||n instanceof _structures.unsupportedExpr)return n.desugar(t);if(n instanceof _structures.symbolExpr||n instanceof _structures.literal||n instanceof Array){var r=new _structures.quotedExpr(n);return r.location=e,[r,t]}(0,_structures.throwError)(new types.Message(["ASSERTION ERROR: Found an unexpected item in a quotedExpr"]),e)}}return"undefined"==typeof this.location&&(0,_structures.throwError)(new types.Message(["ASSERTION ERROR: Every quotedExpr should have a location"]),this.location),e(t,this.location)(this.val)},_structures.unquotedExpr.prototype.desugar=function(t,e){if("undefined"==typeof e)(0,_structures.throwError)(new types.Message(["misuse of a ', not under a quasiquoting backquote"]),this.location);else{if(1===e)return this.val.desugar(t);if(e>1){var n=this.val instanceof Array?desugarQuasiQuotedList(this.val,t,e-1)[0]:this.val.desugar(t,e-1)[0],r=new _structures.quotedExpr(new _structures.symbolExpr("unquote")),o=new _structures.symbolExpr("list"),i=[r,n],a=new _structures.callExpr(o,i);return r.location=this.location,r.parent=i,o.location=this.location,o.parent=a,a.location=this.location,[a,t]}(0,_structures.throwError)(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),this.location)}},_structures.unquoteSplice.prototype.desugar=function(t,e){if("undefined"==typeof e)(0,_structures.throwError)(new types.Message(["misuse of a ,@, not under a quasiquoting backquote"]),this.location);else{if(1===e)return this.val.desugar(t);if(e>1){var n=this.val instanceof Array?desugarQuasiQuotedList(this.val,t,e-1)[0]:this.val.desugar(t,e-1)[0],r=new _structures.quotedExpr(new _structures.symbolExpr("unquote-splicing")),o=new _structures.symbolExpr("list"),i=[r,n],a=new _structures.callExpr(o,i);return r.location=this.location,r.parent=i,o.location=this.location,o.parent=a,a.location=this.location,[a,t]}(0,_structures.throwError)(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),this.location)}},_structures.quasiquotedExpr.prototype.desugar=function(t,e){if(e="undefined"==typeof e?0:e,e>=0){var n;n=this.val instanceof Array?desugarQuasiQuotedList(this.val,t,e+1)[0]:this.val.desugar(t,e+1)[0]}else(0,_structures.throwError)(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),this.location);if(0==e)return[n,t];var r=new _structures.quotedExpr(new _structures.symbolExpr("quasiquote")),o=[r,n],i=new _structures.symbolExpr("list"),a=new _structures.callExpr(i,o);return r.parent=o,r.location=this.location,n.parent=o,i.parent=a,i.location=this.location,a.location=this.location,[a,t]},_structures.symbolExpr.prototype.desugar=function(t){if(!this.isClause&&"else"===this.val){var e=this.parent&&this.parent[0]===this?this.parent.location:this.location;(0,_structures.throwError)(new types.Message([new types.ColoredPart(this.val,e),": not allowed ",new types.ColoredPart("here",e),", because this is not a question in a clause"]),e)}if(this.parent&&this.parent[0]!==this&&"define"===this.val){var n=new types.Message([new types.ColoredPart(this.val,this.location),": not allowed inside an expression"]);(0,_structures.throwError)(n,this.location)}if(!this.parent&&_structures.keywords.includes(this.val)&&"else"!==this.val&&(0,_structures.throwError)(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location),"."===this.val){var r=new types.Message([this.location.source,":",this.location.startRow.toString(),":",this.location.startCol.toString(),": read: '.' is not supported as a symbol in WeScheme"]);(0,_structures.throwError)(r,this.location,"Error-GenericReadError")}return[this,t]},_structures.unsupportedExpr.prototype.desugar=function(t){this.location.span=this.errorSpan,(0,_structures.throwError)(this.errorMsg,this.location,"Error-GenericReadError")},_structures.Program.prototype.collectDefinitions=function(t){return t},_structures.defFunc.prototype.collectDefinitions=function(t){this.args.forEach(function(t){_structures.keywords.includes(t.val)&&(0,
_structures.throwError)(new types.Message([new types.ColoredPart(t.val,t.location),": this is a reserved keyword and cannot be used as a variable or function name"]),t.location)});var e=bf(this.name.val,!1,this.args.length,!1,this.name.location);return t.accumulateDefinedBinding(e,this.name.location)},_structures.defVar.prototype.collectDefinitions=function(t){var e=this.expr instanceof _structures.lambdaExpr?bf(this.name.val,!1,this.expr.args.length,!1,this.name.location):new _structures.constantBinding(this.name.val,!1,[],this.name.location);return t.accumulateDefinedBinding(e,this.name.location)},_structures.defVars.prototype.collectDefinitions=function(t){var e=this,n=function(t){return e.stx[1].val+"-"+t.val},r=function(t){return"set-"+e.stx[1].val+"-"+t.val+"!"};if("define-struct"===e.stx[0].val){var o=e.stx[1].val,i=e.stx[2],a="make-"+o,s=o+"?",u=i.map(n),c=i.map(r),l=e.stx[1].location,f=new _structures.structBinding(o,!1,i,a,s,u,c,null,e.stx[1].location),h=bf(a,!1,i.length,!1,l),p=bf(s,!1,1,!1,l),d=bf(o+"-set!",!1,1,!1,l),m=bf(o+"-ref",!1,1,!1,l),g=[f,m,h,p,d];return t.accumulateDefinedBindings(g,e.location)}return this.names.reduce(function(t,e){var n=new _structures.constantBinding(e.val,!1,[],e.location);return t.accumulateDefinedBinding(n,e.location)},t)},_structures.requireExpr.prototype.collectDefinitions=function(pinfo){function getWeSchemeModule(t){var e=t.match(/^wescheme\/(\w+)$/);return e?e[1]:!1}function throwModuleError(t){var e=structures.moduleGuess(that.spec.toString()),n=new types.Message(["Found require of the module ",new types.ColoredPart(that.spec.toString(),that.spec.location),", but this module is unknown.",e.name===that.spec.toString()?"":" Did you mean '"+e.name+"'?"]);(0,_structures.throwError)(n,that.spec.location,"Error-UnknownModule")}function processModule(t){var e=window.COLLECTIONS[t].provides,n=function(e){var n=new _structures.constantBinding(e,new _structures.symbolExpr(t),!1);return n.imported=!0,n},r=e.map(n),o=new _structures.moduleBinding(t,"dummy",r);newPinfo=pinfo.accumulateModule(o).accumulateModuleBindings(r)}var moduleName=this.spec instanceof _structures.literal?this.spec.val.toString():this.spec.toString(),resolvedModuleName=pinfo.modulePathResolver(moduleName,pinfo.currentModulePath),that=this,newPinfo;resolvedModuleName||getWeSchemeModule(moduleName)||throwModuleError(moduleName);var url=window.location.protocol+"//"+window.location.host+(getWeSchemeModule(moduleName)?"/loadProject?publicId="+getWeSchemeModule(moduleName):"/js/mzscheme-vm/collects/"+moduleName+".js");return window.COLLECTIONS&&window.COLLECTIONS[moduleName]?processModule(moduleName):window.jQuery?window.jQuery.ajax({url:url,success:function success(result){if(getWeSchemeModule(moduleName)){var program=(0,eval)("("+result+")");void 0===window.COLLECTIONS&&(window.COLLECTIONS=[]);var lexemes=__webpack_require__(2).lex(program.source.src,moduleName),AST=__webpack_require__(10).parse(lexemes),desugared=desugar(AST)[0],pinfo=analyze(desugared),objectCode=__webpack_require__(8).compile(desugared,pinfo);window.COLLECTIONS[moduleName]={name:moduleName,bytecode:(0,eval)("("+objectCode.bytecode+")"),provides:objectCode.provides}}else eval(result);result?processModule(moduleName):throwModuleError(moduleName)},error:function(t){throwModuleError(moduleName)},async:!1}):(console.log("jQuery not available, can't load data from "+url),throwModuleError(moduleName)),newPinfo},_structures.Program.prototype.collectProvides=function(t){return t},_structures.provideStatement.prototype.collectProvides=function(t){function e(e){t.providedNames.put(e,new provideBindingId(e))}function n(t,n){if(n instanceof _structures.symbolExpr){if(t.definedNames.has(n.val))return e(n.val),t;var r=new types.Message(["The name '",new types.ColoredPart(n.toString(),n.location),"', is not defined in the program, and cannot be provided."]);(0,_structures.throwError)(r,n.location)}else{if(!(n instanceof Array))throw"Impossible: all invalid provide clauses should have been filtered out!";if(t.definedNames.has(n[1].val)&&t.definedNames.get(n[1].val)instanceof _structures.structBinding){var o=t.definedNames.get(n[1].val),i=[o.name,o.constructor,o.predicate].concat(o.accessors,o.mutators);return i.forEach(e),t}(0,_structures.throwError)(new types.Message(["The struct '",new types.ColoredPart(n[1].toString(),n[1].location),"', is not defined in the program, and cannot be provided"]),n.location)}}return this.clauses.reduce(n,t)},_structures.Program.prototype.analyzeUses=function(t,e){return t},_structures.defVar.prototype.analyzeUses=function(t){return t.env.extend(this.expr instanceof _structures.lambdaExpr?bf(this.name.val,!1,this.expr.args.length,!1,this.location):new _structures.constantBinding(this.name.val,!1,[],this.name.location)),this.expr.analyzeUses(t,t.env)},_structures.defVars.prototype.analyzeUses=function(t){return this.names.forEach(function(e){t.env.extend(new _structures.constantBinding(e.val,!1,[],e.location))}),this.expr.analyzeUses(t,t.env)},_structures.defFunc.prototype.analyzeUses=function(t){return t.env=t.env.extend(bf(this.name.val,!1,this.args.length,!1,this.name.location)),analyzeClosureUses(this,t)},_structures.lambdaExpr.prototype.analyzeUses=function(t,e){return analyzeClosureUses(this,t)},_structures.beginExpr.prototype.analyzeUses=function(t,e){return this.exprs.reduce(function(t,n){return n.analyzeUses(t,e)},t)},_structures.localExpr.prototype.analyzeUses=function(t,e){var n=this.defs.reduce(function(t,n){return n.analyzeUses(t,e)},t);return this.body.analyzeUses(n,n.env)},_structures.callExpr.prototype.analyzeUses=function(t,e){return[this.func].concat(this.args).reduce(function(n,r){return r instanceof Array?r.reduce(function(t,e){return e.analyzeUses(t,t.env)},t):r.analyzeUses(n,e)},t)},_structures.ifExpr.prototype.analyzeUses=function(t,e){var n=[this.predicate,this.consequence,this.alternative];return n.reduce(function(t,n){return n.analyzeUses(t,e)},t)},_structures.symbolExpr.prototype.analyzeUses=function(t,e){(_structures.keywords.includes(this.val)&&(!this.parent||this.parent[0]!==this)||this.parent instanceof _structures.couple)&&(0,_structures.throwError)(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);var n=e.lookup_context(this.val);return n?(this.bindingLoc=n.loc,t.accumulateBindingUse(n,t)):t.accumulateFreeVariableUse(this.val,t)};var desugar=exports.desugar=function(t,e,n){var r=(new Date).getTime();try{var o=desugarProgram(t,e,!0),i=o[0];e=o[1]}catch(a){throw console.log("DESUGARING ERROR"),a}var s=(new Date).getTime();return n&&(console.log("Desugared in "+Math.floor(s-r)+"ms"),console.log(i),console.log(i.toString())),o},analyze=exports.analyze=function(t,e){var n=(new Date).getTime();try{var r=_analyze(t)}catch(o){throw console.log("ANALYSIS ERROR"),o}var i=(new Date).getTime();return e&&console.log("Analyzed in "+Math.floor(i-n)+"ms"),r}},function(t,e,n){"use strict";var r=n(3),o=n(4),i=n(8);!function(){function t(t){return o.isVector(t.val)}function e(t){return o.isString(t.val)}function n(t){return t instanceof r.symbolExpr}function a(t){return t instanceof r.literal}function s(t){return t instanceof r.unsupportedExpr}function u(t){return t instanceof r.comment}function c(t){return t instanceof Array&&t.length>=1}function l(t){return t.slice(1)}function f(t,e){return t=n(t)?t.val:t,e=n(e)?e.val:e,t===e}function h(t){function e(t){return u(t)?t:y(t)?v(t):w(t)?b(t):B(t)?R(t):A(t)?j(t):(0,r.throwError)(new o.Message(["Not a Definition, Expression, Library Require, or Provide"]),t.location)}return t.map(e)}function p(t){return 0===t.length?[]:c(t)?h(t):(0,r.throwError)(new o.Message(["The sexp is not a list of definitions or expressions: "+t]),t.location)}function d(t){return c(t)&&n(t[0])&&f("define-struct",t[0])}function m(t){return c(t)&&n(t[0])&&f("define",t[0])}function g(t){return c(t)&&n(t[0])&&f("define-values",t[0])}function y(t){return d(t)||m(t)||g(t)}function v(t){function e(t){if(t.length<2&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected the structure name after define-struct, but nothing's there"]),t.location),n(t[1])||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected the structure name after define-struct, but found ",new o.ColoredPart("something else",t[1].location)]),t.location),t.length<3&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least one field name (in parentheses) after the ",new o.ColoredPart("structure name",t[1].location),", but nothing's there"]),t.location),t[2]instanceof Array||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least one field name (in parentheses) after the ",new o.ColoredPart("structure name",t[1].location),", but found ",new o.ColoredPart("something else",t[2].location)]),t.location),t[2].every(n)||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a field name, but found ",new o.ColoredPart("something else",arg.location)]),t.location),t.length>3){var e=t.slice(3).map(function(t){return t.location}),i=1===t[2].length?"field name":"field names",a=e.length+" extra "+(1===e.length?"part":"parts");(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected nothing after the ",new o.ColoredPart(i,t[2].location),", but found ",new o.MultiPart(a,e,!1)]),t.location)}return new r.defStruct(O(t[1]),t[2].map(O),t)}function i(t){if(t.length<2&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expects a list of variables and a body, but found neither"]),t.location),t.length<3&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expects a list of variables and a body, but found only ",new o.ColoredPart("one part",t[1].location)]),t.location),t[1]instanceof Array||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expects a list of variables and a body, but found ",new o.ColoredPart("something else",t[1].location)]),t.location),t.length>3){var e=t.slice(3).map(function(t){return t.location}),n=e.length+" extra "+(1===e.length?"part":"parts"),i=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expects a list of variables and a body, but found ",new o.MultiPart(n,e,!1)]);(0,r.throwError)(i,t.location)}return new r.defVars(t[1].map(O),b(t[2]),t)}function a(t){var e,i;if(t.length<2&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a variable, or a function name and its variables (in parentheses), after define, but nothing's there"]),t.location),t[1]instanceof Array){0===t[1].length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a name for the function within ",new o.ColoredPart("the parentheses",t[1].location)]),t.location),n(t[1][0])||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a function name after the open parenthesis but found ",new o.ColoredPart("something else",t[1][0].location)]),t.location),t[1].forEach(function(e){n(e)||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a variable but found ",new o.ColoredPart("something else",e.location)]),t.location)}),t.length<3&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected an expression for the function body, but nothing's there"]),t.location),t.length>3&&(e=t.slice(3).map(function(t){return t.location}),i=e.length+" extra "+(1===e.length?"part":"parts"),(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected only one expression for the function body, but found ",new o.MultiPart(i,e,!1)]),t.location));var a=l(t[1]).map(O);return a.location=t[1].location,new r.defFunc(O(t[1][0]),a,b(t[2]),t)}return n(t[1])?(t.length<3&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected an expression after the variable ",new o.ColoredPart(t[1].val,t[1].location)," but nothing's there"]),t.location),t.length>3&&(e=t.slice(3).map(function(t){return t.location}),i=e.length+" extra "+(1===e.length?"part":"parts"),(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected only one expression after the variable ",new o.ColoredPart(t[1].val,t[1].location),", but found ",new o.MultiPart(i,e,!1)]),t.location)),new r.defVar(O(t[1]),b(t[2]),t)):void(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a variable but found ",new o.ColoredPart("something else",t[1].location)]),t.location)}var s=d(t)?e(t):m(t)?a(t):g?i(t):(0,r.throwError)(new o.Message([": expected to find a definition, but found: "+t]),t.location);return s.location=t.location,s}function w(t){return!y(t)&&!B(t)&&!A(t)}function b(t){return c(t)?x(t):_(t)}function x(t){function e(t){return f(t[0],"unquote")&&(0,r.throwError)(new o.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),t.location,"Error-GenericSyntacticError"),f(t[0],"unquote-splicing")&&(0,r.throwError)(new o.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),t.location,"Error-GenericSyntacticError"),f(t[0],"else")&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t.location),": not allowed ",new o.ColoredPart("here",t.location),", because this is not a question in a clause"]),t.location),c(t)?new r.callExpr(b(t[0]),l(t).map(b),t[0]):(0,r.throwError)(new o.Message(["function call sexp"]),t.location)}function i(t){if(1===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least one variable (in parentheses) after lambda, but nothing's there"]),t.location),t[1]instanceof Array||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least one variable (in parentheses) after lambda, but found ",new o.ColoredPart("something else",t[1].location)]),t.location),t[1].forEach(function(e){if(!n(e)){var i=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a list of variables after lambda, but found ",new o.ColoredPart("something else",e.location)]);(0,r.throwError)(i,t.location)}}),2===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected an expression for the function body, but nothing's there"]),t.location),t.length>3){var e=t.slice(3).map(function(t){return t.location}),i=e.length+" extra "+(1===e.length?"part":"parts"),a=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected only one expression for the function body, but found ",new o.MultiPart(i,e,!1)]);(0,r.throwError)(a,t.location)}var s=t[1].map(O);return s.location=t[1].location,new r.lambdaExpr(s,b(t[2]),t[0])}function a(t){if(1===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least one definition (in square brackets) after local, but nothing's there"]),t.location),t[1]instanceof Array||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a collection of definitions, but given ",new o.ColoredPart("something else",t[1].location)]),t[1].location),t[1].forEach(function(e){y(e)||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a definition, but given ",new o.ColoredPart("something else",e.location)]),e.location)}),2===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single body, but found none"]),t.location),t.length>3){var e=t.slice(3).map(function(t){return t.location}),n=e.length+" extra "+(1===e.length?"part":"parts");(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single body, but found ",new o.MultiPart(n,e,!1)]),t.location)}return new r.localExpr(t[1].map(v),b(t[2]),t[0])}function s(t){if(t.length<3&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected an expression after the bindings, but nothing's there"]),t.location),t[1]instanceof Array||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a key/value pair, but given ",new o.ColoredPart("something else",t[1].location)]),t.location),t[1].forEach(function(e){N(e)||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a key/value pair, but given ",new o.ColoredPart("something else",e.location)]),e.location)}),2===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected an expression after the bindings, but nothing's there"]),t.location),t.length>3){var e=t.slice(3).map(function(t){return t.location}),n=e.length+" extra "+(1===e.length?"part":"parts");(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single body, but found ",new o.MultiPart(n,e,!1)]),t.location)}return new r.letrecExpr(t[1].map(M),b(t[2]),t[0])}function u(t){if(1===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least one binding (in parentheses) after let, but nothing's there"]),t.location),t[1]instanceof Array||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected sequence of key value pairs, but given ",new o.ColoredPart("something else",t[1].location)]),t[1].location),t[1].forEach(function(e){N(e)||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a key/value pair, but given ",new o.ColoredPart("something else",e.location)]),e.location)}),t.length>3){var e=t.slice(3).map(function(t){return t.location}),n=e.length+" extra "+(1===e.length?"part":"parts");(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single body, but found ",new o.MultiPart(n,e,!1)]),t.location)}return 2===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single body, but found none"]),t.location),new r.letExpr(t[1].map(M),b(t[2]),t)}function h(t){if(1===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected an expression after the bindings, but nothing's there"]),t.location),!(t[1]instanceof Array)){var e=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected sequence of key/value pairs, but given ",new o.ColoredPart("something else",t[1].location)]);(0,r.throwError)(e,t.location)}if(t[1].forEach(function(e){N(e)||(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a key/value pair, but given ",new o.ColoredPart("something else",e.location)]),e.location)}),2===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single body, but found none"]),t.location),t.length>3){var n=t.slice(3).map(function(t){return t.location}),i=n.length+" extra "+(1===n.length?"part":"parts");(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single body, but found ",new o.MultiPart(i,n,!1)]),t.location)}var a=t[1].map(M);return a.location=t[1].location,new r.letStarExpr(a,b(t[2]),t[0])}function p(t){if(t.length<4&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a test, a consequence, and an alternative, but all three were not found"]),t.location),t.length>4){var e=t.slice(1).map(function(t){return t.location});(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected only a test, a consequence, and an alternative, ","but found ",new o.MultiPart("more than three of these",e,!1)]),t.location)}return new r.ifExpr(b(t[1]),b(t[2]),b(t[3]),t[0])}function d(t){if(t.length<2){var e=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": Inside a begin, expected to find a body, but nothing was found."]);(0,r.throwError)(e,t.location)}return new r.beginExpr(l(t).map(b),t[0])}function m(t){return t.length<3&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least 2 arguments, but given ",1===t.length?"0":new o.ColoredPart((t.length-1).toString(),t[1].location)]),t.location),new r.andExpr(l(t).map(b),t[0])}function g(t){t.length<3&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least 2 arguments, but given ",1===t.length?"0":new o.ColoredPart((t.length-1).toString(),t[1].location)]),t.location);var e=new r.orExpr(l(t).map(b),t[0]);return e}function w(t){function e(t){return c(t)?t.map(e):t instanceof Array&&0===t.length?t:_(t)}if(t.length<2&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single argument, but did not find one."]),t.location),t.length>2){var n=t.slice(1).map(function(t){return t.location});(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single argument, but found ",new o.MultiPart("more than one.",n,!1)]),t.location)}return new r.quotedExpr(e(t[1]))}return function(){var r=t[0],o=n(r)?f("λ",r)?i(t):f("lambda",r)?i(t):f("local",r)?a(t):f("letrec",r)?s(t):f("let",r)?u(t):f("let*",r)?h(t):f("cond",r)?k(t):f("case",r)?S(t):f("if",r)?p(t):f("begin",r)?d(t):f("and",r)?m(t):f("or",r)?g(t):f("when",r)?E(t):f("unless",r)?E(t):f("quote",r)?w(t):f("quasiquote",r)?I(t):f("unquote",r)?C(t):f("unquote-splicing",r)?P(t):e(t):e(t);return o.location=t.location,o}()}function E(t){t.length<3&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at a test and at least one result after "+t[0]+", but nothing's there"]),t.location);var e=t.slice(2),n=new r.whenUnlessExpr(b(t[1]),p(e),t[0]);return e.location=e[0].location,n.location=t.location,n}function k(t){function e(t){return n(t[0])&&f(t[0],"else")}function i(e){var n=[e.location.start(),e.location.end()];if(e instanceof Array||(0,r.throwError)(new o.Message([new o.MultiPart(t[0].val,s,!0),": expected a clause with a question and an answer, but found ",new o.ColoredPart("something else",e.location)]),e.location),0===e.length&&(0,r.throwError)(new o.Message([new o.MultiPart(t[0].val,s,!0),": expected a clause with a question and an answer, but found an ",new o.MultiPart("empty part",n,!0)]),e.location),1===e.length&&(0,r.throwError)(new o.Message([new o.MultiPart(t[0].val,s,!0),": expected a clause with a question and an answer, but found a ",new o.MultiPart("clause",n,!0)," with only ",new o.MultiPart("one part",[e[0].location],!1)]),e.location),e.length>2){var i=e.map(function(t){return t.location}),a=i.length+" parts";(0,r.throwError)(new o.Message([new o.MultiPart(t[0].val,s,!0),": expected a clause with a question and an answer, but found ",new o.MultiPart("a clause",n,!0)," with ",new o.MultiPart(a,i,!1)]),e.location)}}function a(t){var e=b(t[0]),n=b(t[1]),i=new r.couple(e,n);return r.keywords.includes(e.val)&&"else"!==e.val&&(0,r.throwError)(new o.Message([new o.ColoredPart(e.val,e.location),": expected an open parenthesis before ",e.val,", but found none"]),e.location),e.isClause=!0,i.location=t.location,i}1===t.length&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least one clause after cond, but nothing's there"]),t.location);var s=[t[0].location,t.location.start(),t.location.end()];l(t).forEach(i);var u=l(t).length,c=l(t).map(a);return l(t).forEach(function(n,i){e(n)&&u-1>i&&(0,r.throwError)(new o.Message([new o.MultiPart("cond",s,!0),": ","found an ",new o.ColoredPart("else clause",n.location)," that isn't the last clause in its cond expression; there is ",new o.ColoredPart("another clause",t[i+2].location)," after it"]),n.location)}),new r.condExpr(c,t[0])}function S(t){function e(e){var i=[e.location.start(),e.location.end()];if(e instanceof Array||(c=new o.Message([new o.MultiPart(t[0].val,u,!0),": expected a clause with at least one choice (in parentheses), but found ",new o.ColoredPart("something else",e.location)]),(0,r.throwError)(c,t.location)),0===e.length&&(c=new o.Message([new o.MultiPart(t[0].val,u,!0),": expected at least one choice (in parentheses) and an answer, but found an ",new o.ColoredPart("empty part",e.location)]),(0,r.throwError)(c,t.location)),e[0]instanceof Array||n(e[0])&&f(e[0],"else")||(c=new o.Message([new o.MultiPart(t[0].val,u,!0),": expected 'else', or at least one choice in parentheses, but found ",new o.ColoredPart("something else",e.location)]),(0,r.throwError)(c,t.location)),1===e.length&&(c=new o.Message([new o.MultiPart(t[0].val,u,!0),": expected a clause with a question and an answer, but found a ",new o.MultiPart("clause",i,!0)," with only ",new o.ColoredPart("one part",e[0].location)]),(0,r.throwError)(c,t.location)),e.length>2){var a=e.map(function(t){return t.location}),s=a.length+" parts",c=new o.Message([new o.MultiPart(t[0].val,u,!0),": expected only one expression for the answer in the case clause, but found a ",new o.MultiPart("clause",i,!0)," with ",new o.MultiPart(s,a,!1)]);(0,r.throwError)(c,t.location)}}function i(t){return n(t[0])&&"else"===t[0].val}function a(t){var e=i(t)?t[0]:new r.quotedExpr(t[0]),n=b(t[1]),o=new r.couple(e,n);return e.isClause=!0,o.location=t.location,o}var s;1===t.length&&(s=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least one clause after case, but nothing's there"]),(0,r.throwError)(s,t.location));var u=[t[0].location,t.location.start(),t.location.end()];2===t.length&&(s=new o.Message([new o.MultiPart(t[0].val,u,!0),": expected a clause with at least one choice (in parentheses) and an answer after the expression, but nothing's there"]),(0,r.throwError)(s,t.location));var c=t.slice(2);c.forEach(e);var l=c.length,h=c.map(a);return c.forEach(function(e,n){if(i(e)&&l-1>n){var a=new o.Message([new o.MultiPart("case",u,!0),": found an ",new o.ColoredPart("else clause",e.location),"that isn't the last clause in its case expression; there is ",new o.ColoredPart("another clause",t[n+2].location)," after it"]);(0,r.throwError)(a,t.location)}}),new r.caseExpr(b(t[1]),h,t[0])}function M(t){if(N(t)){var e=new r.couple(O(t[0]),b(t[1]));return e.location=t.location,e.stx=t,e}(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a sequence of key/value pairs, but given ",new o.ColoredPart("something else",t[0].location)]),t.location)}function C(t,e){var n;if("undefined"==typeof e)(0,r.throwError)(new o.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),t.location,"Error-GenericSyntacticError");else if(2!==t.length)(0,r.throwError)(new o.Message(["Inside an unquote, expected to find a single argument, but found "+(t.length-1)]),t.location);else{if(1===e)return n=new r.unquotedExpr(b(t[1])),n.location=t[1].location,n;if(e>1)return n=new r.unquotedExpr(T(t[1],e-1)),n.location=t[1].location,n;(0,r.throwError)(new o.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),t.location)}}function P(t,e){var n;if("undefined"==typeof e)(0,r.throwError)(new o.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),t.location,"Error-GenericSyntacticError");else if(2!==t.length)(0,r.throwError)(new o.Message(["Inside an unquote-splicing, expected to find a single argument, but found "+(t.length-1)]),t.location);else{if(1===e)return n=new r.unquoteSplice(b(t[1])),n.location=t[1].location,n;if(e>1)return n=new r.unquoteSplice(T(t[1],e-1)),n.location=t[1].location,n;(0,r.throwError)(new o.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),t.location)}}function T(t,e){if(c(t)&&"unquote"===t[0].val)return C(t,e);if(c(t)&&"unquote-splicing"===t[0].val)return P(t,e);if(c(t)&&"quasiquote"===t[0].val)return I(t,e);if(c(t)){var n=t.map(function(t){return T(t,e)});return n.location=t.location,n}return 0===e?b(t):function(){var e=new r.quotedExpr(t);return e.location=t.location,e}()}function I(t,e){if(e="undefined"==typeof e?0:e,t.length<2&&(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single argument, but did not find one "]),t.location),t.length>2){var n=t.slice(1).map(function(t){return t.location});(0,r.throwError)(new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a single argument, but found ",new o.MultiPart("more than one.",n,!1)]),t.location)}c(t[1])&&f(t[1][0],"unquote-splicing")&&(0,r.throwError)(new o.Message(["misuse of ,@ or `unquote-splicing' within a quasiquoting backquote"]),t.location);var i=T(t[1],e+1);i.location=t[1].location;var a=new r.quasiquotedExpr(i);return a.location=t.location,a}function q(t){function e(){var e=new r.literal(0);return e.location=t.location,e}var n=t.val,o=h(n.elts.filter(function(t){return void 0!==t})),i=0===o.length?e():o[o.length-1],a=n.elts.map(function(t){return void 0===t?i:b(t)}),s=new r.symbolExpr("vector"),u=new r.callExpr(s,a);return s.location=u.location=t.location,u}function _(e){var i=u(e)?e:s(e)?e:t(e)?q(e):n(e)?e:a(e)?e:f("quote",e)?new r.quotedExpr(e):f("empty",e)?new r.callExpr(new r.symbolExpr("list"),[]):(0,r.throwError)(new o.Message([new o.ColoredPart("( )",e.location),": expected a function, but nothing's there"]),e.location);return i.location=e.location,i}function O(t){return n(t)?t:(0,r.throwError)(new o.Message(["ID"]),t.location)}function N(t){return c(t)&&2===t.length}function B(t){return c(t)&&n(t[0])&&f(t[0],"require")}function R(t){var i;if(t.length<2&&(i=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a module name after `require', but found nothing"]),(0,r.throwError)(i,t.location)),t[1]instanceof Array&&f(t[1][0],"lib")){if(t[1].length<3){var a=t[1].slice(1).length,s=a+(1===a?" part":" parts");i=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected at least two strings after ",new o.ColoredPart("lib",t[1][0].location)," but found only ",s]),(0,r.throwError)(i,t.location)}l(t[1]).forEach(function(n){e(n)||(i=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a string for a library collection, but found ",new o.ColoredPart("something else",n.location)]),(0,r.throwError)(i,t.location))})}else t[1]instanceof Array&&f(t[1][0],"planet")?(i=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": Importing PLaneT pacakges is not supported at this time"]),(0,r.throwError)(i,t.location)):n(t[1])||e(t[1])||(i=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": expected a module name as a string or a `(lib ...)' form, but found ",new o.ColoredPart("something else",t[1].location)]),(0,r.throwError)(i,t.location));var u=new r.requireExpr(t[1],t[0]);return u.location=t.location,u}function A(t){return c(t)&&n(t[0])&&f(t[0],"provide")}function j(t){var e=l(t).map(function(e){if(n(e))return e;if(e instanceof Array&&2==e.length&&n(e[0])&&f(e[0],"struct-out")&&n(e[1]))return e;var i=new o.Message([new o.ColoredPart(t[0].val,t[0].location),": I don't recognize the syntax of this ",new o.ColoredPart("clause",e.location)]);(0,r.throwError)(i,t.location)}),i=new r.provideStatement(e,t[0]);return i.location=t.location,i}i.parse=function(t,e){var n=(new Date).getTime();try{var r=p(t);r.location=t.location}catch(o){throw console.log("PARSING ERROR"),o}var i=(new Date).getTime();return e&&(console.log("Parsed in "+Math.floor(i-n)+"ms"),console.log(r)),r}}(),t.exports=i}]);